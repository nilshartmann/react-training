<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>I React Workshop</title>

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="reveal.js/css/reveal.css">
    <!--<link rel="stylesheet" href="reveal.js/css/theme/white.css" id="theme">-->
    <!--<link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">-->
    <!--<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">-->
    <link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">


    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
    <style>
        /*pre code {*/
            /*display: block;*/
            /*padding: 0.5em;*/
            /*background: #FFFFFF !important;*/
            /*color: #000000 !important;*/
        /*}*/

        .right-img {
            margin-left: 10px !important;
            float: right;
            height: 500px;
        }
        .todo:before {
            content: 'TODO: ';
        }
        .todo {
            color: red !important;
        }
        code span.line-number {
            color: lightcoral;
        }
        .reveal pre code {
            max-height: 1000px !important;
        }
        .hide {
            display: none !important;
        }

    </style>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h3>React Workshop - Preparation</h3>
            <ol>
                <li>Install node LTS from https://nodejs.org/en/
                <li><code>git clone https://github.com/DJCordhose/react-workshop.git</code></li>
                <li><code>npm install</code></li>
                <li>cd <code>code/workspace</code></li>
                <li><code>npm start</code></li>
                <li>open <a href="http://localhost:8080" target="_blank">http://localhost:8080</a></li>
            </ol>
            <p>Slides: <code>2017_en.html</code>
            </p>
        </section>
        <section>
            <h1>React Workshop</h1>
            <p>
                <small><a href="http://nilshartmann.net">Nils Hartmann</a> / <a href="http://twitter.com/nilshartmann">@nilshartmann</a>
                </small>
            </p>
            <p>
                <small><a href="http://zeigermann.eu">Oliver Zeigermann</a> / <a href="http://twitter.com/djcordhose">@DJCordhose</a>
                </small>
            </p>
            <p><small><a href="http://djcordhose.github.io/react-workshop/2017_en.html">
                http://djcordhose.github.io/react-workshop/2017_en.html</a></small></p>
        </section>
        <section>
            <h2>"Day" I: Introduction Into React and Redux</h2>
            <ul>
                <li><a href="#/t0">Part 0: Setup and Introduction into React</a>
                <li><a href="#/t1">Part I: React and ES6 Basics</a>
                <li><a href="#/t2">Part II: Composing Components</a>
                <li><a href="#/t3">Part III: Remote-Calls and Promises</a>
                <li><a href="#/t4">Part IV: Introduction to Redux</a>
                <li><a href="#/t5">Part V: React Router</a>
            </ul>
        </section>

        <section id="t0">
            <h1>Part 0</h1>
            <h2>Setup and Introduction into React</h2>
        </section>

        <section>
            <h3>React: Applications from Components</h3>
            <ul>
                <li class="fragment">Everything is a component, even an Application
                <li class="fragment">Components wrap Template and Logic
                <li class="fragment">Can be implemented as a class or a function
                <li class="fragment">JSX (HTML like) as template language
            </ul>
            <pre class="fragment"><code data-trim contenteditable>class HelloMessage extends React.Component {
  render() {
    return &lt;h1 className='title'>Hello, World!&lt;/h1>
  }
}
</code></pre>
        </section>

        <section>
            <h3>Hello World React</h3>
                <a target="_blank" href="code/hello_world/public/index.html">Demo</a>
        </section>

        <section>
                    <h3>Hello World React</h3>
<pre><code data-trim contenteditable>class HelloMessage extends React.Component {
  render() {
    return (&lt;div>
            &lt;input ref={input => this.input = input}
                   onChange={event => this.updateModel(event)}
                   value={this.state.greeting} />
            &lt;p>{this.state.greeting}, World&lt;/p>
            &lt;button
                onClick={() => this.reset()}>
                Clear
            &lt;/button>
        &lt;/div>);
  }</code></pre>
<pre class="fragment"><code contenteditable class="javascript">  constructor(props) {
    super(props);
    this.state = {greeting: this.props.greeting};
  }
  updateModel(event) {
    this.setState({greeting: event.target.value});
  }
  reset() {
    this.setState({greeting: ""});
    this.input.focus();
  }
}</code></pre>
                </section>

            <section>
                <h3>ES6: Classes</h3>
                <pre class="fragment"><code class="javascript" contenteditable>class Person {
    constructor(name) {
        this._name = name;
    }
    get name() {
        return this._name;
    }
}
class Programmer extends Person {
    constructor(name, language) {
        super(name);
        this.language = language;
    }
    code() {
        return this.name + " codes in " + this.language;
    }
}</code></pre>
                <pre><code class="javascript" contenteditable>const programmer = new Programmer('Erna', 'JavaScript');
console.log(programmer.code());
console.log(programmer instanceof Programmer); // true
console.log(programmer instanceof Person); // true</code></pre>
            </section>



            <section>
            <h3>ES6: Arrow Functions</h3>
            <pre><code class="javascript" contenteditable>const displayInPage = (text) => {
   return document.body.innerHTML +=
       `${text}<br>`;
};</code></pre>
            <pre class="fragment"><code class="javascript" contenteditable>const displayInPage = text => document.body.innerHTML += `${text}<br>`;
</code></pre>
        </section>

        <section>
                    <h3>Glue code to start application</h3>
<pre><code data-trim contenteditable>
// index.html
&lt;html>
  &lt;body>
    <div id="mount"></div>
  &lt;/body>
  &lt;script src="dist/main.js">&lt;/script>
&lt;/html>
</code></pre>
<pre class="fragment"><code data-trim contenteditable class="javascript">
// main.js
import HelloMessage from './HelloMessage';

const mountNode = document.getElementById('mount');
ReactDOM.render(&lt;HelloMessage greeting="Hello"/>, mountNode);
</code></pre>
                    <a target="_blank" href="code/hello_world/public/index.html">Run</a>
                </section>


    <section>
        <h2>Build Process</h2>
        <ul>
            <li>ES6- und JSX-Code must be converted toECMAScript 5
            <li>Tools
                <ul><li>Babel (Compiler)
                    <li>Webpack (Bundler)
                    <li>Webpack Dev Sever (HTTP Server with Hot Reload)
                    </ul>
        </ul>
    </section>
     <section>
        <h2>Webpack and Babel</h2>
        <img src="images/webpack-und-babel.png" style="border:0;box-shadow:0 0 0 0"/>
    </section>

    </section>
    <section>
      <section>
          <h2>Excercise: React Hello-World</h2>
          <h3>Getting used to tools and write your first React Application</h3>
      </section>
      <section>
          <h3>Step #1: Start Tool-Chain</h3>
          <p>Make sure you performed steps as described in initial setup</p>
          <p>If your browser displays 'Hello, World' all is fine
      </section>
      <section>
          <h3>Step #2: Your first React application</h3>
          <ul>
              <li>Replace the static component (HelloMessage) with the component you have seen in the previous slides
              <li>Make experiments
                  <ul>
                      <li>Make all input upper case
                      <li>Display feedback when input has been cleared successfully
                  </ul>
          </li>
          </ul>
      </section>
    </section>

        <section id="t1">
            <h1>Part I</h1>
            <h2>React and ES6 Basics</h2>
            <a href="code/schritte/1-detail/public/index.html" target="_blank">Complete Application</a>
        </section>

        <section>
            <h3>Topics</h3>
            <ul>
                <li>Rendering
                <li>Properties and State
                <li>Refs
            </ul>
        </section>

        <section>
            <h2>ES6-Reference</h2>
            <p><a href="http://exploringjs.com/es6/" target="_blank">
                http://exploringjs.com/es6/
            </a>
        </section>

            <section>
                <h3>React: Rendering</h3>
                <ul class="fragment">
                    <li>Every React Component needs a <code>render</code>-Method (or needs to be a function):</li>
                    <li>will be called when first displayed into DOM and when state changes</li>
                    <li>uses HTML like JSX syntax</li>
                    <li>JSX can contain pure JavaScript in curly braces (<code>{}</code>)
                </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
class GreetingDetail extends React.Component {
  render() {
    return (
      <div>
        &lt;input ref={input => this.input = input}
           onChange={event => this.updateModel(event.target.value)}
           value={this.state.greeting} />
        <p>{this.state.greeting}, World</p>
      </div>
    );
  }
  // ...
}
</code></pre>
        </section>
           <section>
                <h3>React: Rendering #2</h3>
                <ul class="fragment">
                    <li>DOM-Events are wrapped in React-Events
                    <li>React-Events have very simliar API as DOM-Events
                    <li>No automatic 2-way binding to models
                </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
class GreetingDetail extends React.Component {
  render() {
    return (
      <div>
        &lt;input ref={input => this.input = input}
               onChange={event => this.updateModel(event.target.value)}
               value={this.state.greeting} />
        <p>{this.state.greeting}, World</p>
      </div>
    );
  }
  updateModel(greeting) {
    this.setState({greeting});
  }
  // ...
}
</code></pre>
        </section>
        <section>
            <h3>ES6: Extended Object Literals</h3>
   <pre><code class="javascript" contenteditable>const name = 'Oma';
const person = {
    // ES5: name: name
    name
};
console.log(person.name); // Oma
   </code></pre>
        </section>


                    <section>
                        <h2>ES6: Modules, Imports und Exports</h2>
                    </section>
                    <section>
                        <h3>ES6: Export of a single class</h3>
   <pre><code class="javascript" contenteditable>// Person.js
class Person {
  // ...
}
export default Person;
   </code></pre>
                    </section>
                    <section>
                        <h3>ES6: Import</h3>
   <pre><code class="javascript" contenteditable>// Programmer.js
import Person from './Person';

export default class Programmer extends Person {
  // ...
}
   </code></pre>
                    </section>
                    <section>
                        <h3>ES6: Named Export and Import</h3>
   <pre><code class="javascript" contenteditable data-trim>// util.js
export function displayInPage(text) {
    document.body.innerHTML +=
        `${text}<br>` ;
}
// or
export { displayInPage };
   </code></pre>
   <pre class="fragment"><code class="javascript" contenteditable data-trim>import {displayInPage} from "./util";
displayInPage('Hello, World');
   </code></pre>
   <!--<pre class="fragment"><code class="javascript" contenteditable data-trim>import {displayInPage as display} from "./util";-->
<!--display('Hello, World');-->
   <!--</code></pre>-->
   <!--<pre class="fragment"><code class="javascript" contenteditable data-trim>import * as util from "./util";-->
<!--util.displayInPage('Hello, World');-->
   <!--</code></pre>-->
                    </section>
        <!--<section>-->
                        <!--<h2>Neuerungen und Verbesserungen in ES6</h2>-->
                    <!--</section>-->

                    <!--<section>-->
                      <!--<h3>Tagged Template Literals</h3>-->
          <!--<p><a target="_blank" href="http://exploringjs.com/es6/ch_template-literals.html#_tagged-templates">-->
         <!--Mini-DSLs: Template-Literals mit tag-->
    <!--</a>-->
    <!--</p>-->

   <!--<pre class="fragment"><code class="javascript" contenteditable>function tag(strings, ...values) {-->
  <!--console.log(strings);-->
  <!--//[ '', ' codes in ', '.' ]-->
  <!--console.log(values);-->
  <!--//[ 'Oma', 'Haskell' ]-->
  <!--return 'whatever you want';-->
<!--}-->
<!--</code></pre>-->

   <!--<pre><code class="javascript" contenteditable>const expanded = tag`${person} codes in ${language}.`;-->
<!--console.log(expanded);-->
<!--//whatever you want-->
<!--</code></pre>-->

                    <!--</section>-->

                    <section>
                        <h3>ES6: Destructuring of Objects</h3>
   <pre><code class="javascript" contenteditable>const person = {
  name: 'Olli',
  email: 'oliver.zeigermann@gmail.com'
};</code></pre>
   <pre class="fragment"><code class="javascript" contenteditable>const {name, notThere} = person;
console.log(`name=${name}`);
// name=Olli
console.log(`notThere=${notThere}`);
// notThere=undefined
</code></pre>
   <!--<pre class="fragment"><code class="javascript" contenteditable>const {address: {city}} = person;-->
<!--console.log(`city=${city}`);-->
<!--//city=Hamburg-->
<!--</code></pre>-->
                    </section>

        <section>
                        <h3>ES6: Template Literals</h3>
          <p><a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings">
         String-Literals with Gaps
    </a>
    </p>

   <pre><code class="javascript" contenteditable>const person = 'Oma';
const language = 'Haskell';

console.log(`${person} programs
${10 * 1024 * 1024} lines of code
in ${language}.`);
// Output:
// Oma programs
// 10485760 lines of code
// in Haskell.
</code></pre>
                    </section>


                    <!--<section>-->
                        <!--<h3>Destructuring bei Parametern</h3>-->
   <!--<pre><code class="javascript" contenteditable>const person = {-->
  <!--name: 'Olli',-->
  <!--address: {-->
    <!--city: 'Hamburg'-->
  <!--},-->
  <!--email: 'oliver.zeigermann@gmail.com'-->
<!--};</code></pre>-->
   <!--<pre class="fragment"><code class="javascript" contenteditable data-trim>-->
<!--function print({email: contact}) {-->
    <!--console.log(`contact=${contact}`);-->
<!--}-->
<!--print(person);-->
<!--// contact=oliver.zeigermann@gmail.com-->
<!--</code></pre>-->
   <!--<pre class="fragment"><code class="javascript" contenteditable data-trim>-->
<!--function g({name: x, y, z=10}) {-->
  <!--console.log(`x=${x}`); // x=olli-->
  <!--console.log(`y=${y}`); // y=undefined-->
  <!--console.log(`z=${z}`); // z=10-->
<!--}-->
<!--g({ name: 'olli' });-->
<!--</code></pre>-->
                    <!--</section>-->
                    <!--<section>-->
                        <!--<h3>Destructuring bei Arrays</h3>-->
   <!--<pre><code class="javascript" contenteditable>const [a, b] = [1, 2];-->
<!--console.log(`a=${a}`);-->
<!--// a=1-->
<!--console.log(`b=${b}`);-->
<!--// b=2-->
<!--</code></pre>-->
   <!--<pre class="fragment"><code class="javascript" contenteditable data-trim>-->
<!--const [, b] = [1, 2];-->
<!--console.log(`b=${b}`);-->
<!--//b=2-->
<!--</code></pre>-->
                    <!--</section>-->
                    <!--<section>-->
                        <!--<h3>Erweiterte Objekt-Literale</h3>-->
   <!--<pre><code class="javascript" contenteditable>const name = 'Oma';-->
<!--const person = {-->
    <!--// ES5: name: name-->
    <!--name,-->
    <!--// ES5: toString: function()-->
    <!--toString() {-->
        <!--return this.name;-->
    <!--}-->
<!--};-->
<!--console.log(person.name); // Oma-->
<!--console.log(person.toString()); // Oma-->
   <!--</code></pre>-->
                    <!--</section>-->
                    <!--<section>-->
                        <!--<h3>for..of</h3>-->
          <!--<p><a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">-->
         <!--Iterieren Ã¼ber alles was 'iterable' ist-->
    <!--</a>-->
    <!--</p>-->

   <!--<pre><code class="javascript" contenteditable>for (const e of array2) {-->
    <!--console.log(e);-->
<!--}-->
<!--// Hi-->
<!--// Olli-->
<!--// how are you-->
<!--// ?-->
<!--</code></pre>-->
                    <!--</section>-->

    <!--<section>-->
                        <!--<h3>Spread-Operator</h3>-->
          <!--<p><a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">-->
          <!--Alles was 'iterable' ist kann in einzelne Parameter transformiert werden-->
    <!--</a>-->
    <!--</p>-->
   <!--<pre><code class="javascript" contenteditable>const array1 = ['Olli', 'how are you'];-->
<!--const array2 = ['Hi', ...array1, '?'];-->
<!--console.log(array2);-->
<!--// => ["Hi", "Olli", "how are you", "?"]-->
<!--</code></pre>-->
   <!--<pre class="fragment"><code class="javascript" contenteditable>console.log(...array1);-->
<!--</code></pre>-->
                    <!--</section>-->

                <!--<section>-->
                    <!--<h2>Verbesserungen bei Funktionen in ES6</h2>-->
                <!--</section>-->


        <section>
            <h3>React: Properties and State</h3>
            <ul class="fragment">
                <li><b>Properties</b> are being passed to components from <b>outside</b> and are immutable</li>
                <li><b>State</b> an <b>internal</b> property of a component and can be changed</li>
                <li>Both are objects containing key-/value pairs</li>
                <li>Both can be passed to child components</li>
            </ul>
        </section>

        <section>
            <h3>Properties of a Component</h3>
            <ul class="fragment">
                <li>Properties initially being passed in contructor</li>
                <li>RO Access using <code>this.props</code></li>
            </ul>
            <pre class="fragment"><code class="javascript" contenteditable data-trim>
class TitleComponent extends React.Component {
    constructor(props) {
        super(props);
    }
    render() {
      return &lt;h1>{this.props.title}&lt;/h1>
    }
   // ...
}
</code></pre>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
  &lt;TitleComponent title='Hello World' />
</code></pre>

        </section>

        <section>
            <h3>State of a Component</h3>
            <ul class="fragment">
                <li>Example: Data from Input Field or loaded from Server</li>
                <li>Initialization in Constructor <code>this.state={}</code>
                <li><b>Read</b> state using <code>this.state</code>
                <li><b>Set</b> state using <code>this.setState()</code>
                <ul><li>not really a setter</li>
                    <li>merges old and new state</li>
                    <li><b>triggers re-rendering of <i>complete</i> component</b></li>
                </ul>
            </ul>
            </section>

            <section>
                <h3>Example: State of a component</h3>
<pre><code class="javascript" contenteditable data-trim>
class GreetingDetail extends React.Component {
    constructor(props) {
        super(props);
        this.state = { name: 'Klaus' };
    }

    updateModel(event) {
        this.setState({name: event.target.value});
    }

    render() {
        return &lt;input value={this.state.name}
            onChange={e => this.updateModel(e)} />
    }
   // ...
}
</code></pre>
        </section>

        <section>
            <h3>React: Refs</h3>
            <ul class="fragment">
                <li>When rendering you can get access to the underlying DOM element
                <li>you get this reference passed into a function
                <li>typically you store the reference into a class variable
            </ul>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
class HelloMessage extends React.Component {
    render() {
        return (
            <div>
                &lt;input ref={input => this.input = input} />
                &lt;button
                    onClick={() => this.input.focus()}>
                    Focus
                &lt;/button>
            </div>);
    }
}
</code></pre>
        </section>

      <section>
          <h2>Exercise: Detail View for Greeting Application</h2>
          <h3>Create a component that lets you enter a name and a greeting</h3>
      </section>
      <section>
          <h3>Steps</h3>
          <h4>Extend you first React Component in the workspace Folder</h4>
          <ul>
              <li>rename your component to <code>GreetingDetail</code>
              <li>you need to input field that set <code>name</code> und <code>greeting</code> in the component's state
              <li>for basic styling copy material from <code>code/material/1-detail</code> to your <code>public</code> folder
              <li><em>Optional Step: Extend your component so that you can pass in initial State as Properties from the outside</em>
          </ul>
      </section>

        <section id="t2">
            <h1>Part II</h1>
            <h2>Composing Components</h2>
            <h3>Building a Complete Application from Components</h3>
            <a href="code/schritte/2-hierarchy/public/index.html" target="_blank">Complete Application</a>
        </section>

        <section>
            <h2>Reference</h2>
            <p><a href="https://facebook.github.io/react/docs" target="_blank">
                https://facebook.github.io/react/docs
            </a>
            </p>
        </section>

        <section>
            <h3>Topics</h3>
            <ul>
                <li>Components as Functions
                <li>Displaying Lists and Keys
                <li>Architectural Vision: Smart and Dumb Components
                <li>Passing State and Callbacks
                <li>PropTypes
            </ul>
        </section>

            <section>
                <h3>Components as Functions</h3>
                <ul class="fragment">
                    <li>function more or less <code>render</code> method</li>
                    <li>Properties are being passed as parameters</li>
                    <li>Currently no state and no lifecycle methods</li>
                </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
function Layout(props) {
  return (
      <div className="Main">
        <div className="Container">
          {props.children}
        </div>
      </div>
  );
}
</code></pre>
        </section>

            <section>
                <h3>Lists and Keys</h3>
                <ul class="fragment">
                    <li>No special synatx in JSX for Listen
                    <li>Instead use JavaScripts's <code>Array.map</code>
                    <li>Elements of a List need unique key
                </ul>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
const greetings = [{
    id: 0,
    name: 'Olli',
    greeting: 'Huhu'
},
{
    id: 1,
    name: 'Oma',
    greeting: 'Hallo'
}
];
const body = greetings.map(greeting =>
    &lt;tr key={greeting.id}>
        &lt;td>{greeting.name}</td>
        &lt;td>{greeting.greeting}</td>
    &lt;/tr>);
</code></pre>
        </section>

        <section>
            <h2>Smart and Dumb Components</h2>
            <p>Common Architectural Pattern</p>
            <p>Not restricted to React</p>
        </section>

        <section>
            <h3>Smart Components (aka Container Components aka Containers)</h3>
                    <ul>
                        <li>manage a selection of the current application state (or are connected to state management)
                        <li>pass down state to their children as properties
                        <li>have UI logic they can call or pass down to their children as properties
                        <li>might be mapped to a specific URL
                    </ul>
        </section>

        <section>
            <h3>Dumb Components (aka Presentational Components aka Components)</h3>
                    <ul>
                        <li>do not manage state (and are not connected to state management)
                        <li>typically only contain other Dumb Components (there are
                            <a target="_blank" href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.z8xy5zvhs">
                                exceptions to this rule</a>)
                        <li>have no knowledge of their parent
                        <li>can hold and manage temporary UI (like expanded or open)
                    </ul>
        </section>

        <section>
            <h3>Communication</h3>
            <img src="images/smart-dumb-w-label.png">
        </section>

        <section>
            <h3>Passing of State and Callbacks</h3>
            <p class="fragment">
                Both are passed via props
            </p>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
class GreetingController extends React.Component {
    render() {
        const {greetings} = this.state;
        return (
            <div>
                &lt;GreetingMaster greetings={greetings}
                    onAdd={() => this.setState({mode: MODE_DETAIL})}
            </div>);
    }
    // ...
}
    </code></pre>
    </section>
    <section>
        <h3>Passing Properties using Object-Spread</h3>
        <ul class="fragment">
                <li>Passes <b>all</b> fields of an Object as individual Properties</li>
        </ul>
        <pre class="fragment"><code class="javascript" contenteditable data-trim>
class GreetingController extends React.Component {

    const greeting = { name: 'Klaus', greeting: 'Hello' };

    render() {
        return &lt;GreetingDetail {...greeting} />

        // same as:
        // &lt;GreetingDetail name='Klaus' greeting='Hello' />
    }
}
        </code></pre>
    </section>

        <section>
            <h3>PropTypes</h3>
                <ul class="fragment">
                    <li>You can declare what properties a component expects
                    <li>Can contain type information
                    <li>Wrong or missing properties result in warnings at run time
                    <li><a href="https://facebook.github.io/react/docs/typechecking-with-proptypes.html" target="_blank">
                    Reference
                    </a>
                </ul>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
GreetingDetail.propTypes = {
    greeting: PropTypes.shape({
      name: React.PropTypes.string.isRequired,
      greeting: React.PropTypes.string.isRequired
    }),
    onAdd: PropTypes.func.isRequired
};
</code></pre>
        </section>

            <section>
                <h2>Exercise: Compose a complete Application</h2>
                <h3>Assemble your existing Detail View and a Master View (Dumb Components) with the GreetingController (Smart Component)</h3>
            </section>
            <section>
                <h3>Steps</h3>
                <ul>
                    <li>copy material from <code>code/material/2-hierarchy</code> into your src folder
                    <li>in <code>GreetingController</code> extend the render method to display the Detail View when a user clicks the Add Button
                    <li>in the <code>GreetingController</code> you will already find a guiding comment that also indicates where you need to include the component
                    <li>to the Detail View pass a callback that uses the <code>addGreeting</code> method that has already been prepared for you
                    <li>in <code>GreetingDetail</code> you need a new button that triggers the callback with the newly created greeting as a parameter
                </ul>
            </section>
            <section>
                <h3>Architecture Sample Application</h3>
                <img src="ai/greeting-hierarchy.png" style="border:0;box-shadow:0 0 0 0"/>
            </section>
            <section>
                <h3>GreetingMaster</h3>
                <img src="images/greeting-master.png" style="border:0;box-shadow:0 0 0 0"/>
            </section>
            <section>
                <h3>GreetingDetail</h3>
                <img src="images/greeting-detail.png" style="border:0;box-shadow:0 0 0 0"/>
            </section>

        <section id="t3">
            <h1>Part III</h1>
            <h2>Remote-Calls to Server</h2>
            <a href="code/schritte/3-remote/public/index.html" target="_blank">Complete Application</a>
        </section>

        <section>
            <h3>Challenges</h3>
            <ul>
                <li>How to load and save technically?
                <li>How to do async operations in React?
                <li>Where to trigger initial load?
            </ul>
        </section>

            <section>
                <h2>fetch</h2>
                <p>Browser API to load and save data</p>
            </section>
        <section>
        <h3>fetch as a simple GET</h3>
        <pre><code class="javascript" contenteditable>const url = `${BACKEND_URL}${path}`;

fetch(url)
    .then(response => response.json())
    .then(json => /* ... */)
    .catch(ex => console.error('request failed', ex));
</code></pre>
        </section>

        <section>
            <h3>fetch sending JSON using POST</h3>
            <pre><code class="javascript" contenteditable>const url = `${BACKEND_URL}${path}`;
const objectBeSaved = ...;

fetch(url, {
    method: 'POST',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(objectBeSaved)
})
    .then(json => response.status === 201 ? /* success */ :
                                            /* failure */)
    .catch(ex => console.error('request failed', ex));
</code></pre>

        </section>


        <section>
            <h2>Promises</h2>
        </section>
                    <section>
                        <h3>A Promise will resolve to a value, be rejected or abort with an error</h3>
                        <ul>
                            <li class="fragment">If it resolves this might be right now or in the future</li>
                            <li class="fragment">In any case a reaction will be asynchronous</li>
                        </ul>
                    </section>

                <section>
                        <h3>Create a Promoise and react asynchronously</h3>
   <pre class="fragment"><code class="javascript" contenteditable>const promise = new Promise(resolve =>
    setTimeout(
        () => resolve('Result from promise'),
        1000)
);
</code></pre>
    <pre><code class="javascript" contenteditable>promise.then(value => console.log(value));
// Output after 1 second: Result from promise
</code></pre>
                    </section>
                    <section>
                        <h3>Chaining Execution</h3>
   <pre><code class="javascript" contenteditable>const promise = new Promise(resolve =>
    setTimeout(
        () => resolve('Result from promise'),
        1000)
);
</code></pre>
    <pre class="fragment"><code class="javascript" contenteditable>// then returns a new promise
const promise2 = promise.then(value => `${value} plus stuff`);</code></pre>
    <pre class="fragment"><code class="javascript" contenteditable>promise2.then(value => console.log(value));
// Output after 1 second: Result from promise plus stuff
</code></pre>
                    </section>
            <section>
                <h3>Errors abort the rest of the chain</h3>
                <p class="fragment">Unfortunately, such an error will be swallowed if you do not react to it</p>
            </section>

                    <section>
                        <h3>Catch Clause</h3>
   <pre><code class="javascript" contenteditable>Promise
    // creates and directly resolves promise
    .resolve('Result from promise')
    .then(x => {
        // this will be printed
        console.log(x);
    })
    .then(() => {
        console.log('This will be printed');
    })
    // this will NOT be printed as no error occured
    .catch(e => console.log('error: ', e))

// Output:
// Result from promise
// This will be printed</code></pre>
                    </section>
                    <section>
                        <h3>Catch Clause when there is an error</h3>
   <pre><code class="javascript" contenteditable>Promise
    // creates and directly resolves promise
    .resolve('Result from promise')
    .then(x => {
        // this will be printed
        console.log(x);
        throw new Error('Something went wrong');
    })
    .then(() => {
        console.log('This will NOT be printed');
    })
    // this will be printed
    .catch(e => console.log('error: ', e))

// Output:
// Result from promise
// error:  [Error: Something went wrong]</code></pre>
                    </section>
                    <section>
                        <h3>Catch Clause when Promise is rejected</h3>
   <pre><code class="javascript" contenteditable>Promise
    // creates and directly rejects promise
    .reject('Promise rejected')
    .then(x => {
        // this will NOT be printed
        console.log(x);
    })
    .then(() => {
        console.log('This will NOT be printed');
    })
    // this will be printed
    .catch(e => console.log('error: ', e))

// Output:
// error:  Promise rejected</code></pre>
                </section>
            <section>
                <h2>OPTIONAL<br>Exercise: Loading and Saving Data from/to server</h2>
                <p>Create a new version of your application that initially loads greeting data from the server</p>
                <p>It should also save data to the server when a new greeting is added</p>
            </section>
            <section>
                <h3>Steps</h3>
                <ol>
                    <li>There already is a complete server implementation, which you can start using <code>npm start</code> in the root directory
                    <li>It runs on localhost:7000
                    <li>in <code>GreetingController</code> call <code>fetch</code> using <em>GET</em> to load greetings from the server in lifecycle method <code>componentDidMount</code></li>
                    <li>in <code>onAdd</code> call <code>fetch</code> using <em>POST</em> to save the new greeting to the server</li>
                </ol>
                <p>Have a look at <code>backend.js</code> that contains proper API documentation</p>
            </section>

        <section id="t4">
            <h1>Part IV</h1>
            <h2>State Management using Redux</h2>
            <a href="code/schritte/redux/6-redux/public/index.html" target="_blank">Application</a>
        </section>

        <section>
            <h2>Reference</h2>
            <p>Redux Core: <a href="http://redux.js.org/" target="_blank">
                http://redux.js.org/
            </a>
            </p>
            <p>Binding to React: <a href="https://github.com/reactjs/react-redux" target="_blank">
                https://github.com/reactjs/react-redux
            </a>
            </p>

        </section>

        <section>
            <h2>Motivation</h2>
            <p class="fragment">State distributed over many components can make applications hard to understand and debug</p>
            <p class="fragment">Often more than one component depends on a certain part of state -
                especially hard to do when components are not even in the same hierarchy </p>
            <p class="fragment"><strong>Redux extracts state management and handlers from React components</strong></p>
        </section>

        <section>
            <h2>Render Cycle in Pure React</h2>
            <img src="images/redux-01-react-cycle-no-redux.png" style="border:0;box-shadow:0 0 0 0"/>
        </section>

        <section>
            <h2>Redux Extracts Responsibilities</h2>
            <img src="images/redux-02-extracting-responsibility.png" style="border:0;box-shadow:0 0 0 0"/>
        </section>

        <section>
            <h2>Resulting Redux Architecture</h2>
            <img src="images/redux-03-resulting-redux-architecture.png" style="border:0;box-shadow:0 0 0 0"/>
        </section>

        <section>
            <h3>Event-Handlers become Action-Creators</h3>
           <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
export function setFilter(filter) {
    return {
        type: SET_FILTER,
        filter
    };
}
</code></pre>
            <ul>
                <li class="fragment">Action-Creators create Action-Objects</li>
                <li class="fragment">Actions are command like structures of things to do by application</li>
                <li class="fragment">They are passed to all reducers using dispatch method of store</li>
                <li class="fragment">Actions consist of type and random payload</li>
            </ul>
        </section>

        <section>
            <h3>Action-Creators making server calls</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
export const loadGreetings = dispatch => {
    return fetch(BACKEND_URL)
        .then(response => response.json())
        .then(greetings => dispatch({
            type: SET_GREETINGS,
            greetings
        });
    );
};
</code></pre>
            <ul>
                <li class="fragment">As call is async, we need to get the dispatch method passed in</li>
            </ul>
            <p  class="fragment"><strong>Action-Creators are the only part of the application allowed to perform async operations, like server calls</strong></p>
        </section>

        <section>
            <h3>A <em>single</em> Store holds <em>all</em> State</h3>
           <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import { rootReducer } from './reducers';

// http://redux.js.org/docs/api/createStore.html
const store = createStore(
    rootReducer // reducer
);
ReactDOM.render(
    &lt;Provider store={store}>
        &lt;GreetingController />
    &lt;/Provider>,
    mountNode
);
        </code></pre>
            <ul>
                <li class="fragment">Central part of application</li>
                <li class="fragment">Provides the dispatch method used in action creators</li>
                <li class="fragment">Made available to all Components using Provider wrapper</li>
            </ul>
        </section>

        <section>
            <h3>Middleware sits between dispatch and store</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { applyMiddleware } from 'redux';
import thunk from 'redux-thunk';

const store = createStore(
    rootReducer, // reducer
    applyMiddleware(thunk) // middleware as enhancer
);
        </code></pre>
            <ul>
                <li class="fragment">Thunk middleware serves as a de-facto standard</li>
                <li class="fragment">Passes in the dispatch method into the async action creator</li>
                <li class="fragment"><a href="https://github.com/gaearon/redux-thunk#whats-a-thunk" target="_blank">
                    A thunk is a function that wraps an expression to delay its evaluation.
                </a></li>
                <li class="fragment">You don't have to worry about it for basic Redux usage</li>
            </ul>
        </section>

        <section>
            <h3>Reducers contain core (business) logic</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import {combineReducers} from 'redux';

// http://redux.js.org/docs/api/combineReducers.html
export const rootReducer = combineReducers({
    greetings, // updates greeting partial state
    filter,
    mode
});
        </code></pre>
            <ul>
                <li class="fragment">A pure function that takes old state plus action and returns a new state</li>
                <li class="fragment">Often composed of reducers only updating partial state</li>
            </ul>
        </section>

        <section>
            <h3>Partial Reducers</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
const mode = (state = MODE_MASTER, action) => {
    switch (action.type) {
        case SET_MODE:
            return action.mode;
        default:
            return state;
    }
};
        </code></pre>
            <ul>
                <li class="fragment">Initialize part of the state (often using default parameters)</li>
                <li class="fragment">Never mutate state</li>
                <li class="fragment">Always return a (not necessarily complete) copy of state fragment</li>
                <li class="fragment">Depend on action and state structure</li>
            </ul>
        </section>

        <section>
            <h3>Connecting Store to Components</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { connect } from 'react-redux';

import * as actions from './actions';

export default connect(
    state => ({
        mode: state.mode
        // ...
    }),
    actions
)(GreetingController);
            </code></pre>
            <ul>
                <li class="fragment">Interfaces to store passed down by provider</li>
                <li class="fragment">Extracts state that a specific component is interested in an passes as props</li>
                <li class="fragment">Action Creators can be bound to dispatch method from state and also passed as props</li>
            </ul>
        </section>

        <section>
            <h3>Using state and action creators in connected Components</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
class GreetingController extends React.Component {
    render() {
        // state from store
        const {aggregatedGreetings, greetings, mode} = this.props;
        // action creators bound to dispatch from store
        const {setMode, saveGreeting, setFilter} = this.props;

        // ...
    }
}
            </code></pre>
            <ul>
                <li class="fragment">Both Action Creators and State merged into props passed from parent</li>
                <li class="fragment">State and Action Creators destructered where needed</li>
                <li class="fragment">Only re-rendered when accessed state changes</li>
            </ul>
        </section>

        <section>
            <h3>Selectors</h3>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
export const filterGreetings = (greetings, filter) =>
        filter ? greetings.filter(greeting => greeting.name === filter)
                : greetings;

export default connect(
    state => ({
        greetings: filterGreetings(state.greetings, state.filter),
        // ...
    }),
    // ...
)(GreetingController);        </code></pre>
            <ul>
                <li class="fragment">Compute derived data</li>
                <li class="fragment">Transiently transform (normalized) state to data structure component needs</li>
                <li class="fragment">Typically in a file of their own</li>
                <li class="fragment">Allow for reuse and use for caching (typically using
                <a href="http://redux.js.org/docs/recipes/ComputingDerivedData.html" target="_blank">reselect</a>)</li>
            </ul>
        </section>

        <section>
            <section>
                <h2>Excercise: Complete Redux Application</h2>
                <h3>The application is already working with Redux, but filtering from the Chart still needs to be done</h3>
            </section>
            <section>
                <h3>Steps</h3>
                <ul>
                    <li>Copy all material from <code>code/material/6-redux</code> to your source folder
                    <li>TODOs have been added to actions, reducers and GreetingController to guide you through the exercise
                    <li>Use the existing filter code from the previous step as a starting point
                    <li>Add an Action Type and an action creator for filtering
                    <li>Add a reducer to handle such an action and add it to <code>combineReducers</code>
                    <li>In <code>GreetingController</code> pass down the action creator to the Chart to react to
                    filtering events
                </ul>
            </section>
        </section>

                <section id="t5">
            <h1>Part </h1>
            <h2>React Router</h2>
            <a href="code/schritte/router-v3/public" target="_blank">Target Application</a>
        </section>

        <section>
            <h2>API-Reference</h2>
            <p><a href="https://github.com/reactjs/react-router/blob/master/docs/API.md" target="_blank">
                https://github.com/reactjs/react-router/blob/master/docs/API.md
            </a>
            </p>
        </section>

        <section>
            <h3>Topics</h3>
            <ul>
                <li><code>Route</code> and <code>IndexRoute</code>
                <li>history
                <li>Nested routes and the <code>children</code>-Property
                <li>Links
                <li><code>location</code> and <code>param</code> Property and <code>componentWillReceiveProps</code>
            </ul>
        </section>

        <section>
            <h3>Router, Route, IndexRoute, Redirect</h3>
<pre class="fragment"><code class="xml" contenteditable data-trim>
import { Router, Route, Redirect, IndexRoute, hashHistory }
    from 'react-router';

const routes = &lt;Router history={hashHistory}>
  &lt;Redirect from="/vote" to="/votes"/>
  &lt;Route path="/" component={Layout}>
    &lt;IndexRoute component={VotePage}/>
    &lt;Route path="votes/:id" component={SingleVotePage}/>
    &lt;Route path="login(/:redirect)" component={LoginPage}/>
    &lt;Route path="compose" component={VoteComposerPage} onEnter={requireAuth}/>
    &lt;Route path="*" component={NoMatchPage}/>
  &lt;/Route>
&lt;/Router>;
</code></pre>
        </section>

        <section>
            <h3>Router</h3>
            <ul class="fragment">
                <li>Real React Component</li>
                <li>Top-Level-Component, decides what gets displayed based on URL from <b>history</b></li>
                <li>has Routes as children</li>
            </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
const routes = &lt;Router history={hashHistory}>
...
&lt;/Router>;
</code></pre>
        </section>

        <section>
            <h3>History</h3>
            <ul class="fragment">
                <li>Abstraction of browser history</li>
                <li>can be used to navigate by calling methods on it</li>
                <li>delivers URL to Router</li>
                <li><code>hashHistory</code> encodes path as deep link (#/vote)
                <li><code>browserHistory</code> encodes path directly into URL (/vote)
            </ul>
<pre class="fragment"><code class="javascript" contenteditable data-trim>
// Push a new entry onto the history stack.
history.push('/home')

// Replace the current entry on the history stack.
history.replace('/profile')
</code></pre>
        </section>

        <section>
            <h3>Route</h3>
            <ul class="fragment">
                <li>Configuration Component
                    Konfigurations-Komponente</li>
                <li>Mapping for which component to display for which URL
                <li>can be nested</li>
                <li>All Components matching the URL path will be displayed
            </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
// plain match (containing nested routes)
&lt;Route path="/" component={Layout}>
    // id is passed as parameter to component
    &lt;Route path="votes/:id" component={SingleVotePage}/> /
    // redirect is optional
    &lt;Route path="login(/:redirect)" component={LoginPage}/>
    // onEnter and onExit possible as hooks
    &lt;Route path="compose" component={VoteComposerPage}
        onEnter={requireAuth}/>
    // wildcard
    &lt;Route path="*" component={NoMatchPage}/>
&lt;/Route>
</code></pre>
        </section>

        <section>
            <h3>IndexRoute and Redirect</h3>
<pre class="fragment"><code class="xml" contenteditable data-trim>
  // /vote redirects to /votes
&lt;Redirect from="/vote" to="/votes"/>
&lt;Route path="/" component={Layout}>
  // will be rendered additionally when path is just /
  &lt;IndexRoute component={VotePage}/>
  // ...
&lt;/Route>
</code></pre>
        </section>

        <section>
            <h3>Nested Routes and children</h3>
            <ul class="fragment">
                <li>Router renders components matched by path from URL as its sub components
                    rendert den gematchten Komponenten-Pfad als seine Unterkomponenten
                <li>sub components will be passed as <code>children</code> in <code>props</code>
                <li><code>children</code> in Router always is a single component, never an array
            </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
export default function Layout(props) {
    return <div>
        <h1>Greetings</h1>
        {props.children}
    </div>;
}
</code></pre>
        </section>

            <section>
                <h3>Link</h3>
                <ul class="fragment">
                    <li>Real React Component</li>
                    <li>A Link matching a path of a Route
                    <li>is rendered as an <code>a</code>-Element</li>
                    <li>has an additonal click handler, that disables the default behavior and instead updates using history API
                    <li>knows if a route it points to is currently activ (displayed) - useful for simple styling
                </ul>
<pre class="fragment"><code class="xml" contenteditable data-trim>
&lt;Link to={`/votes/${vote.id}`} activeClassName='active'>
  <h1 className="Title">{vote.title}</h1>
&lt;/Link>
</code></pre>
        </section>

        <section>
            <h3>Passing data to Routes</h3>
            <p>Router passes data from URL to rendered components using Properties</p>
            <ul class="fragment">
                <li>Property <code>location</code>: full <code>pathname</code> and <code>query</code></li>
                <li>Property <code>params</code>: dynamic Segments of URL as described in Route (e.g.. <code>id</code>)</li>
                <li>Lifecycle method <code>componentWillReceiveProps</code>: will be supplied with new Properties when route changes
            </ul>
        </section>

    </div>

</div>
<script src="lib/jquery-2.2.4.js"></script>

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.js"></script>
<script>
    Reveal.addEventListener( 'ready', function( event ) {
        if (window.location.hostname.indexOf('localhost') !== -1) {
            // only applies to presentation version
            Reveal.configure({ controls: false });
        } else {
            // only applies to public version
            $('.fragment').removeClass('fragment');
        }
        // applies to all versions
        $('code').addClass('line-numbers');
    } );
</script>


<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'reveal.js/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'reveal.js/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'reveal.js/plugin/zoom-js/zoom.js', async: true},
            {src: 'reveal.js/plugin/notes/notes.js', async: true},
            {src: 'lib/js/line-numbers.js'}
        ]
    });

</script>

</body>
</html>
