<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>React Training</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"
    />
    <link rel="stylesheet" href="slides/styles.css" />
    <script src="slides/export.js"></script>
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-state="title">
          <h2 class="title" style="font-size: 7rem;">
            <b>React Training</b>
          </h2>

          <h4>
            <span class="transparent-bg">
              <a href="http://nilshartmann.net" target="_blank">Nils Hartmann</a> |
              <a href="http://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
            </span>
          </h4>

          <p style="margin-top: 4rem;"></p>
          <div>
            <h3><span class="transparent-bg">Vorbereitung</span></h3>
            <p>
              <span class="transparent-bg"
                >git clone https://github.com/nilshartmann/react-training</span
              >
            </p>
            <p>
              <span class="transparent-bg">oder: git pull</span>
            </p>
          </div>
          <p style="margin-top: 4rem;"></p>
          <div>
            <h3><span class="transparent-bg">Slides</span></h3>
            <p>
              <span class="transparent-bg">Lokal: 2022_01_24_js_react_graphql.html</span>
            </p>
          </div>
        </section>
        <section>
          <h2>Nils Hartmann</h2>
          <p>
            <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a> /
            <a href="http://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
          <p><em>Freiberuflicher Software-Entwickler, Berater und Trainer aus Hamburg</em></p>

          <div style="display: flex; justify-content: center;">
            <div>
              <p>Java</p>
              <p>JavaScript, TypeScript</p>
              <p>React</p>
              <p>Single-Page-Applications</p>
              <p>GraphQL</p>
              <p style="margin-top: 20px;">
                <a href="https://reacttraining.dev">Schulungen und Workshops</a>
              </p>
              <p>Alle Dienstleistungen <b>auch online!</b></p>
            </div>
            <div style="margin-left: 15px;">
              <a href="https://reactbuch.de"
                ><img
                  style="max-height: 450px;"
                  src="slides/images/react-buch-v2.jpg"
                /><br />https://reactbuch.de</a
              >
              <br />
            </div>
          </div>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h2>Und ihr?</h2>
          <ul>
            <li>Vorkenntnisse: JavaScript? Andere Programmiersprachen?</li>
            <li>W√ºnsche f√ºr diese Schulung? Besondere Themen oder Interessen?</li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Zeitplan</h3>
          <ul>
            <li class="fragment">
              Montag, 24. Januar: <a href="#/es6-intro">JavaScript-Einf√ºhrung</a>
            </li>
            <li class="fragment">
              Donnerstag/Freitag, 27./28. Januar:
              <a href="#/react-intro">React und Apollo GraphQL Client</a>
            </li>
            <li class="fragment">Jeweils 9:00 bis 17:00 Uhr</li>
            <li class="fragment">Jeweils 12:30 bis 13:30 Mittagspause üçï</li>
            <li class="fragment">K√ºrzere Pausen zwischendurch ‚òïÔ∏è üò¥</li>
          </ul>
        </section>

        <section>
          <h2>Grunds√§tzliches</h2>
          <p><b>Jederzeit:</b> Fragen und Diskussionen!</p>
          <p class="fragment">Motto: Es gibt keine dummen Fragen!</p>
          <p class="fragment">
            Bemerkbar machen per Audio, Chat oder Zoom Reaktion "Hand erheben"
            <span class="fragment"
              ><img width="30%" src="slides/images/zoom-reaktionen.png"
            /></span>
          </p>

          <p class="fragment">Bonuspunkte f√ºr eingeschaltetes Video ü•∞</p>

          <p class="fragment">
            Ich zeige viel direkt im Editor, aber ihr k√∂nnt die Slides als Referenz benutzen
          </p>
          <p class="fragment">
            Wir machen zwischendurch √úbungen, in denen ihr selbst programmieren k√∂nnt
          </p>
        </section>

        <section id="es6-intro">
          <h1>JavaScript Einf√ºhrung</h1>
        </section>

        <section>
          <h3>Hintergrund: "Modernes JavaScript"</h3>

          <p class="fragment">
            <b>ES5</b> erschienen 2009, "Referenzversion", die von allen Browsern (inkl. IE)
            unterst√ºtzt wird
          </p>
          <p class="fragment">
            <b>ES6</b>, <b>ECMAScript 2015</b>, gro√ües Release von 2015,
            <a href="http://kangax.github.io/compat-table/es6/">sehr viele Neuerungen</a>
            ("modernes JavaScript")
          </p>
          <p class="fragment">
            <b>ES7, ES8, ES9 / ES2016, ES2017, ES2018, ...</b>: j√§hrliche Releases mit weniger
            Neuerungen
          </p>
          <p class="fragment">
            <b>ES.Next</b>: "symbolischer" Name f√ºr das jeweils n√§chste Release
          </p>

          <p class="fragment">
            Browsersupport f√ºr neue JavaScript-Versionen
            <a href="http://kangax.github.io/compat-table/es6/"
              >http://kangax.github.io/compat-table/es6/</a
            >
          </p>

          <p class="fragment">
            Kann ich Feature Xyz im Browser verwenden?
            <a href="https://caniuse.com">https://caniuse.com</a>
          </p>
          <p class="fragment">
            Es gibt Compiler (Babel, TypeScript), die modernen Code f√ºr √§ltere Browser zur√ºck
            √ºbersetzen
          </p>
        </section>

        <section>
          <h3>JavaScript: Ausf√ºhren</h3>
          <p>JavaScript wird in der Regel im Browser ausgef√ºhrt</p>
          <p>
            Die meisten Browser bringen sehr leistungsstarke Entwicklungswerkzeuge mit, mit denen
            JavaScript (zum Ausprobieren) direkt ausgef√ºhrt werden kann
          </p>
          <ul>
            <li>
              Firefox
              <a href="https://developer.mozilla.org/de/docs/Tools/Web_Konsole">Web Konsole</a>,
              √∂ffnen mit: Ctrl+Shift+K (Mac: Cmd+Shift+K)
            </li>
            <li>
              Chrome
              <a href="https://developers.google.com/web/tools/chrome-devtools">Dev Tools</a>,
              √∂ffnen mit: Ctrl+Shift+J (Mac: Cmd+Shift+J)
            </li>
          </ul>
          <p>Logging auf die Browser-Konsole: <code>console.log("Hello World!")</code></p>
        </section>

        <section>
          <h3>JavaScript: Die Sprache</h3>
          <p>
            ‚ö†Ô∏è&nbsp;<em
              >JavaScript wurde in nur
              <a
                href="https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/"
                >zehn Tagen</a
              ></em
            >&nbsp;erschaffen! üë∑
          </p>
          <pre><code class="javascript">
// let creates a variable
let x = "Hallo"; // typeof x === "string"
</code></pre>
          <pre class="fragment"><code class="javascript">
// dynamic typing (vs static typing in C#, java, ...)
x = 7; // typeof x === "number"
x = false; // typeof x === "boolean"

x = function() { return "Hallo" } // typeof x === "function"

x.toUpperCase(); // Ouch üò±
    </code></pre>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Control flow</h3>
          <p>√Ñhnlich wie C#/Java</p>
          <p>if / else</p>
          <p>switch / case / default</p>
          <p>while / do</p>
          <p>break / continue</p>
          <p>try / catch</p>
          <p>Semikolon optional</p>
          <p>
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Control_flow_and_error_handling"
              >Referenz</a
            >
          </p>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Variablen: let und const</h3>

          <pre class="fragment"><code class="javascript">
            // Variable
            let alter = 42;
            alter = 43; // OK
          </code></pre>
          <pre class="fragment"><code class="javascript">

            // Konstante
            const name = "Susi";
            name = "Klaus"; // TypeError: invalid assignment to const 'name'
          </code></pre>

          <p class="fragment">Das veraltete <code>var</code> bitte <b>nicht mehr verwenden</b>!</p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Operatoren</h3>
          <pre><code class="javascript">
// === (triple equal operator) OHNE implizite Typ-Konvertierung
if (42 === 42) {
  console.log("of course"); // of course
}
if ("3" === 3) {
  console.log("makes sense"); //
}

if ("" === false) {
  ¬†console.log("hmm..."); //
}
            </code></pre>
          <pre class="fragment"><code class="javascript">
// == (double equal operator) mit impliziter Typ-Konvertierung
// ("coercion")
if (42 == 42) {
  console.log("of course"); // of course
}
if ("3" == 3) {
  console.log("makes sense"); // makes sense
}
if ("" == false) {
  ¬†console.log("hmm..."); // hmm...
}
          </code></pre>

          <p class="fragment"><b>Empfehlung</b>: immer triple-equal-operator verwenden!</p>
          <p class="fragment">
            Mehr Spa√ü mit type coercion:
            <a href="https://github.com/denysdovhan/wtfjs">WTF JS</a>
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>JavaScript: Datatypes</h3>
          <p>Boolean, Null, Undefined, Number, String, Symbol</p>

          <pre><code class="javascript">
            // typeof liefert den Typ einer Variable als String zur√ºck
            console.log(typeof 123); // "number"
          </code></pre>

          <pre class="fragment"><code class="javascript">
              const check = true; // typeof check === "boolean"
              if (check) {
                console.log("jupp!");
              }
            </code></pre>

          <pre class="fragment"><code class="javascript">
              const age = 32; // typeof age === "number"
              if (age < 16) {
                console.log("No Beer, sorry!")
              }
            </code></pre>

          <pre class="fragment"><code class="javascript">
              const name = "Klaus"; // typeof name === "string"
              if (name === "Klaus") { 
                console.log("Hello, Klaus!");
              }
            </code></pre>

          <pre class="fragment"><code class="javascript">
              let value;
              typeof value === "undefined"

              value = null;
              typeof value !== "undefined"
              typeof value === "???"

            </code></pre>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Template Strings</h3>
          <pre class="fragment"><code class="javascript">

const name = "Susi";

// Template String (with ``)
const greet = `Hello, ${name}`; // Hello, Susi

const loudGreet = `Hello, ${name.toUpperCase()}` // Hello, SUSI

// Zeilenumbr√ºche bleiben erhalten:      
const letter = `Hello, ${name},

thanks for subscribing to our e-mail newsletter.

Yours, Edgar`;       
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Funktionen</h3>
          <pre><code class="javascript">
function greet(msg) {
  return "Hello, " + msg;
}

greet("World"); // Hello, World
greet(null), // Hello, null
greet(); // Hello, undefined

</code></pre>
          <pre class="fragment"><code class="javascript">
// Funktionen sind "1st-class-citizens":
function greet(msg) { ... }

// ...und k√∂nnen z.B. einer Variablen zugeordnet werden
const greetSomeone = greet;
greetSomeone("World"); // Hello, World

    </code></pre>
          <pre class="fragment"><code class="javascript">
// Funktionen k√∂nnen als Parameter √ºbergeben werden
function printer(getMessageFn) {
  console.log(getMessageFn())
}

// "inline" Funktion
printer(function() { return "Hello, World"} );

function helloWorld() { return  "Hello, World" };
printer(helloWorld);

</code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Funktionen: Parameter</h3>

          <pre class="fragment"><code class="javascript">
            function add(value, inc = 1) { ... } 
          </code></pre>

          <p class="fragment">
            Der Default-Parameter greift immer, wenn f√ºr den Parameter
            <code>undefined</code> √ºbergeben wurde:
          </p>

          <pre class="fragment"><code class="javascript">
            add(1); // entspricht: add(1,1)
          </code></pre>
          <pre class="fragment"><code class="javascript">
            add(1,undefined); // entspricht: add(1,1)
          </code></pre>
          <pre class="fragment"><code class="javascript">
            add(1,2); // entspricht: add(1,2);
          </code></pre>
          <pre class="fragment"><code class="javascript">
            add(1, null); // entspricht; add(1, null);
          </code></pre>
          <pre class="fragment"><code class="javascript">
            add(); // entspricht: add(undefined, 1);
          </code></pre>

          <p class="fragment">
            Mehrere Default-Parameter: danach d√ºrfen keine nicht-Default-Parameter kommen!
          </p>

          <pre class="fragment"><code class="javascript">
            function add(value, inc = 1) { ... } // ok
            function add(value = 0, inc = 1) { ... }  // ok

            function add(value = 0, inc) { ... } // FEHLER
          </code></pre>
        </section>
        <section>
          <h3>Rest-Parameter</h3>

          <p class="fragment">
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters"
              >Rest-Parameter</a
            >
            nehmen alle verbleibenen, √ºbergebenen Parameter auf
          </p>

          <pre class="fragment"><code class="javascript">
            function greet(phrase, ...names) { 
              // ...
            }

            greet("Hello", "World", "Peter", "Susi");

            // phrase ist "Hello",
            // names ist ein Array mit "World", "Peter", "Susi"
          </code></pre>

          <pre class="fragment"><code class="javascript">
            function say(...words) { 
              // ...
            } 

            say("One", "Two");

            // words ist ein Array mit allen Parametern ("One", "Two")
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Funktionen</h3>
          <p>Achtung, return-Anweisung: Ergebnis direkt hinter return schreiben:</p>

          <pre class="fragment"><code class="javascript">
              function hello() {
                return "Hello";
              }
              const h = hello(); // "Hello"
            </code></pre>
          <pre class="fragment"><code class="javascript">

              function goodbye() {
                return 
                  "Goodbye";    // oh no üò¢!
              }

              const g = goodbye(); // undefined
            </code></pre>

          <pre class="fragment"><code class="javascript">
            // oder:
              function hello() {
                return (
                  "Hello"
                );
              }
            </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h2>√úbung: Strings und Funktionen</h2>
          <p>
            <em>Mache dich mit den JavaScript-Grundlagen vertraut</em>
          </p>

          <p class="fragment">
            Die Beschreibung der √úbung findest Du in
            <b><code>js-intro/01_basic/index.js</code></b
            >. Darin kannst Du auch deinen Code schreiben.
          </p>
          <p class="fragment">
            Du kannst
            <b><code>js-intro/01_basic/index.html</code></b> in deinem Browser √∂ffnen. Diese Datei
            f√ºhrt die <b><code>index.js</code></b
            >-Datei dann aus.
          </p>
          <p class="fragment">
            Ausgaben auf der Browser-Konsole, nach dem √Ñndern von <code>index.js</code>, die Seite
            im Browser neu laden
          </p>
          <p class="fragment">Bei Fragen oder Problemen, kannst Du dich jederzeit melden</p>
          <p class="fragment">
            Wenn alle Stricke rei√üen, findest Du eine m√∂gliche L√∂sung in:
            <code>js-intro/01_basic/solution/index.js</code>
          </p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Pfeilfunktionen (Arrow Functions)</h3>
          <p>In vielen F√§llen "nur" andere Schreibweise als <code>function</code></p>
          <pre><code class="javascript">
  const greet = (msg) => {
    return "Hello, " + msg;
  }
</code></pre>
          <pre class="fragment"><code class="javascript">
  // Bei genau einem Parameter kann die Klammer weggelassen werden:
  const greet = msg => { return "Hello, " + msg }
</code></pre>
          <pre class="fragment"><code class="javascript">
  // Bei keinem oder mehr als einem Parameter muss die Klammer gesetzt werden:
  const greet = (phrase, msg) => { return phrase + msg }
  const greetWorld = () => { return "Hello, World" };

</code></pre>
          <pre class="fragment"><code class="javascript">
  // bei genau einem Ausdruck, k√∂nnen geschweifte Klammern weggelassen werden:
  //   Ergebnis des Ausdrucks dann der R√ºckabgewert der Funktion:
  const greet = msg => "Hello, " + msg;
</code></pre>
          <pre class="fragment"><code class="javascript">
  // Verhalten wie "normale Funktion"
  greet("World"); // Hello, World
  greet(null), // Hello, null
  greet(); // Hello, undefined

  </code></pre>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h3>JavaScript: Arrays</h3>

          <pre><code class="javascript">
          const empty = [];
          const dinge = [ "a", 123, { name: "Klaus"}, false];
          </code></pre>

          <pre class="fragment"><code class="javascript">
          // Ein bestehendes Array um neue Eintr√§ge erweitern
          const abc = ["a", "b", "c"];

          abc.push("d", "e"); // ["a", "b", "c", "d", "e"];

          abc[4]; // e
          abc.length // 5
          </code></pre>

          <pre class="fragment"><code class="javascript">

          // Ein bestehende Array Kopieren und die Kopie erweitern
          const three = [1, 2, 3];
          const five = three.concat(4, 5)
          // three !== five

          </code></pre>
        </section>

        <section>
          <h3>JavaScript: Arrays</h3>
          <pre><code class="javascript">
            const fruits = ["apple", "orange"];
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // Iterieren
            for (const f of fruits) {
              console.log(f);
            }
            // "apple"
            // "orange"
  
            fruits.forEach(f => console.log(f));
            // "apple"
            // "orange"
          </code></pre>
          <pre class="fragment"><code class="javascript">
          // Transformieren ("map") eines Arrays

          const bigFruits = fruits.map(v => v.toUpperCase());
          // ["APPLE", "ORANGE"]
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Objekt</h3>
          <p>Objekte werden als Literal in Form von Key-Value-Paaren geschrieben:</p>
          <pre><code class="javascript">
const firstname = "Klaus";

const person = {
  firstname: firstname,
  hobby: "Singing"
  age: 32
}

console.log(typeof person); // "object"
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // firstname und age sind "properties" am person-Objekt
            // Auf Properties zugreifen
            person.firstname // Klaus
            
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // Werte zuweisen
            person.firstname = "Susi"
            person.firstname // Susi
            
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // Neues Property hinzuf√ºgen
            person.livesIn = "Hamburg"
            
            // Property entfernen
            delete person.livesIn;
            
            // Zugriff auf nicht vorhandenes Property
            person.livesIn // undefined
                      </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Objekte #2</h3>
          <p class="fragment">ES6 "Shorthand Notation"</p>
          <pre class="fragment"><code class="javascript">
            const firstname = "Klaus";
        
            const person = {
              firstname,
              hobby: "Singing"
              age: 32
            }
        </code></pre>

          <p class="fragment">Erinnerung: Nur Referenzen sind konstant!</p>

          <pre class="fragment"><code class="javascript">
            // Nur Referenzen sind konstant
            const person = {
              name: "Susi"
            }

            person = "Klaus"; // TypeError: invalid assignment to const 'person'
            person.name = "Klaus" // OK
          </code></pre>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h2>√úbung: Arrays, Objekte und Funktionen</h2>

          <p class="fragment">
            Die Beschreibung der √úbung findest Du in
            <b><code>js-intro/02_objects_and_arrays/index.js</code></b
            >. Darin kannst Du auch deinen Code schreiben.
          </p>
          <p class="fragment">
            Du kannst
            <b><code>js-intro/02_objects_and_arrays/index.html</code></b> in deinem Browser √∂ffnen.
            Diese Datei f√ºhrt die <b><code>index.js</code></b
            >-Datei dann aus.
          </p>
          <p class="fragment">
            Ausgaben auf der Browser-Konsole, nach dem √Ñndern von <code>index.js</code>, die Seite
            im Browser neu laden
          </p>
          <p class="fragment">Bei Fragen oder Problemen, kannst Du dich jederzeit melden</p>
          <p class="fragment">
            Wenn alle Stricke rei√üen, findest Du eine m√∂gliche L√∂sung in:
            <code>js-intro/02_objects_and_arrays/solution/index.js</code>
          </p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section>

        <section>
          <h3>Mehr zu Objekten</h3>

          <pre class="fragment"><code class="javascript">
// Zugriff via Index Notation
person["first name"]; // Klaus

const what = "first name";
person[what]; // Klaus
person[what] = "Susi";

person["first name"]; // Susi
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Objekte und Funktionen</h3>

          <p>Objekte k√∂nnen Funktionen enthalten</p>

          <pre><code class="javascript">
const person = {
  firstname: "Susi",
  sayHello() { return "Hello, " + this.firstname},
}

person.sayHello() // Hello, Susi
</code></pre>

          <!-- <p class="fragment">Warnung vor "this"!</p>
          <pre class="fragment"><code class="javascript">
const klaus = { 
  firstname: "Klaus", 
  sayHello: person.sayHello
};

klaus.sayHello() // ü§î
</code></pre>

          <pre class="fragment"><code class="javascript">
klaus.sayHello() // Hello, Klaus üòä
</code></pre>

          <pre class="fragment"><code class="javascript">
const sayHelloToSusi = person.sayHello;
sayHelloToSusi(); // ü§î
</code></pre>
          <pre class="fragment"><code class="javascript">
const sayHelloToSusi = person.sayHello;
sayHelloToSusi(); // Hello, undefined ü§™
</code></pre> -->
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Objekte und Pfeilfunktionen</h3>
          <p class="fragment">
            Pfeilfunktionen eignen sich <b>nicht</b> f√ºr Methoden (also f√ºr Funktionen an Objekten):
          </p>
          <pre class="fragment"><code class="javascript">
const person = {
  firstname: "Susi",
  sayHello: () => { return "Hello, " + this.firstname }
}

person.sayHello();  Hello, undefined ü§™
</code></pre>
          <p class="fragment">(Funktionen an Objekten haben kein "this")</p>
        </section>

        <!-- ============================================================================= -->
        <!-- ============================================================================= -->
        <section>
          <h3>Destructuring</h3>
          <p>
            Mit dem
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"
              >object destructuring</a
            >
            Operator kannst Du Werte in einem Objekt an lokale Variablen zuweisen:
          </p>

          <pre><code class="javascript">
            // Ein Objekt...
              const person = {
                firstname: "Susi",
                lastname: "Meier",
                age: 32
              };
            </code></pre>
          <pre class="fragment"><code class="javascript">
              // Zugriff auf Properties (herk√∂mmlich)

              const firstname = person.firstname; // Susi
              const age = person.age; // 32
              const hobby = person.hobby; // undefined
            </code></pre>
          <pre class="fragment"><code class="javascript">
              // Zugriff auf Properties (Destrukturierung)

              const { firstname, age, hobby } = person;

              console.log(firstname); // Susi
              console.log(age); // 32
              console.log(hobby); // undefined
            </code></pre>
        </section>
        <section>
          <h3>Destructuring #2</h3>

          <p class="fragment"><em>Default Werte</em>:</p>

          <pre class="fragment"><code class="javascript">
              const person = {
                firstname: "Susi",
                age: 32
              };

              const { city = "Bonn" } = person;
              console.log(city); // Bonn
            </code></pre>
        </section>
        <section>
          <h3>Destructuring #3</h3>
          <p>Funktionsparameter, die ein Objekt sind, k√∂nnen destrukturiert werden:</p>

          <pre><code class="javascript">
              // Herk√∂mmlich
              function printPerson(person) {
                console.log(`${person.firstname} is ${person.age} years old`);
              }

              printPerson({ firstname: "Susi", age: 32 });
            </code></pre>

          <p class="fragment">Alternative mit Destrukturierung:</p>

          <pre class="fragment"><code class="javascript">
              function printPerson({firstname, age}) {
                console.log(`${firstname} is ${age} years old`);
              }

              printPerson({ firstname: "Susi", age: 32 });
            </code></pre>
        </section>
        <section>
          <h3>Destructuring #3</h3>
          <p>Mit Default-Wert</p>
          <pre><code class="javascript">
             function printPerson({name, age, city="Bonn"}) {
                 console.log(`${name}, ${age} years, lives in ${city}`);
             }
            </code></pre>
          <p class="fragment">ü§î Was wird hier ausgegeben? ü§î</p>
          <pre class="fragment"><code class="javascript">
             
              printPerson({name: "susi", age: 32});
            </code></pre>
          <pre class="fragment"><code class="javascript">
  
              printPerson({name: "susi", age: 32, city: "Freiburg"});
            </code></pre>
          <pre class="fragment"><code class="javascript">
  
              printPerson({name: "susi", age: 32, city: null});
            </code></pre>
          <pre class="fragment"><code class="javascript">
  
              printPerson({name: "susi", age: 32, city: undefined});
            </code></pre>
          <pre class="fragment"><code class="javascript">
  
              printPerson();
             </code></pre>
        </section>

        <section>
          <h3>Object Spread Operator</h3>

          <p>
            Mit dem
            <a
              href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Operators/Spread_syntax"
              >Spread Operator</a
            >
            k√∂nnen alle Felder eines Objektes an eine andere Stelle kopiert werden
          </p>

          <pre class="fragment"><code class="javascript">
            const person = { firstname: "Susi", age: 32 }
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // Kopie erzeugen (herk√∂mmlich)
            const copy = { firstname: person.firstname, age: person.age } 

            // copy: { firstname: "Susi", age: 32}
          </code></pre>
          <pre class="fragment"><code class="javascript">
            // Kopie erzeugen (Spread operator)
            const copy = { ...person };

            // copy: { firstname: "Susi", age: 32}

            copy.age = 33;

            person.age; // 32
          </code></pre>

          <pre class="fragment"><code class="javascript">
            const person = { firstname: "Susi", age: 32 }

            const employee = { ...person, salary: 695000 }
            // employee: { firstname: "Susi", age: 32, salary: 695000 }
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Destructuring und Spread mit Arrays</h3>
          <p>Beide Operatoren funktionieren auch mit Arrays:</p>

          <pre class="fragment"><code class="javascript">
            // Spread-Operator

            const cities = ["Hamburg", "Bonn"];
            const moreCities = [...cities, "K√∂ln"];
          </code></pre>

          <pre class="fragment"><code class="javascript">
            // Destructuring
            const cities = ["Hamburg", "Bonn", "K√∂ln"];
            const [hamburg, bonn] = cities;

            console.log(hamburg); // Hamburg
            console.log(bonn); // Bonn
          </code></pre>
        </section>

        <!-- ============================================================================= -->

        <!-- ============================================================================= -->
        <section>
          <h3>Beispiel: Immutability</h3>
          <p>(Wird sp√§ter insb. mit Redux relevant)</p>

          <p><code>Array.map</code> bildet alle Eintr√§ge aus einem Array auf ein neues Array ab</p>

          <pre class="fragment"><code class="javascript">
const persons = [
  { lastname: "Mueller", firstname: "Klaus", age: 32 }, 
  { lastname: "Meier", firstname: "Susi", age: 33 }
]      

const olderPersons = persons.map( p => {
  return { ...p, age: p.age + 1 }
})
          </code></pre>
          <p class="fragment">
            Im "echten" Leben: <a href="https://immerjs.github.io/immer/">ImmerJS</a>
          </p>
        </section>
        <section>
          <h2>√úbung: Arbeiten mit Objekten</h2>

          <p class="fragment">
            Die Beschreibung der √úbung findest Du in
            <b><code>js-intro/03_objects/index.js</code></b
            >. Darin kannst Du auch deinen Code schreiben.
          </p>
          <p class="fragment">
            Du kannst
            <b><code>js-intro/03_objects/index.html</code></b> in deinem Browser √∂ffnen. Diese Datei
            f√ºhrt die <b><code>index.js</code></b
            >-Datei dann aus.
          </p>
          <p class="fragment">
            Ausgaben auf der Browser-Konsole, nach dem √Ñndern von <code>index.js</code>, die Seite
            im Browser neu laden
          </p>
          <p class="fragment">Bei Fragen oder Problemen, kannst Du dich jederzeit melden</p>
          <p class="fragment">
            Wenn alle Stricke rei√üen, findest Du eine m√∂gliche L√∂sung in:
            <code>js-intro/03_objects/solution/index.js</code>
          </p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Truthy und falsy</h3>
          <p>
            <b><a href="https://developer.mozilla.org/de/docs/Glossary/Falsy">falsy</a></b> ist ein
            Wert, der <b>false</b> wird, wenn er (implizit oder explizit) in ein Boolean konvertiert
            wird
          </p>
          <p>
            <b><a href="https://developer.mozilla.org/de/docs/Glossary/Truthy">truthy</a></b> ist
            ein Wert, der <b>true</b> wird, wenn er (implizit oder explizit) in ein Boolean
            konvertiert wird (das sind alle Werte, die nicht falsy sind)
          </p>

          <pre><code class="javascript">
            if (true) { console.log("I'm true") } // I'm true

            if ("hello") { console.log("I'm true") } // I'm true
            
            if (null) { console.log("I'm falsy") } // 

            if (undefined) { console.log("I'm falsy") } // 
          </code></pre>

          <p class="fragment">Was ist mit diesen?</p>

          <pre class="fragment"><code class="javascript">
            if (0) { console.log("will this be shown?"); } // ü§î
          </code></pre>

          <pre class="fragment"><code class="javascript">
            if ("") { console.log("will this be shown?"); } // ü§î
          </code></pre>

          <pre class="fragment"><code class="javascript">
            if ([]) { console.log("will this be shown?"); } // ü§î
          </code></pre>

          <pre class="fragment"><code class="javascript">
            if ({}) { console.log("will this be shown?"); } // ü§î
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Truthy und falsy #2</h3>

          <p>Insbesondere mit <code>0</code> und Leerstring aufpassen:</p>

          <pre class="fragment"><code class="javascript">
                function add(a, b) {
                  if (!a || !b) {
                    throw new Error("Invalid Argument!");
                  }

                  return a + b;
                }
              </code></pre>
          <pre class="fragment"><code class="javascript">
                add(2, 1);  // 3 üëç
                add(1, null); // "Invalid Argument" üëç
              </code></pre>

          <pre class="fragment"><code class="javascript">
                add(1, 0); // "Invalid Argument" ü§¶
              </code></pre>
        </section>

        <!-- =============================================================================
        <section>
          <h3>Weitere Operatoren</h3>

          <p>
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR"
              >OR</a
            >
          </p>

          <pre class="fragment"><code class="javascript">
              const winter = true;
              const summer = false;
              const spring = false;
              const isWinterOrSummer = winter || summer; // true
              const isSummerOrSpring = summer || spring; // false 

            </code></pre>

          <pre class="fragment"><code class="javascript">
            // Mit nicht-boolean-Werten
            const name = "Peter";
            const age = 32;
            const oneOrTheOther = name || age; // Peter
          </code></pre>

          <pre class="fragment"><code class="javascript">
            // Mit nicht-boolean-Werten
            const name = "";
            const age = 32;
            const oneOrTheOther = name || age; // ???
          </code></pre>

          <pre class="fragment"><code class="javascript">
            // OR...?
            const name = "";
            const age = 0;
            const what = name || age; // ????
          </code></pre>
        </section>

        <section>
          <h3>Weitere Operatoren</h3>
          <p>
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND"
              >AND</a
            >
          </p>
          <p>Liefert den zweiten Wert zur√ºck (oder ersten Wert, wenn erster Wert falsy)</p>

          <pre class="fragment"><code class="javascript">
            const winter = true;
            const summer = false;
            const winterAndSummer = winter && summer; // false; 
          </code></pre>

          <pre class="fragment"><code class="javascript">
            const firstname = "Susi";
            const lastname = "Meier"
            const name = firstname && lastname; // Susi
          </code></pre>

          <pre class="fragment"><code class="javascript">
            const firstname = "";
            const lastname = "Meier"
            const firstnameAndLastNameSpecified = firstname && lastname; // "" üòù
          </code></pre>

          <pre class="fragment"><code class="javascript">
            const firstname = "Abc";
            const lastname = "Meier"
            const firstnameAndLastNameSpecified = !!(firstname && lastname); // true üòù
          </code></pre>
        </section> -->

        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <p>Mit Modulen sind Dateiinhalte nicht mehr global sichtbar</p>
          <p>Module bestimmen explizit, was au√üerhalb verwendet werden darf</p>
          <p>
            Module geben explizit an, was sie aus anderen Modulen verwenden wollen
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <h4>Default Exporte</h4>
          <p>
            <em
              >Objekte, Funktionen, Klassen etc m√ºssen explizit <b>exportiert</b> und
              <b>importiert</b> werden</em
            >
          </p>
          <p class="fragment">Eine <code>export</code>-Anweisung macht aus einer Datei ein Modul</p>

          <pre class="fragment"><code class="javascript">
            // src/domain/Person.js
            export default function createPerson { ... }

            oder

            function createPerson { ... }
            export default createPerson
          </code></pre>

          <pre class="fragment"><code class="javascript">
              // src/domain/Person.js
              export default function createPerson() { ... }

              oder

              function createPerson() { ... }
              export default createPerson;
            </code></pre>

          <pre class="fragment"><code class="javascript">
                Nur EIN Default Export erlaubt;
                export default function createPerson() { ... }
                export default function makePerson { ... } // KONFLIKT
              </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <h4>Importieren</h4>
          <p class="fragment">
            Beim importieren geben wir Pfade(!) an
          </p>

          <pre class="fragment"><code class="javascript">
              // src/domain/Person.js
              export default function createPerson() { ... }

            </code></pre>

          <pre class="fragment"><code class="javascript">
                // src/App.js
                import createPerson from "./domain/Person.js";

                const person = createPerson("Lemmy", "Kilmister");
              </code></pre>

          <p class="fragment">üëâ In der React-Entwicklung k√∂nnt ihr die Dateiendung weglassen!</p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <h4>Benannte Exporte</h4>
          <p class="fragment">
            Ein Modul kann neben einem Default auch beliebig viele
            <b>benannte Exporte</b> haben
          </p>

          <pre class="fragment"><code class="javascript">
                // src/domain/Person.js
                export default function createPerson { ...}

                export function updatePerson() { ... }
                export function removePerson() { ... }
              </code></pre>

          <pre class="fragment"><code class="javascript">
                  // src/domain/Person.js
                  function createPerson { ...}
                  function updatePerson() { ... }
                  function removePerson() { ... }

                  export default createPerson;

                  export { updatePerson, removePerson }
                </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <h4>Benannte Importe</h4>
          <pre class="fragment"><code class="javascript">
                    // src/App.js
                    import { removePerson } from "./Person"
              </code></pre>
          <pre class="fragment"><code class="javascript">
                // Default und benannten Export importieren
                import createPerson, { removePerson } from "./Person.js"
              </code></pre>
        </section>
        <!-- ============================================================================= -->
        <!-- <section>
          <h3>√úbung: Module</h3>

          <p>Vorbereitung</p>
          <ol>
            <li class="fragment">
              √ñffne das Verzeichnis <code>js-intro/04_modules</code> im Terminal
            </li>
            <li class="fragment">F√ºhre <code>npx http-server</code> in dem Verzeichnis aus</li>
            <li class="fragment">
              √ñffne die Seite <a href="http://localhost:8080">http://localhost:8080</a> im Browser
            </li>
            <li class="fragment">Wenn Du die Seite ge√∂ffnet hast, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section>
          <h2>√úbung: Module</h2>

          <p class="fragment">
            Die Beschreibung der √úbung findest Du in
            <b><code>js-intro/04_modules/index.js</code></b
            >. Darin kannst Du auch deinen Code schreiben.
          </p>
          <p class="fragment">
            Du kannst
            <b><code>js-intro/04_modules/index.html</code></b> in deinem Browser √∂ffnen. Diese Datei
            f√ºhrt die <b><code>index.js</code></b
            >-Datei dann aus.
          </p>
          <p class="fragment">
            Ausgaben auf der Browser-Konsole, nach dem √Ñndern von <code>index.js</code>, die Seite
            im Browser neu laden
          </p>
          <p class="fragment">Bei Fragen oder Problemen, kannst Du dich jederzeit melden</p>
          <p class="fragment">
            Wenn alle Stricke rei√üen, findest Du eine m√∂gliche L√∂sung in:
            <code>js-intro/04_modules/solution/</code>
          </p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section> -->
        <!-- ============================================================================= -->
        <section>
          <h3>Module</h3>
          <h4>Bundling</h4>

          <p>Nicht alle Browser unterst√ºtzen Module nativ</p>
          <p>
            Es gibt in JS faktisch mehr als ein Modulsystem (zum Beispiel
            <a href="https://nodejs.org/docs/latest/api/modules.html#modules-commonjs-modules"
              >CommonJS</a
            >
            aus Node.JS)
          </p>

          <p>
            Mit einem <b>Bundler</b> werden die Module im Build "aufgel√∂st" und im einfachsten Fall
            in <b>eine</b> Datei geschrieben
          </p>
          <p class="fragment">
            Prominente Bundler: <a href="http://webpack.github.io/">Webpack</a> und
            <a href="https://rollup.js.org">Rollup</a>
          </p>
        </section>

        <section>
          <h2>Webpack und Babel</h2>
          <img src="slides/images/webpack-und-babel.png" style="height: 600px;" />
          <p class="fragment">
            Das passiert auch im React Build-Tooling, ihr m√ºsst euch nicht drum k√ºmmern!
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h2>Web-Entwicklung mit "vanilla" JavaScript</h2>

          <p><a href="js-intro/99_01_helloworld/">Hello World</a></p>
        </section>
        <section>
          <h3>Web-Entwicklung mit "vanilla" JavaScript: DOM</h3>
          <p>Der Browser erzeugt das Document Object Model (<b>DOM</b>) aus dem HTML-Code</p>
          <p class="fragment">Browser rendert und stellt den DOM dar</p>

          <p class="fragment">
            √úber JavaScript k√∂nnen nach Elementen im DOM suchen (getElementBy...)
          </p>
          <p class="fragment">
            Wir k√∂nnen Listener an DOM Elemente h√§ngen und auf Ereignisse reagieren (zum Beispiel
            auf Text, der in einem Input-Feld eingegeben wurde)
          </p>
          <p class="fragment">
            Wir k√∂nnen den DOM auch mit JS <b>ver√§ndern</b> (hinzuf√ºgen/l√∂schen von Elemente,
            Attribute ver√§ndern, CSS √§ndern)
          </p>
          <p class="fragment">
            üëâ Immer, wenn sich der DOM √§ndert, wird die Darstellung im Browser ge√§ndert
          </p>
        </section>

        <section>
          <h3>Beispiel: eine Anwendung in "vanilla" oder "plain" JavaScript</h3>
          <pre><code data-trim class="html">
        &lt;!DOCTYPE html>
        &lt;html>
          &lt;head>&lt;title>Hello World!&lt;/title>&lt;/head>
          &lt;body />
          &lt;script>
              const title = document.createElement("h1");
              const titleText = document.createTextNode("Hello World");
              title.appendChild(titleText);

              const greetButton = document.createElement("button");
              greetButton.innerHTML = "Greet!";
              greetButton.disabled = true;
              greetButton.addEventListener("click", event => {
                const div = document.createElement("p");
                div.textContent = greetInput.value;
                document.body.appendChild(div);
              });

              const greetInput = document.createElement("input");
              greetInput.addEventListener("input", event => {
                if (event.target.value.length > 0) {
                  greetButton.disabled = false;
                } else {
                  greetButton.disabled = true;
                }
              });

              document.body.appendChild(title);
              document.body.appendChild(greetInput);
              document.body.appendChild(greetButton);
          &lt;/script>
        &lt;/html>    </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section id="react-intro">
          <h1>React Einf√ºhrung</h1>
        </section>

        <section>
          <h2>Agenda</h2>
          <ul style="font-size: 85%;">
            <li>
              <a href="#/t1">Teil I: React Einf√ºhrung</a>
            </li>
            <li>
              <a href="#/t2">Teil II: React-Komponenten (Details)</a>
            </li>
            <li>
              <a href="#/t3">Teil III: React-Komponenten: Hierarchien und Anwendungen</a>
            </li>
            <li class="fragment" style="margin-top: 20px;">
              <a href="#/t-server">Teil IV: Daten lesen und schreiben vom Server (REST APIs)</a>
            </li>

            <li class="fragment" style="margin-top: 20px;">
              <a href="#/t-graphql">Teil V: GraphQL mit dem Apollo Client</a>
            </li>

            <li class="fragment" style="margin-top: 20px;">
              <a href="#/t-test">Teil VI: Testen von React Anwendungen (√úberblick)</a>
            </li>
          </ul>
        </section>

        <section id="t1">
          <h1>Teil 1</h1>
          <h2>React Einf√ºhrung</h2>
        </section>

        <section>
          <h3>Beispiel-Anwendung</h3>
          <a target="_blank" href="http://localhost:3000">
            <img src="blog-example/blog-example.png" style="height: 650px;" />
          </a>
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p>
            <em>Zentrales Konzept in React: <b>Komponenten</b></em>
          </p>
          <img style="height: 800px;" class="fragment" src="slides/images/soc.png" />
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p style="font-size: smaller;">Unser Beispiel in Komponenten</p>
          <img src="blog-example/blog-example.png" style="height: 650px;" />
        </section>

        <section>
          <h3>React Komponenten</h3>
          <ul>
            <li class="fragment">bestehen aus <b>Logik und UI</b> (keine separaten Templates)</li>
            <li class="fragment">werden <b>deklarativ</b> beschrieben</li>
            <li class="fragment">
              werden immer <b>komplett gerendert</b> (kein 2-Wege-Data-Binding)
            </li>
            <li class="fragment">werden zu <b>ganzen Anwendungen</b> aggregiert</li>
            <li class="fragment">
              werden als <b>Funktionen (mit "Hooks" API)</b> implementiert
              <ul class="fragment" style="font-size: smaller;">
                <li>(Vor 2019 wurden Komponenten als <b>ES6 Klassen</b> implementiert)</li>
              </ul>
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Dokumentation</h3>

          <ul class="xx-list">
            <li class="fragment">
              Aktuelle Doku (Klassen API-basiert):
              <a href="https://reactjs.org/">https://reactjs.org/</a>
            </li>
            <li class="fragment">
              Neue Doku (noch Beta, aber Hooks API-basiert):
              <a href="https://beta.reactjs.org/">https://beta.reactjs.org/</a>
            </li>
          </ul>
          <p class="fragment">
            Wichtig: "nur" die neu Doku-Seite ist beta, die Hooks API ist stabil
          </p>
        </section>

        <section>
          <h2>Unsere erste React-Komponente</h2>
          <h3>Sehen wir uns die wichtigsten Konzepte einer React-Komponente im Code an</h3>

          <ul>
            <li>Schritt-f√ºr-Schritt (<code>blog-example/workspace</code>)</li>
          </ul>
        </section>

        <section id="interaktiv-hellomessage">
          <h3>Hello World React</h3>
          <code>PostEditor.js</code>
          <pre><code data-trim contenteditable>
  import React from "react";
  
  export default function PostEditor() {
    const [title, setTitle] = React.useState("");
  
    return (
      &lt;div>
        &lt;label>
          Title
          &lt;input onChange={event => setTitle(event.target.value)} value={title} />
        &lt;/label>
      &lt;/div>
    );
  }
            </code></pre>
        </section>

        <section>
          <h3>Einbinden der Anwendung in die HTML-Seite</h3>
          <div class="fragment">
            <p>
              <code>index.html</code>
            </p>
            <pre><code data-trim contenteditable>
  &lt;html>
    &lt;-- ... -->
    &lt;body>
      <div id="root"></div>
    &lt;/body>
  &lt;/html>
  </code></pre>
          </div>
          <div class="fragment">
            <p>
              <code>index.js</code>
            </p>
            <pre><code data-trim contenteditable class="javascript">
  import React from 'react';
  import ReactDOM from 'react-dom';
  
  import PostEditor from './PostEditor';
  
  ReactDOM.render(&lt;PostEditor />, 
    document.getElementById('root')
  );
  </code></pre>
          </div>
        </section>

        <section>
          <h3>Der Trainingsworkspace</h3>
          <ul class="x-list">
            <li style="margin-bottom: 40px;">
              <code>2022_01_24_js_react_graphql.html</code>: Die Slides
            </li>
            <li class="fragment" style="margin-bottom: 40px;">
              Der Code ist im <code><b>blog-example</b></code> Verzeichnis
            </li>

            <li class="fragment" style="margin-bottom: 40px;">
              <code>blog-example/<b>workspace</b></code
              >: Verzeichnis f√ºr Eure √úbungen <br />üëâ&nbsp;<b>Empfehlung</b>: nur diesen Ordner in
              IDE/Editor √∂ffnen
            </li>
            <li class="fragment">
              <code>blog-example/<b>steps</b></code
              >: Fertiger Source-Code nach jeder √úbung
            </li>
          </ul>
        </section>
        <section>
          <h2>√úbung #1: Hello-World</h2>
          <h3>
            <em>Mit Tools, Workspace und React vertraut machen</em>
          </h3>
        </section>
        <section>
          <h3>Schritt #1: Tool Chain starten</h3>
          <p>Gemeinsam, Schritt-f√ºr-Schritt:</p>
          <ol class="fragment x-list" style="font-size: 85%;">
            <li>
              <code>cd blog-example/workspace</code>
            </li>

            <li class="fragment">
              <code>npm start</code>
            </li>

            <li class="fragment">
              Der Browser sollte automatisch
              <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>
              √∂ffnen
            </li>

            <li class="fragment">Wenn Du "Hello, World" im Browser siehst, ist alles gut!</li>
            <li class="fragment">Dann bitte in Zoom "Hand heben" üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>
        <section>
          <h3>Schritt #2: Deine erste React-Komponente</h3>
          <p>
            <em
              >Ein kleiner Schritt f√ºr die PostEditor-Komponente, ein gro√üer Schritt f√ºr dich auf
              deinem Weg, React zu lernen!</em
            >
          </p>
          <ul>
            <li class="fragment">Ersetze den "statischen" Code in <code>PostEditor.js</code></li>
            <li class="fragment">Die Komponente soll <b>PostEditor</b> hei√üen</li>
            <li class="fragment">
              Sie sollte einen Zustand/State (<code>title</code>) und ein Eingabefeld daf√ºr haben
            </li>
            <li class="fragment">
              Als Hilfe kannst Du den Code aus den
              <a href="#interaktiv-hellomessage">vorherigen Slides</a> ansehen.
            </li>
            <li class="fragment">
              Eine m√∂gliche L√∂sung findest Du auch in <code>blog-example/steps/1-hello-world</code>
            </li>

            <!-- <li class="fragment">
              <em>Optional: mache ein paar Experimente mit der Komponente, zum Beispiel:</em>
              <ul>
                <li>
                  Kannst Du unter dem Eingabefeld den gerade eingegebenen Text ausgeben lassen, so
                  dass dieser immer dem aktuellen Inhalt des Eingabefeldes entspricht?
                </li>
                <li>
                  Wenn das Textfeld leer ist, soll ein Hinweis f√ºr den Benutzer ausgegeben werden
                  ("Bitte Titel eingeben")
                </li>
              </ul>
            </li> -->
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ul>
        </section>

        <section data-state="js-exkurs">
          <h3>Tooling: create-react-app</h3>
          <a
            href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#table-of-contents"
            target="_blank"
            >User Guide</a
          >
          <p>Bootstrap von neuen React Anwendung</p>
          <p>Fertige Konfiguration von React u.a. mit Webpack, Hot Reload, Babel und Linter</p>
          <p>Beispiel: npx create-react-app PROJEKTNAME</p>
        </section>
        <section data-state="js-exkurs">
          <h2>Webpack Development Server</h2>
          <p>Zum Ausf√ºhren der Anwendung w√§hrend der Entwicklung wird ein Webserver ben√∂tigt</p>
          <p class="fragment">
            create-react-app hat den
            <a href="https://webpack.js.org/configuration/dev-server/">Webpack DevServer</a>
            integriert
          </p>
          <ul>
            <li class="fragment">
              ...f√ºhrt Webpack auf Basis der Projekt Webpack Konfiguration automatisch bei jedem
              Speichern aus
            </li>
            <li class="fragment">...erzeugt Ausgabe in Memory (Performance)</li>
            <li class="fragment">
              ...Hot Reloading: Automatische Aktualisierung nach Code √Ñnderung
            </li>
          </ul>
        </section>

        <section data-state="js-exkurs">
          <h3>Tooling: Linter</h3>
          <p><em>Statische Codeanalyse</em></p>
          <ul>
            <li class="fragment">Findet typische JavaScript Programmierfehler</li>
            <li class="fragment">
              Achtet auf Einhaltung von Konventionen (z.B. Semikolon ja/nein)
            </li>
            <li class="fragment">Kann in den CI-Build und IDE eingebunden werden</li>
          </ul>

          <div class="fragment">
            <p><a href="https://eslint.org/">ESLint</a></p>

            <img style="height: 400px;" src="slides/images/eslint.png" />
          </div>
        </section>

        <section id="t2">
          <h1>Teil II</h1>
          <h2>React Komponenten</h2>
        </section>

        <section>
          <h3>React: JSX</h3>
          <ul>
            <li style="font-size: 80%;" class="fragment">
              Wird wie HTML hingeschrieben, inkl Attribute:
              <pre><code class="xml" contenteditable data-trim>
&lt;div>&lt;input type="text"/>&lt;/div>
                    </code></pre>
            </li>
            <li style="font-size: 80%;" class="fragment">
              Achtung! <code>class</code>-Attribut hei√üt <code>className</code>:
              <pre><code class="xml" contenteditable data-trim>
                        &lt;h1 className="title">...&lt;/h1>
                    </code></pre>
            </li>
            <li style="font-size: 80%;" class="fragment">
              Attribute, die keine Strings sind, m√ºssen in {} eingeschlossen werden:
              <pre><code class="xml" contenteditable data-trim>
&lt;Counter label="Count" count={7} showValues={true} />
                    </code></pre>
            </li>

            <li style="font-size: 80%;" class="fragment">
              CSS-Eigenschaften werden als Objekt √ºbergeben in Camel-Case-Notation:
              <pre><code class="xml" contenteditable data-trim>
const styles = { marginLeft: '10px', border: '1px solid red' };
&lt;h1 style={styles}>...&lt;/h1>
                    </code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3>React: JSX #2</h3>
          <ul>
            <li style="font-size: 80%;" class="fragment">
              Fragmente (rendern selber kein Element in den DOM, nur ihre Kind-Elemente):
              <pre><code class="xml" contenteditable data-trim>
function Choice() { 
  return &lt;&gt;
    &lt;li>Yes&lt;/li> 
    &lt;li>No&lt;/li>
  &lt;/>              
}  
                    </code></pre>
            </li>
            <li style="font-size: 80%;" class="fragment">
              null oder boolean (false oder true), um nichts zu rendern:
              <pre><code class="xml" contenteditable data-trim>
function ErrorMessage() {
  const hasError = someCondition(); // returns true or false

  return <div>
    {hasError && "Error!"}
    {hasError || "Everything fine"}
  </div>
}              
                    </code></pre>
            </li>

            <li style="font-size: 80%;" class="fragment">
              Kommentare
              <pre><code class="xml" contenteditable data-trim>
  function MyComponent() {
    return <div>
      { /* hier ist javascript, deswegen block-kommentare erlaubt */ }
    </div>;
  }              
                      </code></pre>
            </li>
          </ul>
        </section>

        <section>
          <h3>Zustand einer Komponente und der useState-Hook (Zusammenfassung)</h3>
          <ul class="fragement">
            <li>Beispiel: Inhalt eines Eingabefelds, Daten vom Server, Menu offen oder zu</li>
            <li class="fragment"><b>Werte</b> √ºblicherweise immutable</li>
            <li class="fragment">Arbeiten mit Zustand √ºber <b>useState</b>-Hook</li>
            <li class="fragment">
              useState liefert Array mit zwei Werten zur√ºck: aktuellen Zustand, und setter-Funktion
              um Zustand zu ver√§ndern
            </li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
function HelloWorld() {
  const [title, setTitle] = React.useState("");

  return &lt;input onChange={e => setTitle(e.target.value) value={title} />;
}
                  </code></pre>
          <ul>
            <li class="fragment">
              Aufruf des Setters <b>l√∂st erneutes rendern der <i>gesamten</i> Komponente aus</b>
            </li>
            <li class="fragment">
              Es k√∂nnen mehrere States erzeugt werden, durch Verwendung mehrerer useState-Aufrufe
            </li>
            <li class="fragment">
              <b>Zustand</b> ist eines der <b>zentralen</b> Konzepte von React
            </li>
          </ul>
        </section>

        <!-- <section>
          <h2>√úbung 1b: Styling f√ºr den Post-Editor</h2>
          <em><b>F√ºge dem Post-Editor etwas CSS hinzu</b></em>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="x-list">
            <li class="fragment">
              Das Root-Element deines Formulars soll die CSS Klasse <code>Container</code> bekommen.
              Dadurch sollte sich ihr Aussehen (leicht) ver√§ndern
            </li>
            <li class="fragment">
              Wenn <b>kein Text</b> im Eingabe-Feld steht, soll eine Fehlermeldung ausgegeben werden
              ("Please fill in the title" o.√§.)
              <br />
              Der Fehlertext sollte in fettem Rot ausgegeben werden (CSS-Eigenschaften:
              <code>color: red</code> und <code>font-weight: bold</code>)
            </li>
            <li class="fragment">
              Wenn <b>mindestens ein Zeichen</b> im Eingabe-Feld steht, soll eine "positive" Message
              erscheinen ("You have filled the title correctly").
              <br />
              Diese positive Nachricht sollte in gr√ºn erscheinen (CSS-Eigenschaft:
              <code>color: green</code>)
            </li>
            <li class="fragment">M√∂gliche L√∂sung in <code>steps/1b-editor-css</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section> -->

        <section>
          <h3>React Hooks API</h3>
          <em
            >Mit der React Hooks API kann sich eine Komponente in Zustand und Lebenszyklus
            "einhaken"</em
          >
          <ul>
            <li class="fragment">
              Hooks sind "normale" Funktionen, m√ºssen aber mit <code>use</code> beginnen (useState,
              useEffect, ...)
            </li>
            <li class="fragment">
              Beispiel: Importieren und verwenden von Hooks

              <pre><code class="javascript" contenteditable data-trim>
                import React from "react";

                function HelloWorld() {
                  const [title, setTitle] = React.useState("");
                  // ...
                }
                                  </code></pre>
              <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                      import React, { useState } from "react";
                      
                                      function HelloWorld() {
                                        const [title, setTitle] = useState("");
                                        // ...
                                      }
                                                        </code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3>React Hooks API</h3>
          <em>Es gibt einige Regeln zu beachten, bei der Verwendung von Hooks üëÜ</em>
          <p style="font-size: 75%; margin-top: 0;">
            <a href="https://reactjs.org/docs/hooks-rules.html"
              >(https://reactjs.org/docs/hooks-rules.html)</a
            >
          </p>
          <div class="fragment">
            <p>Einschr√§nkungen:</p>
            <ul>
              <li class="fragment">
                Hooks k√∂nnen nur in Funktionskomponenten (und anderen Hooks) aufgerufen werden
              </li>
              <li class="fragment">
                Hooks m√ºssen immer in derselben Reihenfolge und auf Top-Level-Ebene verwendet werden
                <ul>
                  <li>Verboten z.B. in Schleifen, if-Abfragen oder in anderen Funktionen</li>
                </ul>
              </li>
              <li class="fragment">
                Es gibt ein
                <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks">ESLint Plug-in</a>
                zur korrekten Verwendung der Hooks
              </li>
            </ul>
          </div>
          <p class="fragment">
            <em
              >Der Hooks-Mechanismus basiert intern darauf, dass React sich die Reihenfolge der
              <code>useXyz</code>-Aufrufe merkt!</em
            >
          </p>
        </section>
        <section>
          <h3>React Hooks</h3>

          <em>Beispiele f√ºr korrekte und unerlaubte Verwendung</em>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
              // ERLAUBT:
              function HelloWorld() {
                const [greeting, setGreeting] = React.useState("");
                const [name, setName] = React.useState("");
                // ...
              }
                                </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                    // ERLAUBT:
                                    function HelloWorld() {
                                      const [greeting, setGreeting] = React.useState("");
                                      const uppercaseGreeting = greeting.toUpperCase(); 
                                      const [name, setName] = React.useState("");
                                      // ...
                                    }
                                                      </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                    // VERBOTEN:
                                    function HelloWorld() {
                                      const [title, setTitle] = React.useState("");

                                      function onSaveClick() {
                                        const [loading, setIsLoading] = React.useState(true);
                                        // ...
                                      }

                                      // ...
                                    }
                                                      </code></pre>
        </section>

        <section>
          <h2>√úbung: Post-Editor f√ºr unsere Anwendung</h2>
          <em><b>Erweitere deine Komponente um neue Features</b></em>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="x-list">
            <li>
              Zus√§tzlich zum "title", sollte es einen weiteren Zustand und eine Textarea geben:
              <code>body</code>. Ein <code>textarea</code>-Element hat dieselbe API wie ein
              <code>input</code>-Feld, du kannst also auch hier mit <code>onChange</code> und
              <code>value</code> arbeiten.
            </li>
            <!-- <li class="fragment">
              F√ºge unter beiden Feldern eine Fehler-Meldung hinzu, wenn das jeweilige Feld leer ist
              (z.B. "Please fill in Xyz")
            </li> -->
            <li class="fragment">
              F√ºge einen "Clear"-Button hinzu, der beide Eingabefeld leert. Das Property auf dem
              Button ist <code>onClick</code>.
            </li>
            <li class="fragment">M√∂gliche L√∂sung: <code>steps/2-editor</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section id="t3">
          <h1>Teil III</h1>
          <h2>React: Hierarchien und Anwendungen</h2>
        </section>

        <!-- - - - - - - - - - - - - - - - PROPS HIER ERST - - - - - - - - - - - - - - -  -->
        <section>
          <h3>React: Properties</h3>
          <p>Live: Properties f√ºr initialen Werte des Post-Editors</p>
          <ul>
            <li class="fragment">
              Mit <b>Properties</b> k√∂nnen einer Komponente von <b>au√üen</b> Werte und Eigenschaften
              √ºbergeben werden

              <pre class="fragment"><code class="javascript" contenteditable data-trim>
            function PostEditor() {
                // type, onChange und value sind Properties!

                return (
                  &lt;input type="text" onChange={() => setTitle("...")} value={title}&lt;/h1>
                );
              }
            }
            </code></pre>
            </li>
            <li class="fragment">
              <b>Properties</b> k√∂nnen innerhalb der Komponente nicht ver√§ndert werden
            </li>
            <li class="fragment">
              Zum Vergleich: <b>Zustand (State)</b> ist eine <b>innere</b> Eigenschaft der
              Komponente (die ver√§ndert werden kann)
            </li>
          </ul>
        </section>

        <section>
          <h3>Properties ("Props") einer Komponente</h3>
          <ul>
            <li>Komponenten k√∂nnen beliebig eigene Properties definieren</li>
            <li class="fragment">
              Bei der Angabe der Properties bei der Verwendung einer Komponente werden die
              Properties wie von HTML gewohnt in der Notiation
              <code>name=value</code> hingeschrieben
            </li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
&lt;PostEditor initialTitle="Hello" initialBody="World" />
 </code></pre>

          <ul>
            <li class="fragment">
              ...alle angegebenen Properties werden "gesammelt" und in <b>einem</b> Objekt im 1.
              Methoden-Parameter an Komponente √ºbergeben
            </li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            function PostEditor(props) {
                // props: { initialTitle: "Hello", initialBody: "World" }
                const [title, setTitle] = React.useState(props.title);
                const [body, setBody] = React.useState(props.body);

                return ...;
              }
            }
            </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
// Mit Destructuring
function PostEditor({initialTitle, initialBody}) {
   const [title, setTitle] = React.useState(title);
   const [body, setBody] = React.useState(body);

   return ...;
  }
}
                </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Properties: Default-Werte</h3>
          <p>Properties sind grunds√§tzlich <b>optional</b>.</p>

          <p class="fragment">
            Mit dem Object Destructuring-Operator k√∂nnen <b>Default-Werte</b> angegeben werden, f√ºr
            Eigenschaften, die aus einem Objekt gelesen werden, aber dort nicht angegeben (bzw.
            undefined) sind:
          </p>

          <pre class="fragment"><code class="javascript">
            function PostEditor({initialTitle = "New Blog Post", initialBody}) { 
              const [title, setTitle] = React.useState(initialTitle);
            }

            // title wird auf "New Blog Post" gesetzt
            &lt;PostEditor initialBody="Lorem Ipsum" />
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <!-- <section>
          <h3>Properties: propTypes</h3>
          <p>
            Mit
            <a href="https://reactjs.org/docs/typechecking-with-proptypes.html">propTypes</a> k√∂nnen
            Typen f√ºr die Properties beschrieben werden.
          </p>

          <pre class="fragment"><code class="javascript">
            import PropTypes from 'prop-types';

            PostEditor.propTypes = {
              initialTitle: PropTypes.string,
              initialBody: PropTypes.string.isRequired
            }
          </code></pre>

          <p class="fragment">
            Die √úberpr√ºfung findet <b>erst zur Laufzeit</b> statt und erzeugt "nur" eine Warnung auf
            der Konsole.
          </p>

          <div class="fragment">
            <p>
              Empfehlung: lieber echten TypeChecker, z.B.
              <a href="https://create-react-app.dev/docs/adding-typescript/">TypeScript</a>,
              verwenden üôèüôèüôè
            </p>
            <ul class="fragment">
              <li>√ºberpr√ºft bereits zur Entwicklungszeit in der IDE bzw. im CI-Build</li>
              <li>findet noch weitere Probleme, nicht nur Properties-bezogene Fehler</li>
              <li>hilft auch bei Code-Completion etc.</li>
            </ul>
          </div>
        </section> -->

        <!-- ============================================================================= -->
        <!-- <section>
          <h3>Formular-Bibliotheken</h3>

          <p>Vollst√§ndige L√∂sungen f√ºr Formulare inklusive Validierung:</p>
          <ul>
            <li><a href="https://react-hook-form.com/">React Hook Form</a></li>
            <li><a href="https://formik.org/">Formik</a></li>
          </ul>
        </section> -->
        <section>
          <h3>Virtual DOM</h3>
          <p>"Rendern" hat leider doppelte Bedeutung!</p>
          <img src="slides/images/vdom.png" style="height: 650px;" />
        </section>
        <section>
          <h3>Virtual DOM</h3>
          <p>Beispiel: <code>blog-example/steps/2b-rendering</code></p>
        </section>
        <section>
          <h2>√úbung: Properties f√ºr Komponenten</h2>
          <em>Eine Komponente f√ºr Meldungen</em>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="xx-list">
            <li>
              Schreibe eine neue Komponente (der einfachheithalber direkt in PostEditor.js), die
              eine Meldung darstellt: <b>Message</b>
            </li>
            <li class="fragment">
              Die <b>Message</b>-Komponente soll zwei Properties aufnehmen:
              <ul>
                <li><code>msg</code>: ein String mit einer Nachricht</li>
                <li>
                  <code>type</code>: kann entweder der String <code>"error"</code> oder der String
                  <code>"info"</code> sein
                </li>
              </ul>
            </li>
            <li class="fragment">
              Beispielhafte Verwendung:

              <pre><code class="javascript">
                &lt;Message type="info" msg="Alles prima!" />
                &lt;Message type="error" msg="Leider fehlerhaft" /> 
              </code></pre>
            </li>
            <li class="fragment">
              Die Komponente soll die √ºbergebene Nachricht aus <code>msg</code> anzeigen: Wenn type
              auf <code>error</code> gestellt ist (oder kein type gesetzt ist), soll die
              <code>msg</code> als Fehler in roter Schrift ausgegeben werden (CSS-Eigenschaft
              <code>style={{color: "red"}}</code>)
            </li>
            <li class="fragment">
              Verwende die Komponente im PostEditor: um eine Fehler-Meldung unter dem Formular
              auszugeben (z.B. "Bitte f√ºllen Sie das Formular aus") wenn <code>title</code> oder
              <code>body</code> leer sind bzw. eine Info-Meldung, wenn die beiden Felder gef√ºllt
              sind ("Sie haben alle erforderlichen Eingaben get√§tigt!")
            </li>

            <li class="fragment">M√∂gliche L√∂sung: <code>steps/2a-editor-mit-props</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section data-state="js-exkurs">
          <h2>React Devtools</h2>
          <em>React Developer Tools f√ºr Chrome und Firefox</em>
          <p>Untersuchen der React Anwendung zur Laufzeit</p>
          <ul>
            <li>
              <a
                href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en"
                target="_blank"
                >Chrome</a
              >
            </li>
            <li>
              <a
                href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/"
                target="_blank"
                >Firefox</a
              >
            </li>
          </ul>

          <p><img src="slides/images/screenshot-react-dev-tools.png" /></p>
        </section>
        <!-- <section>
          <h3>Render Zyklus</h3>
          <img src="slides/images/render-cycle.png" height="550px" />
        </section> -->

        <section>
          <h3>Eine Liste f√ºr Blog-Posts und ein Editor...</h3>
          <code>blog-example/steps/3-hierarchy</code>
        </section>

        <section>
          <h3>Listen</h3>
          <p>JSX hat keine eigenen Konstrukte f√ºr Listen</p>
          <p class="fragment">
            √úblicherweise verwendet man
            <code>Array.map()</code> um eine Liste von Objekten in eine Liste von JSX Elementen zu
            √ºberf√ºhren
          </p>
          <p class="fragment">
            Jedes JSX Element in der Liste ben√∂tigt einen <em>List-weit eindeutigen <b>key</b></em>
          </p>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
const posts = [
  { id: 0, title: 'Hello World', body: 'Lorem ipsum' },
  { id: 1, title: 'React in a Nutshell', body: 'Lets get started with React' }
];

function PostList(props) {
  return props.posts.map(post => (
    &lt;article key={post.id}>
        &lt;h1>{post.title}&lt;/h1>
        &lt;p>{post.body}&lt;/p>
    &lt;/article>
  ))
}
</code></pre>
        </section>

        <section>
          <h2>Komponenten-Hierarchien</h2>
        </section>

        <section>
          <h3>Wie kommuniziert unsere Anwendung?</h3>
          <p>Wir haben nun <b>zwei</b> Views: Blog-List und Post-Editor</p>
          <p>Welche ist sichtbar?</p>
          <p>Wie flie√üen die Daten zwischen den beiden Komponenten?</p>
        </section>

        <section>
          <h3>üëâ Wir bauen eine <b>Anwendung</b>: mit Blog-List und Post-Editor</h3>
        </section>

        <section>
          <h3>Datenfluss in React-Anwendungen</h3>
          <ol>
            <li>
              In React Anwendungen werden Komponenten in Hierarchien zu Anwendungen aggregiert. Eine
              "Anwendung" ist nichts weiter als eine Sammlung von Komponenten
            </li>
            <li class="fragment">
              Innerhalb der Hierarchie wird immer nur <b>in eine Richtung</b> kommuniziert:
              <b>Eltern</b>-Komponenten geben <b>properties</b> an ihre <b>Kinder</b>
            </li>
            <li class="fragment">
              Mit den Properties k√∂nnen Daten (Blog Post, angemeldeter Benutzer, ...) von "oben"
              nach "unten" gereicht werden. Das kann √ºber mehr als eine Hierarchie-Ebene passieren.
              <p>
                (Eine Komponente kann die Properties oder einen Teil davon ihrerseits weiter nach
                "unten" reichen)
              </p>
            </li>
            <li class="fragment">
              Mit Properties k√∂nnen au√üerdem <b>callback-Funktionen</b> nach unten gereicht werden.
            </li>
            <li class="fragment">
              Eine Kind-Komponente kann die √ºbergebene Funktion aufrufen und ein "Event" (mit oder
              ohne Daten) an ihre Eltern-Komponente schicken. <br />Dieses Verfahren haben wir
              bereits beim onChange-Property am input-Feld gesehen!
            </li>
          </ol>
        </section>

        <section>
          <h3>Smart und Dumb-Komponenten #1</h3>

          <p class="fragment">
            Zur Erinnerung: in React bauen wir Komponenten. Komponenten bestehen aus Logik, Zustand
            und UI (HTML-Elemente und Styling)
          </p>
          <p class="fragment">
            Ein bekanntes Muster ist, die Komponenten in zwei Arten aufzuteilen:
            <b>Smart (oder Controller)</b>- und <b>Dumb oder (Presentation-)</b>-Komponenten
          </p>
          <p class="fragment">
            Technisch sind die Komponenten identisch, also "normale" React-Komponenten
          </p>
          <p class="fragment">Nur ihre <b>Aufgabe</b> ist anders definiert...</p>
        </section>

        <section>
          <h3>Smart und Dumb-Komponenten #2</h3>
          <p class="fragment">Smart-Komponenten enthalten Logik und Zustand</p>
          <p class="fragment">Dumb-Komponenten sind nur zur Darstellung der Daten</p>
          <p class="fragment">
            Smart-Komponenten reichen Zustand in die Dumb-Komponenten. Diese zeigen den Zustand an
          </p>
          <p class="fragment">
            Smart-Komponenten reichen Callback-Funktion als Event-Handler an die Dumb-Komponenten
          </p>
          <p class="fragment">
            Wenn in Dumb-Komponenten ein Ereignis eintritt (z.B. Button-Click oder Texteingabe),
            wird eine Callback-Funktion aufgerufen
          </p>
          <p class="fragment">
            Die Callback-Funktion wird dann in der Smart-Komponente aufgerufen und die Verarbeitung
            ausgef√ºhrt
          </p>
          <p class="fragment">
            Die Smart-Komponente setzt ihren Zustand neu, und rendert sich und ihre Kinder (die
            Dumb-Komponenten) neu <br /><b
              >Der "Gesamt-Zustand" der Anwendung bleibt somit immer konsistent!</b
            >
          </p>
        </section>
        <section>
          <img src="slides/images/blogpost-app-hierarchy.png" />
        </section>

        <section>
          <h3>Beispiel</h3>

          <p>
            Unsere Smart-Komponente h√§lt eine Liste von Blog-Posts und steuert, welche Ansicht aktiv
            ist
          </p>
          <p>Die Smart-Komponente gibt die Liste der Blog-Posts an die BlogList zum Anzeigen</p>
          <p>
            Die Smart-Komponente gibt jeweils eine Callback-Funktion an die BlogList und die
            PostEditor
          </p>

          <pre><code>
function App() {
  const [posts, setPosts] = React.useState([]);
  const [view, setView] = React.useState("list");

  function addPost(newPost) {
    // Neuen Post hinzuf√ºgen
    setPosts([...posts, newPost]);

    // Wieder Liste anzeigen
    setView("list");
  }

  if (view === "list") {
    return &lt;BlogList posts={posts} onAdd={() => setView("PostEditor")} />
  }

  return &lt;PostEditor onAdd={addPost} />

}            
</code></pre>
        </section>

        <section>
          <h3>Beispiel #2</h3>

          <p>
            Die BlogList zeigt die √ºbergebene Liste nur an und informiert die App, wenn auf den
            "Add"-Button gedr√ºckt wurde
          </p>
          <p>Die App kann dann die andere Komponente (PostEditor) anzeigen</p>

          <pre><code>
  function BlogList(props) {

    return &lt;div>
      // ... Liste anzeigen ...
      &lt;button onClick={props.onAdd}>Add Blog Post&lt;/button>
    &lt;/div>;
  }            
  </code></pre>
        </section>

        <section>
          <h3>Beispiel #3</h3>

          <p>
            Die PostEditor erfasst einen neuen BlogPost und √ºbergibt diesen der Callback-Funktion,
            so dass die App-Komponente ihn in die Liste der BlogPosts (State) einf√ºgen kann
          </p>
          <pre><code>
  function PostEditor(props) {
    const [title, setTitle] = React.useState("");
    const [body, setBody] = React.useState("");

    function addPost() {
      const newPost = {
        title, body
      }

      // App-Komponente informieren
      props.onAdd(newPost);
    }

    return &lt;div>
      // ... Formular rendern ...
      &lt;button onClick={addPost}>Save Post&lt;/button>
    &lt;/div>;
  }            
  </code></pre>
        </section>

        <section>
          <h2>√úbung: Baue eine komplette "Anwendung"</h2>
          <p>
            <em>
              Integriere deine bestehende <code>PostEditor</code>-Komponente und die neue
              <code>PostList</code> Komponente √ºber die <code>App</code>-Komponente</em
            >
          </p>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="xx-list">
            <li class="fragment">
              kopiere das Material aus <code>blog-example/material/3-hierarchy/src</code> in deinen
              source Ordner
              <span style="font-size: 85%;"
                >(Du kannst deinen eigenen <code>PostEditor</code> verwenden oder den aus
                material/3-hierarchy)</span
              >
            </li>

            <li class="fragment">
              Erweitere die <code>App</code> Komponente, so dass sie den
              <code>PostEditor</code> anzeigt, wenn der User auf den <code>Add</code> Button klickt.
              <p>- In <code>App.js</code> stehen TODOs mit weiteren Infos</p>
            </li>
            <li class="fragment">
              Im<code>PostEditor</code> ben√∂tigst Du einen Save Button, der die √ºbergebene
              Callback-Funktion aufruft, die von der <code>App</code> als Property
              (<code>onSave</code>) √ºbergeben wird. <br />Siehe TODO in
              <code>blog-example/material/3-hierarchy/src/PostEditor.js</code>
            </li>
            <!-- <li class="fragment" style="font-size: 75%;">
              <b>Optional:</b> F√ºge einen <b>neuen</b> Button "Cancel" im PostEditor hinzu, der die
              PostList √∂ffnet, ohne das eingebene Post zu speichern.
            </li> -->
            <li class="fragment">M√∂gliche L√∂sung: <code>steps/3-hierarchy</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte in Zoom "Hand heben" üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <!-- ANFANG KLASSEN -->
        <section data-state="js-exkurs">
          <h2>React: Komponenten als ES6 Klassen</h2>
          <ul>
            <li class="fragment">
              Beispiel mit Fehlerbehandlung: <code>?with-error-handler</code>:
              blog-example/steps/3a-hierarchy-errorhandler
            </li>
            <li class="fragment">
              Beispiel ohne Fehlerbehandlung (development):
              blog-example/steps/3a-hierarchy-errorhandler
            </li>
            <li class="fragment">
              Beispiel mit Fehlerbehandlung (prod):
              blog-example/steps/3a-hierarchy-errorhandler/build/
            </li>
          </ul>
        </section>

        <section data-state="js-exkurs">
          <h3>Error Boundaries</h3>
          <em
            >Wenn beim Rendern einer Komponente ein Fehler auftritt, fliegt die
            <b>gesamte Anwendung</b> aus dem DOM</em
          >
          <p class="fragment">Error Boundaries sind eine Art <b>catch-Block</b> f√ºr Komponenten</p>
          <ul>
            <li class="fragment">
              ...werden in der Komponentenhierarchie an beliebiger Stelle eingebunden, und "fangen"
              Fehler unterhalb auf
            </li>
            <li class="fragment">...im Fehlerfall k√∂nnen sie eine Fehlermeldung rendern</li>
            <li class="fragment">...ganz normale React-Komponenten</li>
            <li class="fragment">...m√ºssen ES6-Klassen-basierte Komponenten sein</li>
          </ul>
        </section>

        <section data-state="js-exkurs">
          <h3>Komponenten als Klassen</h3>

          <p>Statt <b>useState</b>: State als this.state und this.setState()</p>
          <p>Properties als this.props</p>

          <pre><code data-trim contenteditable>
      import React from "react";
      
      export default class PostEditor extends React.Component {
      
        constructor(props) {
          super(props);
      
          this.state = {
            title: props.initialTitle,
            body: props.initialBody
          };
        }
      
        render() {
          return (
            &lt;div>
              &lt;input 
                value={this.state.title} 
                onChange=
                  {e => this.setState({title: e.target.value})}
              />
              &lt;input 
                value={this.state.body} 
                onChange=
                  {e => this.setState({body: e.target.value})}
              />
            &lt;/div>
          );
        }
      }</code></pre>
        </section>

        <section data-state="js-exkurs">
          <h3>React: Rendering</h3>
          <span class="fragment">
            <p>
              <em>Jede React Komponenten-Klasse braucht eine <code>render</code>-Methode:</em>
            </p>

            <ul>
              <li>wird aufgerufen beim ersten Rendering und wenn sich der Zustand √§ndert</li>
              <li>analog zur Komponente als Funktion</li>
            </ul>
          </span>
        </section>

        <section data-state="js-exkurs">
          <h3>Properties einer Komponente</h3>
          <ul class="fragment">
            <li>Properties werden √ºber den Konstruktor in die Komponente hineingereicht</li>
            <li>
              Zugriff √ºber
              <code>this.props</code>
            </li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
              class Header extends React.Component {
                constructor(props) {
                  super(props);
                }
  
                render() {
                  return (
                    &lt;h1 style={{color: this.props.titleColor}}>{this.props.title}&lt;/h1>
                  );
                }
              }
              </code></pre>

          <ul class="fragment">
            <li>Zum Vergleich: Komponente als Funktion</li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                    function Header(props) {
                        return (
                          &lt;h1 style={{color: this.props.titleColor}}>{this.props.title}&lt;/h1>
                        )
                    }
                    </code></pre>
        </section>

        <section data-state="js-exkurs">
          <h3>Zustand einer Komponente</h3>
          <ul>
            <li class="fragment">
              <b>Initialisieren</b> im Konstruktor mit <code>this.state={}</code>
            </li>
            <li class="fragment">Zustand <b>lesen</b> √ºber <code>this.state</code></li>
            <li class="fragment">
              Zustand <b>setzen</b> √ºber
              <code>this.setState()</code>
              <ul class="fragment">
                <li><b>Achtung:</b> kein "reiner" Setter</li>
                <li class="fragment">F√ºhrt alten und neuen Zustand zusammen</li>
                <li class="fragment">Wird asynchron ausgef√ºhrt!</li>
                <li class="fragment">
                  <b>L√∂st erneutes rendern der <i>gesamten</i> Komponente aus</b>
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section data-state="js-exkurs">
          <h3>Beispiel: State in Komponente als Klasse</h3>

          <pre><code data-trim contenteditable>
      import React from "react";
      
      export default class PostEditor extends React.Component {
      
        constructor(props) {
          super(props);
      
          this.state = {
            title: props.initialTitle,
            body: props.initialBody
          };
        }
      
        render() {
          return (
            &lt;div>
              &lt;input 
                value={this.state.title} 
                onChange=
                  {e => this.setState({title: e.target.value})}
              />
              &lt;input 
                value={this.state.body} 
                onChange=
                  {e => this.setState({body: e.target.value})}
              />
            &lt;/div>
          );
        }
      }</code></pre>
        </section>

        <section data-state="js-exkurs">
          <h3>Beispiel: Error Boundary</h3>
          <p class="fragment">
            <b>getDerivedStateFromError</b> und <b>componentDidCatch</b> werden von React im
            Fehlerfall aufgerufen
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
              class ErrorHandler extends React.Component {
                constructor(props) {
                  super(props);
                  this.state = { error: null };
                }
              
                static getDerivedStateFromError(error) {
                  return { error: error.toString() };
                }
              
                componentDidCatch(error, info) {
                  console.error("uups... we caught an error", error, info);
                }
              
                render() {
                  if (this.state.error) {
                    return (
                      &lt;div>
                        &lt;h1>An error occured!&lt;/h1>
                        &lt;pre>{this.state.error}&lt;/pre>
                        &lt;button onClick={() => this.setState({ error: null })}>Try again&lt;/button>
                      &lt;/div>
                    );
                  }
                  return this.props.children;
                }
              }
            </code></pre>
        </section>

        <section data-state="js-exkurs">
          <h3>Beispiel: Error Boundary</h3>
          <h4>Lifecycle</h4>

          <div style="display: flex;">
            <pre><code class="javascript" contenteditable data-trim>
                  class ErrorHandler extends React.Component {
                    constructor(props) {
                      super(props);
                      this.state = { error: null };
                    }
                  
                    static getDerivedStateFromError(error) {
                      return { error: error.toString() };
                    }
                  
                    componentDidCatch(error, info) {
                      console.error("uups... we caught an error", error, info);
                    }
                  
                    render() {
                      if (this.state.error) {
                        return (
                      &lt;div>
                         &lt;h1>An error occured!&lt;/h1>
                        &lt;pre>{this.state.error}&lt;/pre>
                        &lt;button onClick={() => this.setState({ error: null })}>Try again&lt;/button>
                      &lt;/div>
                        );
                      }
                      return this.props.children;
                    }
                  }
                </code></pre>

            <ol>
              <li class="fragment">
                Komponente wird instantiiert, Konstruktor aufgerufen, State vorbelegt (error = null)
              </li>
              <li class="fragment">
                Komponente wird gerendert. Da <code>this.state.error</code> nicht gesetzt ist,
                werden die Children gerendert
              </li>
              <li class="fragment">Fehler tritt in Unterkomponente beim Rendern auf</li>
              <li class="fragment">
                <code>componentDidCatch</code> wird aufgerufen (Fehler kann z.B. protokolliert
                werden)
              </li>
              <li class="fragment">
                <code>getDerivedStateFromError</code> wird aufgerufen und liefert einen neuen
                Teil-State zur√ºck. <br />(Andere Teile des States bleiben unver√§ndert)
              </li>
              <li class="fragment">
                Komponente wird erneut gerendert. Da <code>this.state.error</code> jetzt gesetzt
                ist, wird die Fehlermeldung angezeigt, inklusive des Buttons
              </li>
              <li class="fragment">
                Nach dem Klick auf den Button, wird <code>this.state.error</code> wieder auf null
                gesetzt
              </li>
              <li class="fragment">
                Komponente wird neu gerendert (durch <code>setState</code>). Da
                <code>this.state.error</code> wieder null ist, werden die Children erneut gerendert
              </li>
            </ol>
          </div>
        </section>

        <section data-state="js-exkurs">
          <h3>Beispiel: Error Boundary</h3>
          <p>Verwendung</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                import React from "react";
                import ReactDOM from "react-dom";
                
                import ErrorHandler from "./ErrorHandler";
                import App from "./App";
                
                ReactDOM.render(
                  &lt;ErrorHandler>
                    &lt;App />
                  &lt;/ErrorHandler>,
                  document.getElementyById("mount")
                );
              </code></pre>

          <p class="fragment">
            Hier Error Boundary um die gesamte Anwendung, kann aber auch innerhalb der Anwendung an
            beliebiger Stelle in der Komponentenhierarchie eingef√ºgt werden
          </p>
        </section>
        <!-- Ende ES6 Klassen -->

        <section id="t-server">
          <h1>Teil IV</h1>
          <h2>Server Zugriffe</h2>
          <em>Lesen und Schreiben von Daten von einem Backend (REST/HTTP)</em>
          <p><code>blog-example/steps/4-remote</code></p>
        </section>

        <section>
          <h3>Themen</h3>
          <ol>
            <li>Wie machen wir das Laden und Speichern technisch?</li>
            <li>Wie funktioniert asynchrone Verarbeitung in React?</li>
          </ol>
        </section>

        <section>
          <h3>Server-Calls</h3>
          <ul class="x-list">
            <li>React macht keine Angabe, wie Server-Calls (technisch) gemacht werden</li>
            <li class="fragment">
              H√§ufig in React verwendet: <b>fetch</b> API
              <ul>
                <li>Browser-API zum Ausf√ºhren von HTTP Requests</li>
                <li>
                  <a href="http://caniuse.com/#search=fetch" target="_blank">hohe Verbreitung</a>
                </li>
                <li>
                  Spezifikation:
                  <a href="https://fetch.spec.whatwg.org/" target="_blank"
                    >https://fetch.spec.whatwg.org/</a
                  >
                </li>
                <li>
                  Polyfill:
                  <a href="https://github.com/github/fetch" target="_blank"
                    >https://github.com/github/fetch</a
                  >
                </li>
              </ul>
            </li>
          </ul>
          <ul class="fragment x-list">
            <li>
              Popul√§re Alternative zu fetch: <a href="https://github.com/axios/axios">Axios</a>
            </li>
            <li>
              Axios API, auf fetch-basierend:
              <a href="https://github.com/developit/redaxios">Redaxios</a>
            </li>
            <li>
              Ausgereifte Hook API zum Arbeiten mit Server Requests:
              <a href="https://github.com/tannerlinsley/react-query" target="_blank">
                React Query</a
              >
              oder <a href="https://swr.vercel.app/">SWR</a>
            </li>
            <li>
              Data Fetching f√ºr Redux Toolkit:
              <a href="https://redux-toolkit.js.org/rtk-query/overview" target="_blank"
                >RTK Query</a
              >
            </li>
            <li>
              und nat√ºrlich GraphQL, z.B.
              <a href="https://www.apollographql.com/docs/react/">Apollo</a> oder
              <a href="https://formidable.com/open-source/urql/">Urql</a>
            </li>
          </ul>
        </section>

        <section>
          <h3>Die fetch API</h3>
          <p>Lesen von Daten (mit HTTP GET)</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
// Beispiel mit JavaScript Promises:

fetch('http://localhost:7000/posts')
  .then(response => response.json())
  .then(json => /* ... */)
  .catch(ex => console.error('request failed', ex));
</code></pre>
        </section>

        <section data-state="es6-exkurs">
          <h3>Hintergrund: Promises</h3>

          <pre><code class="javascript" contenteditable>
// Eine ausgedachte Funktion, die ein Promise zur√ºckliefert, 
// das "irgendwann" den String "Klaus" zur√ºckgibt
const promise = getNameAsync();
  </code></pre>
          <pre
            class="fragment"
          ><code class="javascript" contenteditable>promise.then(name => console.log(name));
// Ausgabe "irgendwann": "Klaus"
  </code></pre>
        </section>

        <section data-state="es6-exkurs">
          <h3>Hintergrund: Promises</h3>
          <p>Promises k√∂nnen verkettet werden</p>
          <pre><code class="javascript" contenteditable>
// Annahme: 'getNameAsync' liefert "irgendwann" den String "Klaus" zur√ºck
const promise = getNameAsync()

  // Wird mit dem ersten Wert aufgerufen und gibt neuen Wert zur√ºck
  .then(name => getGreetingAsync(name)) 

  // wird mit dem zweiten Wert (aus vorherigem then) aufgerufen
  .then(greeting => console.log(greeting));

  // Ausgabe "irgendwann": 
  // "Hello, Klaus"

  </code></pre>
          <p class="fragment">
            Die <code>then</code>-Funktion gibt <b>immer</b> ein Promise zur√ºck
          </p>
        </section>

        <section data-state="es6-exkurs">
          <h3>Fehler unterbrechen die Promise-Kette</h3>
          <h4>Mit <code>catch()</code> kann man den Fehler fangen und darauf reagieren</h4>
        </section>

        <section data-state="es6-exkurs">
          <h3>Catch im Fehlerfall</h3>
          <pre><code class="javascript" contenteditable>
  const promise = new Promise( /* wie gesehen */ )
    .then(name => {throw new Error("Unexpected Error") })
    .then(greeting => console.log(greeting));
    .catch(error => console.error(`Greeting failed: ${error}`))
  
    // Output: Greeting failed: Unexpected error
    </code></pre>
        </section>
        <section>
          <h3>Beispiel: fetch</h3>
          <p>Lesen von Daten (mit HTTP GET)</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
// async/await API, identisch mit Beispiel zuvor
try {
  const response = await fetch('http://localhost:7000/posts')
  const json = await response.json();
  // ...
} (catch ex) {
  console.error('request failed', ex)
}
          </code></pre>
        </section>

        <section data-state="es6-exkurs">
          <h2>async / await</h2>
          <p>"Wrapper" um Promises</p>
          <p>Erlaubt es, asynchronen Code "linear" hinzuschreiben</p>
        </section>
        <section data-state="es6-exkurs">
          <h3>async / await</h3>
          <p><code>await</code> wartet bis ein Promise aufgel√∂st wird</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
    function greet(name) { return new Promise(...); }
    
    // await can only be used in 'async'-functions:
    async function sayWhat(name) {
      const greeting = await greet(name);
    
      // greeting is a string!
      console.log(greeting); // => Hello, ...
    }
                      </code></pre>
        </section>
        <section data-state="es6-exkurs">
          <h3>async / await</h3>
          <p><code>async</code> machen eine Funktion zu einer "async function"</p>
          <p class="fragment">
            Eine <code>async</code> Funktion gibt &nbsp; <b>immer</b> ein Promise zur√ºck
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  async function greet(name) {
    return `Hello, ${name}`;
  }
  
  const greeting = greet('Klaus');
  
  // greeting is a Promise!
  console.log(greeting instanceof Promise); // => true
  console.log(greeting) // => Promise {&lt;resolved>: "Hello, Klaus"}
                  </code></pre>
          <p class="fragment"><code>async</code> Funktion als Fat Arrow Funktionen:</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  const greet = async (name) => `Hello, ${name}`;                
    
  const greeting = greet('Klaus');
    
  // greeting is a promise!
  console.log(greeting instanceof Promise); // => true
  console.log(greeting) // => Promise {&lt;resolved>: "Hello, Klaus"}
                    </code></pre>
        </section>

        <section data-state="es6-exkurs">
          <h3>async / await</h3>
          <p>
            Anstatt <code>then</code> oder <code>catch</code>-Ketten kannst Du einfach mehrere
            <code>await</code> Statements verwenden und try/catch f√ºr die Fehlerbehandlung:
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  // Return promises
  async function loadUser(username) { . . . };
  async function loadProfileDate(userId) { . . .};
  
  async function loadData() {
    try {
      const user = await loadUser('klaus');
      const profile = await loadProfileData(user.userId);
    } catch (e) {
      console.error("Something failed")
    }
  }
                      </code></pre>
        </section>
        <section>
          <h3>Die fetch API</h3>
          <p>Schreiben von Daten mit HTTP POST</p>
          <div class="fragment">
            <p><code>fetch</code> erwartet als 2. Parameter ein Konfigurationsobjekt:</p>

            <ul>
              <li>
                <code>method</code>: HTTP Methode (<code>PUT</code>, <code>POST</code>,
                <code>DELETE</code>, ...)
              </li>
              <li><code>headers</code>: HTTP Header f√ºr den Request (z.B. Authorization)</li>
              <li><code>body</code>: Der Payload (als String!)</li>
            </ul>
            <p>Der Returnwert ist derselbe wie bei GET</p>
          </div>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
const response = await fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(payload)
})
// ... 
    </code></pre>
        </section>

        <section>
          <h3>fetch: Zusammenfassung</h3>

          <pre><code class="javascript" contenteditable data-trim>
  try {
    // 1. fetch returns a Promise, that will be resolved with a
    // Response object when the answer from the server comes in
    const response = await fetch('http://localhost:7000/posts');
  
    // 2. the Response object contains "meta data" about the Response
    // (for ex. http status code) and functions the read the payload,
    // for example from JSON:
    const posts = await response.json();
  
    // btw: What do we do with the answer here in our React application?
    // ???
  } catch (err) {
    // 4. In case something goes wrong, log error
    console.error('request failed', err);
  }
  
  </code></pre>
          <p>
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API Doku</a>
          </p>
        </section>

        <section>
          <h3>Wann laden wir die initialen Daten f√ºr unsere Anwendung (Blog Posts)?</h3>
        </section>

        <section>
          <h3>Laden (und speichern) von Daten</h3>
          <p>üëâSchritt-f√ºr-Schritt</p>
          <p style="font-size: small;"><code>steps/3-hierarchy</code></p>
        </section>

        <section>
          <h3>Fetch-on-Render</h3>
          <p>Wir k√∂nnen den Server-Aufruf beim Rendern der Komponente triggern</p>
          <p>
            Bis die Daten verf√ºgbar sind (w√§hrend des laufenden Server Requests) zeigen wir einen
            Loading Indicator
          </p>
        </section>

        <section>
          <h3>Seiteneffekte</h3>
          <p>
            Server-Aufrufe sind <b>Seiteneffekte</b> (andere Beispiele: DOM manipulieren, WebSocket
            √∂ffnen)
          </p>
          <p>Seiteneffekte sind in der <b>Renderphase</b> einer Komponente verboten!</p>
        </section>

        <section>
          <h3>useEffekt-Hook</h3>
          <p>
            <em
              >Mit useEffekt kann eine Funktion registriert werden, die nach dem Rendern der
              Komponente ausgef√ºhrt wird</em
            >
          </p>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            function App(props) {
              React.useEffect( 
                () => console.log("I will run after EACH render")
              );
            }
          </code></pre>

          <div class="fragment">
            2. Parameter (array) gibt an, wenn die Funktion ausgef√ºhrt werden soll ("dependencies")

            <pre class="fragment"><code class="javascript" contenteditable data-trim>
              function App(props) {
                React.useEffect( 
                  () => console.log("I will run only once after 1st rendering"),
                  []
                );
              }
            </code></pre>
          </div>

          <div class="fragment">
            Nur nach dem 1. Rendern und immer wenn sich die postId √§ndert:

            <pre class="fragment"><code class="javascript" contenteditable data-trim>
                function App(props) {
                  React.useEffect(
                    () => console.log("..."), 
                    [props.postId]) 
                  );
                }
              </code></pre>
          </div>
        </section>

        <section>
          <h3>useEffect Hook</h3>

          <p>Zwei Parameter:</p>
          <ul>
            <li class="fragment">
              Callback-Funktion, die aufgerufen wenn entsprechendes Ereignis eintritt (z.B.
              initiales Rendern abgeschlossen)
            </li>
            <li class="fragment">
              Ein Array mit Abh√§ngigkeiten:
              <ul>
                <li class="fragment">
                  Wenn kein Array angegeben wird, wird der Effekt nach jedem Rendern ausgef√ºhrt
                  (achtung! Endlosschleife m√∂glich)
                </li>
                <li class="fragment">
                  Wenn ein leeres Array angegeben wird, wird der Effekt nur nach dem 1. Rendern
                  ausgef√ºhrt
                </li>
                <li class="fragment">
                  Wenn Werte angegeben werden, wird der Effekt ausgef√ºhrt, wenn sich mind 1 Wert
                  ver√§ndert hat
                </li>
              </ul>
            </li>
          </ul>

          <p class="fragment">
            Um auf das Entfernen der Komponente aus dem DOM zu reagieren (z.B Resourcen freigeben),
            kann die Callback-Funktion eine weitere Funktion zur√ºckliefern, die dann ausgef√ºhrt
            wird:
          </p>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                  function GreetingController(props) {
                    React.useEffect(
                      () => {
                        console.log("greetingId hat sich ge√§ndert"); 
                        return () => console.log("Ich bin entfernt worden") 
                      },
                      [props.greetingId])
                    );
                  }
                </code></pre>
        </section>

        <section>
          <h3>Beispiel: initiales Laden von Daten</h3>

          <div>
            <p>
              <code>useEffect</code> und (<code>useState</code>) werden verwendet um die initialen
              Daten zu laden
            </p>
            <pre><code class="javascript" contenteditable data-trim>
                function App() {
                  const [posts, setPosts] = React.useState([]);
                
                  React.useEffect(() => {
                    fetch("http://localhost:7000/posts")
                      .then(response => response.json())
                      .then(json => setPosts(json));
                  }, []);

                  return {posts.map(p => (
                    &lt;Post key={p.id} post={p} />
                  ))}
                }
                
                </code></pre>
          </div>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Was ist das Problem mit diesem Code?</h3>

          <pre><code class="javascript">
    function BlogList() {
      const [posts, setPosts] = React.useState([]);
    
      React.useEffect(
        async () => {
          const response = await fetch("...");
          const loadedPosts = response.json();
          setPosts(loadedPosts);
        }, []
      );
    
      return ...;
    }
    </code></pre>
          <p class="fragment">
            Die Callback-Funktion liefert ein Promise zur√ºck (wird zu "undefined" aufgel√∂st)! Das
            ist nicht erlaubt, da React eine Funktion erwartet (oder undefined).
          </p>
        </section>

        <section>
          <h3>Speichern von Daten</h3>
          <p>Als Folge einer Benutzerinteraktion:</p>
          <p class="fragment">In einem Event-Handler k√∂nnen Seiteneffekte verwendet werden!</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
function App(props) {
  // load, as seen
  React.useEffect( ... );

  function addPost(post) {
    fetch("http://localhost:7000/posts", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(post)
    })
      .then(response => response.json())
      .then(newPost => setPosts([newPost, ...posts]));
  }


  return
    ...
      &lt;AddPost onAdd={newPost => addPost(newPost)} />
    ...
}
                </code></pre>
        </section>

        <section>
          <h2>√úbung: Laden und Speichern von Daten auf einem Server</h2>
          <p>
            <em
              >Implementiere die n√§chste Version der <code>App</code>-Komponente, die in der Lage
              ist, die Blog Posts mit <code>fetch</code> zu laden und zu speichern.</em
            >
          </p>
          <div class="fragment">
            <p>
              Das backend ist bereits fertig. Ihr k√∂nnt es starten mit:
            </p>
            <pre><code>
                  cd react-training/blog-example/backend-rest
                  npm start
                </code></pre>
            <p>Der Server l√§uft auf Port 7000</p>
            <p>
              Ihr k√∂nnt das Backend mit folgender URL testen (Browser, wget, curl, ...):
              <a href="http://localhost:7000/posts">http://localhost:7000/posts</a>
            </p>
          </div>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h3>Schritte</h3>
          <ol class="x-list">
            <li class="fragment">
              F√ºge in <code>App.js</code> den Code zum <b>Laden</b> und <b>Speichern</b> eines
              Blog-Posts hinzu.
            </li>
            <li class="fragment">
              Beim <b>Laden</b> der Daten mit fetch, bitte <b>Promise API</b> verwenden und
              <b>nicht <code>async/await</code></b> API!
            </li>

            <li class="fragment">
              F√ºge einen Loading Indicator hinzu
              <ul>
                <li>
                  Wenn Du <code>?slow</code> an die URLs im <code>fetch</code>-Aufruf h√§ngst, wird
                  der Server-Call k√ºnstlich verlangsamt:
                  <code>http://localhost:7000/posts?slow</code>
                </li>
                <li>
                  F√ºge einen neuen Zustand (State) in der App-Komponente hinzu, der festh√§lt, ob ein
                  Server-Call (Daten laden) gerade l√§uft
                </li>
                <li>
                  Gib w√§hrend des laufenden Server-Calls (Daten laden) eine Meldung aus ("Please
                  wait")
                </li>
              </ul>
            </li>
            <li class="fragment">M√∂gliche L√∂sung in <code>steps/4-remote</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Beispiel: Loading Indicator</h3>
          <p>Wie geben wir dem Benutzer Feedback, dass die Daten gerade geladen werden?</p>
        </section>

        <section>
          <h3>Komplexer Zustand</h3>
          <p>
            Wenn eine Komponente mehrere Zust√§nde h√§lt, die nicht unabh√§ngig sind, kannst Du auch
            ein Objekt als Zustand verwenden:
          </p>

          <pre class="fragment"><code class="javascript">
function App() {
  const [fetchState, setFetchState] = React.useState({
    loading: false,
    posts: []
  });

  ...;
}              
            </code></pre>
          <p class="fragment">
            Wenn Du den Zustand √§nderst, musst Du ein <b>neues Objekt</b> erzeugen! Das bestehende
            Objekt darf nicht ver√§ndert werden
          </p>

          <pre class="fragment"><code class="javascript">
    function App() {
      const [fetchState, setFetchState] ...;

      // OK:
      setFetchState({
        loading: true
      })

      // FALSCH:
      fetchState.loading = true;
      setFetchState(fetchState)
    }              
        
  </code></pre>
        </section>
        <!-- <section>
          <h3>√úbung komplexer Zustand</h3>
          <ol class="x-list">
            <li class="fragment">
              In deiner <code>App</code>-Komponente hast Du zwei Zust√§nde: <code>posts</code> und
              <code>loading</code>.
            </li>
            <li class="fragment">
              F√ºge die beiden Zust√§nde zu <em>einem</em> "komplexen" Zustand zusammen. Verwende also
              ein Objekt im State.
            </li>
            <li class="fragment">
              Achte darauf, dass der posts-Eintrag in dem Zustand niemals null oder undefined,
              sondern immer mindestens ein leeres Array ist. (Auch beim Initialisiern dran denken!)
            </li>
            <li class="fragment">
              Bitte denk immer dran, dass Du das State-Objekt nicht ver√§ndern darfst, sondern es
              immer erneut erzeugen musst.
            </li>
            <li class="fragment">M√∂gliche L√∂sung in <code>steps/4-remote-with-loading</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section> -->
        <section>
          <h3>Exkurs: Custom Hooks</h3>

          <em>Eigene Hooks k√∂nnen f√ºr wiederkehrende Aufgaben genutzt werden</em>

          <p class="fragment">
            Beispiele: Laden von Daten, Arbeiten mit spezialisiertem State, ...
          </p>
        </section>

        <section>
          <h3>Exkurs: Custom Hooks</h3>

          <ul class="x-list">
            <li class="fragment">
              ...m√ºssen mit <code>use</code> beginnen
              <ul>
                <li>(ansonsten kann der Linter nicht auf m√∂gliche Fehler pr√ºfen!)</li>
              </ul>
            </li>
            <li class="fragment">
              ...d√ºrfen nur aus anderen (Custom) Hooks und Komponenten aufgerufen werden
            </li>
            <li class="fragment">
              ...erwarten "normale" Funktionsparameter (nicht zwingend ein Objekt wie bei
              Komponenten)
            </li>
            <li class="fragment">...d√ºrfen andere (Custom) Hooks verwenden</li>
            <li class="fragment">
              ...beliebiger R√ºckgabewert m√∂glich (alle Typen erlaubt, auch JSX!)
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Beispiel: Ein Custom Hook zum Laden von Daten</h3>

          <pre><code class="javascript">
import React from "react";

export default function useApi(url, initialValue) {
  const [fetchState, setFetchState] = React.useState({data: initialValue});

  React.useEffect(
    () => {
      async function loadData() {
        try {
          setFetchState({loading: true, data: initialData})
          const response = await fetch(url);
          const json = await response.json();
          setFetchState({data: json})
        } catch (err) {
          console.error("LOADING DATA FAILED:", err);
          setFetchState({error: err.toString()})
        } 
      }
      loadData();
    },
    // Make sure, this Hook only runs (after initial) when URL changes
    [url]
  );

  return [fetchState.data, fetchState.isLoading];
}
</code></pre>
        </section>

        <!-- ============================= GRAPHQL ANFANG =================================================================== -->
        <section id="t-graphql">
          <h3>Teil V</h3>
          <h1>GraphQL</h1>
          <h2>Clients mit Apollo React</h2>
        </section>

        <section>
          <h3>Die Blog Anwendung mit GraphQL</h3>

          <p>üëâ Beispiel: steps/8-graphql</p>
        </section>

        <section>
          <h3>Hintergrund:</h3>
          <h2>React Router</h2>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>React Router</h3>
          <ul>
            <li class="fragment">
              Das GraphQL-Beispiel ist mit dem
              <a href="https://reactrouter.com/">React Router</a> gebaut
            </li>
            <li class="fragment">
              Das Beispiel verwendet noch die <a href="https://v5.reactrouter.com/">Version 5.x</a>
            </li>
            <li class="fragment">Der React Router ist kein "offizielles" React Projekt</li>
            <li class="fragment">Ihr k√∂nnt damit URLs auf Komponenten abbilden ("routen")</li>
          </ul>
        </section>

        <section>
          <h3>React Router</h3>
          <ul>
            <li class="fragment">
              Mit der <code>Switch</code> und
              <a href="https://v5.reactrouter.com/web/api/Route"><code>Route</code></a
              >-Komponente k√∂nnt ihr festlegen, welche Komponente f√ºr einen Pfad dargestellt werden
              kann
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function App() {
              return (
                &lt;Switch>

                  &lt;Route exact path="/">
                    &lt;PostListPage />
                  &lt;/Route>
            
                  &lt;Route path="/add">
                    &lt;PostEditorPage />
                  &lt;/Route>

                  &lt;Route>
                    &lt;NotFoundPage />
                  &lt;/Route>
                
                &lt;/Switch>
              );
            }
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>React Router</h3>
          <ul>
            <li class="fragment">Ihr k√∂nnt Parameter/Argumente in Pfaden verwenden</li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function App() {
              return (
                &lt;Switch>

                  &lt;Route path="/post/:postId">
                    &lt;PostPage />
                  &lt;/Route>


                &lt;/Switch> 
              );
            }
          </code></pre>

          <ul>
            <li class="fragment">
              Innerhalb Eurer Komponente k√∂nnte ihr mit
              <a href="https://v5.reactrouter.com/web/api/Hooks/useparams"
                ><code>useParams</code>
              </a>
              auf den Wert aus der URL zugreifen
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
function PostPage() {
  const { postId } = useParams();

  // URL: '/post/7' -> postId: '7'
}            
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>React Router</h3>

          <p>
            <a
              href="https://nilshartmann.github.io/react-training/2021_07_13_react_typescript.html#/t-router"
            >
              Mehr Informationen</a
            >
            zum React Router (Version 5.x)
          </p>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h3>Apollo Client</h3>
          <p>
            <a href="https://www.apollographql.com/docs/react/"
              >https://www.apollographql.com/docs/react/</a
            >
          </p>
          <p>React Hooks um mit GraphQL Services zu kommunizieren</p>
          <p>
            Stellt einen <b>globalen Cache</b> zur Verf√ºgung, um konsistente Daten in der ganzen
            Anwendung sicherzustellen
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Apollo Client DevTools</h3>

          <p>Browser-Erweiterung, stellt z.B. den Inhalt des Caches dar</p>

          <ul>
            <li>
              <a
                href="https://chrome.google.com/webstore/detail/apollo-client-devtools/jdkknkkbebbapilgoeccciglkfbmbnfm"
                >Chrome</a
              >
            </li>
            <li>
              <a href="https://addons.mozilla.org/de/firefox/addon/apollo-developer-tools/"
                >Firefox</a
              >
            </li>
          </ul>
        </section>

        <section>
          <h3>Apollo Client</h3>
          <p>
            Das <code>ApolloClient</code>-Objekte ist unter anderem f√ºr den Netzwerkverkehr, den
            Cache und Fehlerbehandlung zust√§ndig
          </p>
          <p>
            Der <code>ApolloClient</code> ist React-unabh√§ngig und kann auch mit anderen
            JS-Frameworks verwendet werden
          </p>

          <pre class="fragment"><code class="javascript">
import ApolloClient from "apollo-client";

const client = new ApolloClient({
  link: new HttpLink({uri: "http://localhost:4000"}),
  cache: new InMemoryCache()
}};
  </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Apollo React Client</h3>
          <p>
            Die Komponenten bzw. die React-spezifische API des Apollo Clients, ben√∂tigt Zugriff auf
            den ApolloClient
          </p>
          <p>Das Client-Objekt muss der Anwendung bereitgestellt werden</p>
          <p>
            Dazu wird die <code>ApolloProvider</code>-Komponente verwendet, die allen
            darunterliegenden Komponenten Zugriff auf den ApolloClient erm√∂glicht:
          </p>

          <pre class="fragment"><code class="javascript">
import ApolloClient from "apollo-boost";
import { ApolloProvider } from "@apollo/react-hooks";

const client = ...;

ReactDOM.render(
  &lt;ApolloProvider client={client}>
    &lt;App />
  &lt;ApolloProvider>,

  document.getElementById("root")
);
</code></pre>
          <p class="fragment">
            (Der Apollo Client verwendet intern die
            <a ref="https://reactjs.org/docs/context.html">React Context API</a>)
          </p>
        </section>
        <section>
          <h3>Apollo GraphQL Client in React</h3>
          <p>Live: workspace-graphql</p>
        </section>

        <section>
          <h3>Queries</h3>
          <p>
            Queries k√∂nnen in einer eigenen Datei geschrieben werden, oder mit der
            <code>gql</code> "Tagged Template Function" direkt im Code <br />(Hintergrund: <a
            href="<a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates"
              >Tagged template function</a
            >)
          </p>
          <p>
            Mit create-react-app m√ºsst ihr noch etwas konfigurieren, wenn ihr die GraphQL-Queries in
            einer eigenen Datei hinterlegen wollt:
            <a href="https://create-react-app.dev/docs/loading-graphql-files/">Doku</a>
          </p>

          <p>
            In beiden F√§llen entsteht dabei ein "GraphQL Document Object", das den geparsten Query
            enth√§lt
          </p>

          <pre><code class="javascript">
import { gql } from "@apollo/client";

const PostListQuery = gql`
  query PostListQuery {
    posts {
      id
      title
      teaser(maxLength: 20)
      date
    }
  }
`;
</code></pre>

          <p class="fragment">
            (Falls ihr TypeScript verwendet, k√∂nnt ihr mit dem
            <a href="https://www.graphql-code-generator.com/">GraphQL Code Generator</a> TypeScript
            Typ Definitionen f√ºr Eure Queries erzeugen)
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Verwenden des Apollo React Clients</h3>

          <ul>
            <li class="fragment">
              Apollo stellt f√ºr die drei GraphQL Operationen jeweils eigene Hooks zur Verf√ºgung:
              <ul>
                <li>
                  <a href="https://www.apollographql.com/docs/react/data/queries/#usequery-api"
                    >useQuery</a
                  >
                  (und
                  <a
                    href="https://www.apollographql.com/docs/react/data/queries/#manual-execution-with-uselazyquery"
                    >useLazyQuery</a
                  >)
                </li>
                <li>
                  <a href="https://www.apollographql.com/docs/react/data/mutations/#usemutation-api"
                    >useMutation</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.apollographql.com/docs/react/data/subscriptions/#usesubscription-api-reference"
                    >useSubscription</a
                  >
                </li>
              </ul>
            </li>
            <li class="fragment">
              Die Hooks funktionieren alle √§hnlich:
              <ul>
                <li class="fragment">
                  Sie erwarten ein Dokument mit einer GraphQL Operation (Ergebnis von
                  <code>gql</code>)
                </li>
                <li class="fragment">
                  Verhalten kann mit weiteren Argumeten konfiguriert werden, z.B. setzen von
                  Variablen
                </li>
                <li class="fragment">
                  Der R√ºckgabetyp ist ein Objekt mit Informationen √ºber den Request (loading, data,
                  error). Bei <code>useMutation</code> kommt kommt au√üerdem eine Funktion zum
                  Ausf√ºhren der Mutation zur√ºck
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>useQuery: GraphQL Query ausf√ºhren</h3>
          <p>Der useQuery-Hook f√ºhrt einen GraphQL aus</p>

          <pre><code class="javascript">
const PostListQuery = gql`...`;            
function BlogListPage() {
  const { loading, error, data } = useQuery(PostListQuery);

  if (loading) {
    return <h1>Loading, please wait...</h1>;
  }

  if (error) {
    return <h1>GraphQL Failed: {error.toString()}</h1>;
  }

  return &lt;PostList posts={data.posts} />;
}

</code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>useQuery - Lebenszyklus</h3>
          <ol>
            <li class="fragment">
              <code>useQuery</code> f√ºhrt automatisch den √ºbergebenen Query aus, sobald die
              Komponente gemounted wird
            </li>
            <li class="fragment">
              Sobald der Request l√§uft, gibt die Funktion ein Objekt zur√ºck, in dem
              <code>loading</code> auf <code>true</code> gesetzt ist. Die Komponente rendert sih neu
              und Du kannst z.B. einen Loading Indikator anzeigen
            </li>
            <li class="fragment">
              Sobald die Antwort des Queries ankommt, wird deine Komponente erneut gerendert
            </li>
            <li class="fragment">
              Der useQuery-Hook gibt nun ein Objekt zur√ºck, in dem entweder <code>error</code> oder
              <code>data</code> gesetzt ist und <code>loading</code> jetzt <code>false</code> ist.
            </li>
            <li class="fragment">
              Du kannst die Informationen nutzen, um die Darstellung zu aktualisieren
            </li>
            <li class="fragment">
              Wenn der Request erfolgreich war, aktualisiert Apollo den globalen Cache mit den
              geladenen Daten
            </li>
            <li class="fragment">
              <em>Alle</em> sichtbaren Komponenten, die (Teile der) geladenen Daten darstellen,
              werden automatisch aktualisiert
            </li>
          </ol>
        </section>

        <section>
          <h3>useQuery: Variablen</h3>
          <p>GraphQL Queries k√∂nnen Variablen enthalten</p>
          <p>
            Das (optionale) zweite Argument von <code>useQuery</code> ist ein Objekt mit
            Konfigurationsoptionen
          </p>
          <p>Mit diesem Argument kannst Du Variabeln an deinen Query √ºbergeben</p>

          <pre class="fragment"><code class="javascript">
const POST_PAGE_QUERY = gql`
  query PostPageQuery($postId: ID!) {
    post(postId: $postId) {
      id  title date
      body user { name }
    }
  }
`;
</code></pre>
          <pre class="fragment"><code class="javascript">
function PostPage() {
  // Receive postId from URL params
  const { postId } = useParams();

  const { loading, error, data } = useQuery(POST_PAGE_QUERY,
    {
      variables: { postId }
    }
  );
  // ...
}
</code></pre>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h2>√úbung: Ein GraphQL Query ausf√ºhren</h2>
          <p>
            <em>Vorbereitung: GraphQL-Backend starten </em>
          </p>
          <div class="fragment">
            <p>
              Bitte das GraphQL-Backend starten:
            </p>
            <pre><code>
                  cd react-training/blog-example/backend-graphql

                  npm install (falls noch nicht erfolgt)

                  npm start
                </code></pre>
            <p>Der Server l√§uft auf Port 7000</p>
            <p>
              Du kannst den
              <a
                href="https://www.apollographql.com/docs/apollo-server/v2/testing/graphql-playground/"
                >Apollo Playground</a
              >
              f√ºr das Blog-Backend unter
              <a href="http://localhost:4000">http://localhost:4000</a> √∂ffnen und ausprobieren
            </p>
            <p>
              Wenn sich der Playground √∂ffnen l√§sst, funktioniert das Backend. Dann bitte Hand heben
              üôã, damit wir gemeinsam weitermachen k√∂nnen
            </p>
          </div>
        </section>

        <section>
          <h2>√úbung: Ein GraphQL Query ausf√ºhren</h2>
          <ol class="x-list">
            <li class="fragment">
              <em
                >Achtung: Neuer Workspace! Wir arbeiten f√ºr diese √úbung im Verzeichnis
                <b>workspace-graphql</b></em
              >
            </li>

            <li class="fragment">Bitte beende den "alten" Workspace</li>
            <li class="fragment">
              Starte dann in <b>workspace-graphql</b> den Development Server f√ºr React:
              <pre><code>
            cd react-training/blog-example/workspace-graphql

            npm install (falls noch nicht erfolgt)

            npm start
          </code></pre>
            </li>
            <li class="fragment">
              <em
                >Implementiere die <code><b>PostListPage</b></code> Komponente</em
              >
              (TODOs stehen in der Datei)
            </li>
            <li class="fragment">
              Wenn die Komponente funktioniert, sollten die Blog-Posts angezeigt werden (in dieser
              Version der Anwendung nur der Titel)
            </li>
            <li class="fragment">Wenn Du fertig bist, bitte Hand heben üôã</li>
            <!-- <li class="fragment">
              Zusatz: √ñffne dann den Netzwerk-Tab im Browser und pr√ºfe, wann Netzwerk-Requests
              durchgef√ºhrt werden, wenn Du dir nacheinander mehrere Blog-Artikel anzeigen l√§sst
            </li> -->
          </ol>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>useQuery: Cache #1</h3>

          <p>
            Wenn deine Komponete erneut gerendert wird, wird dein Query
            <b>nicht erneut ausgef√ºhrt</b>, sofern Apollo das Ergebnis noch im Cache findet
          </p>
          <p>üëâ Netzwerk</p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Der Apollo Cache</h3>
          <p><em>Apollo normalisiert die Daten bevor sie in den Cache gelegt werden:</em></p>
          <p class="fragment">
            F√ºr jedes Objekt, das als Teil deines Queries geladen wurde (egal auf welchem Level),
            Apollo ermittelt den
            <b>typename</b>
          </p>
          <p class="fragment">
            Das <code>__typename</code>-Feld wird daf√ºr automatisch allen Queries von Euch
            hinzugef√ºgt!
          </p>
          <p class="fragment">F√ºr jedes Objekt extrahiert Apollo dessen <b>id</b></p>
          <p class="fragment">
            Wenn das <b>id</b>-Feld eines Objektes nicht <b>id</b> hei√üt, muss das in der
            Konfiguration von Apollo gesetzt werden
          </p>
          <p class="fragment">
            <b>Empfehlung:</b> <em>Immer</em> das <b>id</b>-Feld in jedem Objekt in jedem Query
            abfragen!
          </p>
        </section>

        <section>
          <h3>Apollo GraphQL: Mutations</h3>
          <p class="fragment">
            Ausf√ºhren von Mutations ist √§hnlich wie das Ausf√ºhren eines Queries
          </p>
          <p class="fragment">
            Hook:
            <a href="https://www.apollographql.com/docs/react/data/mutations/#executing-a-mutation"
              ><b>useMutation</b></a
            >
          </p>
          <p class="fragment">
            Der useMutation Hook gibt ein Array (Tuple) mit zwei Eintr√§gen zur√ºck:
          </p>
          <p class="fragment">
            1. Eine Funktion zum Ausf√ºhren der Mutation (z.B. nach einer Benutzerinteraktion)
          </p>
          <p class="fragment">
            2. Das Ergebnis-Objekt, das wird schon bei <code>useQuery</code> gesehen haben
            (zus√§tzlich: ein <code>called</code>-Property)
          </p>

          <pre class="fragment"><code class="javascript">
const NewBlogPostMutation = gql`...`;

function PostEditorPage() {
  const [mutate, { error, data, called }] = useMutation(NewBlogPostMutation);

  async function savePost(post) {
    mutate({
        variables: {
        postData: post
      }
    });
  }

  const errorMessage = error ? ... : null;

  if (called && !errorMessage) {
  // Mutation has been executed and was successful
  return &lt;SuccessConfirmation />;
}

  // Mutation hasn't been run or failed with an error
  return &lt;PostEditor onSavePost={savePost} error={errorMessage} />;
}
  </code></pre>
        </section>
        <section>
          <h3>√úbung: Eine Mutation</h3>
          <p>
            <em>Vervollst√§ndige die <code>PostEditorPage</code> Komponente</em>
          </p>

          <ol class="x-list">
            <li>In <code>PostEditorPage.js</code> stehen TODOs</li>
            <li>Wenn Du fertig bist, bitte Hand heben üôã</li>
          </ol>
        </section>

        <section>
          <h3>Aktualisieren des Caches</h3>
          <p>Es gibt mehrere M√∂glichkeiten:</p>
          <ul>
            <li class="fragment">
              <a
                href="https://www.apollographql.com/docs/react/data/queries/#setting-a-fetch-policy"
                >Fetch Policy</a
              >
            </li>
            <li class="fragment">
              <a href="https://www.apollographql.com/docs/react/data/queries/#refetching"
                >Refetch function</a
              >
            </li>
            <li class="fragment">
              <a href="https://www.apollographql.com/docs/react/data/queries/#polling"
                >Polling (alle x ms)</a
              >
            </li>
            <li class="fragment">
              Mit einer "<b>subscribe to more</b>"-<a
                href="https://www.apollographql.com/docs/react/data/subscriptions/#subscribing-to-updates-for-a-query"
                >Subscription</a
              >
            </li>
            <li class="fragment">
              Mit der
              <a
                href="https://www.apollographql.com/docs/react/data/mutations/#updating-the-cache-directly"
                >Cache API</a
              >
              kannst Du den Cache direkt manipulieren
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Fetch Policy #1</h3>
          <p>
            Mit einer Fetch Policy kannst Du bei <code>useQuery</code> einstellen, wann dein Query
            erneut ausgef√ºhrt werden soll
          </p>
          <pre class="fragment"><code class="javascript">
function PostPage() {
  // Receive postId from URL params
  const { postId } = useParams();

  const { loading, error, data } = useQuery(POST_PAGE_QUERY,
    {
      variables: { postId },
      fetchPolicy: "network-only"
    }
  );
  // ...
} 
</code></pre>
        </section>
        <section>
          <h3>Fetch Policy #2</h3>
          <p>Erlaubte Werte</p>
          <ul>
            <li class="fragment">
              <b>cache-first</b>: Wenn die angeforderten Daten bereits im Cache sind, werden sie aus
              dem Cache zur√ºckgegeben, sonst vom Backend geladen (Default)
            </li>
            <li class="fragment">
              <b>cache-and-network</b>: Falls vorhanden, Daten aus dem Cache zur√ºckgeben, aber in
              jedem Fall auch einen Backend-Request auszuf√ºhren, um ggf. aktualisierte Daten zu
              laden (Schnelle Darstellung, die ggf. kurze Zeit sp√§ter aktualisiert wird)
            </li>
            <li class="fragment">
              <b>network-only</b>: Immer Daten vom Backend laden (keine Daten vom Cache verwenden),
              aber mit dem Ergebnis den Cache aktualisieren
            </li>
            <li class="fragment">
              <b>no-cache</b>: Immer Daten vom Backend laden und auch nicht den Cache aktualisieren
            </li>
            <li class="fragment">
              <b>cache-only</b>: Nur Daten vom Cache verwenden. Wenn die Daten darin nicht gefunden
              werden, wird kein Ergebnis zur√ºckgeliefert
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Refetch Funktion</h3>
          <p>
            <code>useQuery</code> liefert eine <b>refetch</b>-Funktion, die Du verwenden kannst, um
            den Query erneut auszuf√ºhren (z.B. nach Klick auf einen "Aktualisieren"-Button)
          </p>

          <pre class="fragment"><code class="javascript">
function BlogListPage() {
  const { loading, error, data, refetch } = useQuery(PostListQuery);

  if (loading) {
    return <h1>Loading, please wait...</h1>;
  }

  if (error) {
    return <h1>GraphQL Failed: {error.toString()}</h1>;
  }

  return &lt;PostList posts={data.posts} onRefetch={refetch}/>;
}              
    </code></pre>

          <pre class="fragment"><code class="javascript">
function PostList({posts, onRefetch}) {
  return &lt;>
    &lt;button onClick={onRefetch}>Refresh Posts&lt;/button>
    ...
  &lt;/>
}  
</code></pre>
        </section>

        <section>
          <h3>Polling</h3>
          <p>
            Du kannst ein <code>pollInterval</code> (Zeit in ms) als Query Option angeben. Apollo
            f√ºhrt dann den Query dann in dem angegebenen Interval automatisch neu aus
          </p>
          <pre class="fragment"><code class="javascript">
function BlogListPage() {
  const { loading, error, data } = useQuery(POST_LIST_QUERY,
    { pollInterval: 1500 }
  );

// ...wie gesehen...
}              
    </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Den Cache nach einer Mutation aktualisieren</h3>

          <ul>
            <li>
              <a href="https://www.apollographql.com/docs/react/data/mutations/#refetching-queries"
                >refetch Queries</a
              >: Damit kannst Du eine Liste von Queries angeben, die erneut ausgef√ºhrt werden, wenn
              eine Mutation erfolgreich war
            </li>
            <li>
              Mit der
              <a
                href="https://www.apollographql.com/docs/react/data/mutations/#updating-the-cache-directly"
                >update-function</a
              >: kannst Du den Cache direkt per API manipulieren, sobald deine Mutation erfolgreich
              war
            </li>
          </ul>
        </section>

        <section>
          <h3>Nach einer Mutation... wird der Cache automatisch aktualisiert (eventuell)</h3>
          <p class="fragment">
            Wenn deine Mutation ein Objekt zur√ºckliefert, das sich bereits im Cache befindet, wird
            es dort aktualisiert
          </p>
          <p class="fragment">
            Beispiel: Du <b>aktualisierts</b> einen existierenden Blog Post und das Ergebnis der
            Mutation enth√§lt den aktualisierten Post
          </p>

          <pre class="fragment"><code class="javascript">
const UpdatePost = gql`
  mutation {
    updateBlogPost(postId: "P1", newTitle: "...", newBody: "...") {
        id
        title
        body
    }
  }
`         
      </code></pre>
          <p class="fragment">
            In diesem Beispiel kann Apollo das Objekt <b>P1</b> im Cache automatisch aktualisieren
          </p>
        </section>

        <section>
          <h3>Grenzen der automatischen Cache-Aktualisierung</h3>
          <p>Es gibt F√§lle, da kann Apollo den Cache nicht selbstst√§ndig aktualisieren</p>
          <p>Beispiel: Einf√ºgen eines neuen Objektes in eine Liste</p>
          <p>
            Apollo wei√ü nicht, dass das Objekt, dass eine Mutation zur√ºckliefert, (auch) in eine
            bestehende Liste geh√∂rt
          </p>
          <p>
            Beispiel: Du liest Blog Posts. Du f√ºhrst eine Mutation aus, die einen neuen Blog Post
            anlegt (und diesen auch zur√ºckliefert) <br />
            Apollo legt das neue Objekt in den Cache, wei√ü aber nicht, dass es auch in die Liste der
            gelesenen Posts geh√∂rt
          </p>
        </section>

        <section>
          <h3>Die Apollo Cache API</h3>
          <p>Du kannst den Query auslesen (mit einem GraphQL Query!)</p>
          <p>Du kannst den Cache direkt modifizieren</p>
        </section>

        <section>
          <h3>Beispiel: Den Cache aktualisieren</h3>
          <p>Du kannst die <b>update-Function</b> bei <code>useMutation</code> angeben:</p>
          <p>
            Diese Funktion wird nach dem Ausf√ºhren der Mutation von Apollo aufgerufen
          </p>
          <p>
            Die Funktion bekommt das Mutation-Ergebnis sowie den aktuellen Cache von Apollo
            √ºbergeben
          </p>
          <p>You can use the cache api to add the new object</p>

          <pre class="fragment"><code class="javascript">
const ReadPostsFromCache = gql`
  query ReadPosts {
    posts {
      id
    }
  }
`;

function PostEditorPage() {
  function savePost(post: NewBlogPost) {
    mutate({
      variables: {...},
      update: (cache, {data}) => {
      const { posts } = cache.readQuery({
        query: ReadPostsFromCache
      });
      cache.writeQuery({
        query: ReadPostsFromCache,
        data: { posts: posts.concat(data.newPost) }
      });
    }
  })
}

return ...;
}
</code></pre>
        </section>

        <section>
          <h1>Ausblick: TypeScript</h1>
        </section>
        <section>
          <h3>TypeScript</h3>
          <ul>
            <li class="fragment">
              ...basiert auf JavaScript (jeder g√ºltige JS Code ist g√ºltiger TS Code)
            </li>
            <li class="fragment">...f√ºgt statische Typ-Informationen zu JavaScript hinzu</li>
            <li class="fragment">
              ...die Typ-Informationen k√∂nnen optional sein und werden von TypeScript automatisch
              ermittelt
            </li>
            <li class="fragment">
              ...existiert nur zur Build-Zeit, nach dem Build "normaler" JavaScript-Code
            </li>
          </ul>
        </section>

        <section>
          <h3>Beispiel</h3>
          <p>üëâ blog-example/workspace-typescript</p>
          <p>üëâ blog-example/steps/9b-graphql-with-typescript</p>
        </section>

        <!-- ============================== GRAPHL ENDE ============================================================= -->

        <section id="t-test">
          <h1>Teil VI</h1>
          <h2>Testen von React Anwendungen</h2>
        </section>

        <section data-transition="slide none">
          <h2>Was testen wir?</h2>
          <ul>
            <li class="fragment">
              <b>UI-unabh√§ngige Logik</b> (zum Beispiel Backend Calls, Berechnungen etc.)
            </li>
            <li class="fragment">
              <b>Rendering</b> (Ist die Liste der Blog Posts korrekt? Sieht das Markup aus, wie wir
              uns das vorstellen?)
            </li>
            <li class="fragment">
              <b>Interaktionen</b> (funktionieren die Event Handler, die Callback-Funktionen, der
              Programmflu√ü etc.?)
            </li>
            <li class="fragment">
              <b>Verhalten im Browser</b> (z.B. korrekte, pixelgenaue Darstellung,
              Browser-spezifisches JavaScript, Arbeiten mit Browser-Technologie wie Titelzeile,
              Session Storage, Scrollbars etc)
            </li>
          </ul>
        </section>

        <section>
          <h1>Jest</h1>
          <p>
            <em
              >"Delightful JavaScript Testing" (
              <a href="https://jestjs.io/" target="_blank">https://jestjs.io/</a>)</em
            >
          </p>
          <p class="fragment">
            Vollst√§ndige Testl√∂sung f√ºr React (und andere):
          </p>
          <ul class="fragment">
            <li>Test Runner</li>
            <li>Specs/Assertions, Mocks</li>
            <li>Code Coverage</li>
            <li>"Snapshot testing"</li>
          </ul>
        </section>
        <section>
          <h4>Jest</h4>
          <h3>Beispiel: Ein einfacher Testfall</h3>
          <pre><code class="javascript" contenteditable data-trim>// sum.js (or sum.ts)
export const sum = (a,b) => a+b;
        </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>// sum.test.js
import {sum} from '../sum.js';

test('sum of 2 and 2 is 4', () => {
  expect(sum(2, 2)).toBe(4);
});

test('sum of 2 and 2 is not 3', () => {
  expect(sum(2, 2)).not.toBe(3);
});
            </code></pre>
        </section>
        <section>
          <h4>Jest</h4>
          <h2>Testcases</h2>
          <p>
            <code>test</code> oder
            <code>it</code>
          </p>
          <pre><code data-trim contenteditable>test('it should work', () => {
  expect(...).toBe(...);
});</code></pre>
          <pre><code data-trim contenteditable>it('it should also work', () => {
  expect(...).toBe(...);
});</code></pre>
        </section>

        <section>
          <h4>Jest</h4>
          <h2>"Expectations" und "Matchers"</h2>
          <div class="fragment">
            <p>
              <code>expect()</code> liefert ein <em>Expectation</em> Objekt zur√ºck, das verschiede
              <em>Matcher</em> Funktionen bereitstellt:
            </p>
            <pre><code data-trim contenteditable>expect(actual).toXyz(expected);
// for example:
expect("Hello Jest").toBe("Hello Jest"); // => ok
        </code></pre>
          </div>
          <div class="fragment">
            <p>Beispiele f√ºr Matchers</p>

            <pre><code data-trim contenteditable>// Compare identity
expect(actual).toBe(expected);
// Compare value:
expect(actual).toEqual(expected);
// true / false / null:
expect(actual).toBeTruthy();
expect(actual).toBeFalsy();
expect(actual).toBeNull();
// Length (Array oder String)
expect(actual).toHaveLength(123);
        </code></pre>
          </div>
          <p class="fragment">
            <a href="https://jestjs.io/docs/en/expect">https://jestjs.io/docs/en/expect</a>
          </p>
        </section>

        <section>
          <h4>Jest</h4>
          <h2>Mock Funktionen</h2>
          <ul>
            <li class="fragment">
              <code>jest.fn()</code> erzeugt eine Mock-Funktion
              <pre><code data-trim contenteditable>// Gibt undefined zur√ºck, wenn die Mock-Funktion ausgef√ºhrt wird
const aMockFn = jest.fn();

const x = aMockFn("huhu"); // => undefined
expect(x).toBeUndefined();

expect(aMockFn).toHaveBeenCalled());
expect(aMockFn.toHaveBeenCalledWith("huhu"));
                      </code></pre>
            </li>

            <li class="fragment">
              Implementierung der Mock-Funktion kann als Parameter √ºbergeben:
              <pre><code data-trim contenteditable>
        const aMockFn = jest.fn( param => `Hello, ${param}` );
        
        console.log(aMockFn('World'));
        // => Hello, World
                  </code></pre>
            </li>
          </ul>
        </section>

        <section>
          <h3>Testen von React Komponenten</h3>
          <h2>Nur rendern</h2>
        </section>

        <section>
          <h3>React Test Renderer</h3>
          <p>
            <a href="https://www.npmjs.com/package/react-test-renderer"
              >https://www.npmjs.com/package/react-test-renderer</a
            >
          </p>
          <p>Rendert React Komponenten in JSON Objekte (ohne DOM):</p>
          <pre
            class="fragment"
          ><code class="javascript" contenteditable data-trim>import renderer from 'react-test-renderer';

const component = renderer.create(
  &lt;PostList posts={somePosts} />
);

console.log(component.toJSON());
            </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
        { type: 'div',
          props: {},
          children:  [
            { type: 'button', props: {}, children: [Object] },
            { type: 'article', props: [Object], children: [Object] },
            { type: 'article', props: [Object], children: [Object] }
          ]
        }
            </code></pre>
        </section>
        <section>
          <h3>"Snapshot Testing" mit Jest</h3>
          <p>
            <code>expect(obj).toMatchSnapshot()</code> vergleicht ein erzeugtes JSON-Objekt mit
            einem gespeicherten JSON-Objekt aus einer Datei:
          </p>
          <ul>
            <li class="fragment">
              Bei der <b>ersten</b> Ausf√ºhrung: Snapshot-Datei wird angelegt (
              <a href="slides/images/jest-snapshot-file.png" target="_blank">Beispiel</a>)
              <ul>
                <li class="fragment">Die Snapshot-Datei wird nun in Git eingecheckt</li>
              </ul>
            </li>
            <li class="fragment">
              In den <b>folgenden</b> Test Ausf√ºhrungen: ein neuer Snapshot wird jeweils erzeugt und
              mit dem <b>gespeicherten</b> Snapshot verglichen
            </li>
            <li class="fragment">
              Wenn die Snapshots nicht identisch sind:
              <ul>
                <li>
                  Fehler mit Unterschieden (
                  <a href="slides/images/jest-snapshot-diff.png" target="_blank">Beispiel</a>)
                </li>
                <li>
                  Im "watch mode" von Jest kann der Snapshot aktualisiert werden
                  <img src="slides/images/jest-snapshot-update.png" />
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Snapshot Tests mit Jest und React</h3>
          <pre
            class="fragment"
          ><code class="javascript" contenteditable data-trim>import renderer from 'react-test-renderer';
        
test('it should render correctly', () => {

  const somePosts = [ . . . ];

  const component = renderer.create(
    &lt;PostList posts={somePosts} />
  );

  expect(component.toJSON()).toMatchSnapshot();
});
            </code></pre>
        </section>

        <section>
          <h3>Testing React Components #2</h3>
          <h2>Interaktionen</h2>
        </section>

        <section>
          <h3>react-testing-library</h3>
          <p>
            <em
              >"Simple and complete React DOM testing utilities that encourage good testing
              practices."
            </em>
          </p>

          <p>
            <a href="https://github.com/testing-library/react-testing-library" target="_blank"
              >https://github.com/testing-library/react-testing-library</a
            >)
          </p>
          <p>
            Philosophie: Tests werden aus User-Perspektive geschrieben. Das bedeutet, um die zu
            testenden Elemente zu finden, suchst Du nach Eigenschaften, nach denen auch ein User
            suchen w√ºrde (z.B. Labels, Placeholder etc.)
          </p>
          <p class="fragment">üëâ <code>workspace-typescript</code></p>
        </section>
        <section>
          <h3>react-testing-library</h3>
          <p>Example</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            import { render, screen } from "@testing-library/react";
            import userEvent from "@testing-library/user-event";

            it("invokes callback on button click", () => {
              const onAddPostFn = jest.fn();
            
              // Render
              render(&lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />);
            
              // search the button
              const buttonElement = screen.getByRole("button", { name: "Add Post" });

              // "click" the button
              userEvent.click(buttonElement);
            
              // make sure it has been invoked
              expect(onAddPostFn).toHaveBeenCalled();
            });


            </code></pre>
        </section>

        <section>
          <h3>Die render-Funktion</h3>
          <p>
            Die render-Function aus der react-testing-library wird im Test verwendet, um eine React
            Komponente (ohne Browser) zu rendern
          </p>
          <p>
            Genauso wie in der Anwendungen k√∂nnen Properties angegeben werden
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            import { render } from "@testing-library/react";

              // Render a single component
              render(&lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />);
          </code></pre>
          <p class="fragment">
            Dran denken, ggf. Contexte ebenfalls zu erzeugen, falls diese ben√∂tigt werden (React
            Router, Redux etc)!
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>

              // Render with surrounding Redux Provider (or Router, your own Context etc.)
              render(
                &lt;Provider>
                  &lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />
                &lt;/Provider>
              );
            </code></pre>
        </section>
        <section>
          <h3>query Funktionen</h3>
          <p>
            Um die gerenderten HTML-Elemente aus deiner Komponente zu √ºberpr√ºfen und mit ihnen zu
            interagieren, musst Du sie ersteinmal finden ü§ì
          </p>
          <p>
            Auf dem globalen <b>screen</b> Objekt der Testing-Lib sind verschiedene Funktionen
            definiert, mit denen Du nach Elementen suchen kannst
          </p>
          <p>
            Die query-Funktionen haben unterschiedliche <b>Suffixe</b>, die beschreiben,
            <b>nach welchem Kriterium</b> Du suchst (nach Label, nach aria-role, ...)
          </p>
          <p>
            Die Funktionen haben au√üerdem jeweils einen <b>Pr√§fix</b> (getBy, queryBy etc) der
            beschreibt, die Art des R√ºckgabewerts der jeweilgen Funktion (z.B. ob sie einen Error
            wirft oder null zur√ºckgibt, wenn das angefragte Element nicht gefunden wurde)
          </p>
          <p>
            Mehr zu den query-Funktionen:
            <a
              target="_blank"
              href="https://testing-library.com/docs/react-testing-library/cheatsheet#queries"
              >React Testing Library Cheatsheet</a
            >
          </p>

          <pre class="fragment"><code class="javascript">
  // BEISPIELE: 

  // suche nach einem Button (Annahme: es gibt GENAU EINEN, ansonsten schl√§gt der Test fehl)
  const buttonElement = screen.getByRole("button", { name: "Add Post" });

  // suche nach einem Button (gibt null oder EINEN Button, wirft ansonst einen Fehler)
  const buttonElement = screen.queryByRole("button", { name: "Add Post" });

  // suche nach einem Button (gibt alle gefunden zur√ºck oder ein leeres Array)  
  const buttonElement = screen.queryAllByRole("button", { name: "Add Post" });
</code></pre>
        </section>

        <section>
          <h3>√úberpr√ºfen von Elementen</h3>
          <p>
            Wenn Du dein gesuchtes Elemente gefunden hast, kannst Du es √ºberpr√ºfen, ob es deinen
            Erwartungen entspricht (korrekte Attribute gesetzt etc.)
          </p>
          <p>
            Die Bibliothek
            <a href="https://github.com/testing-library/jest-dom" target="_blank">jest-dom</a> f√ºgt
            dazu DOM-spezifiche Matcher f√ºr Jest hinzu.
          </p>

          <pre class="fragment"><code class="javascript">
  import { screen } from "@testing-library/react";

  const buttonElement = screen.queryByRole("button", { name: "Add Post" });

  // stellt sicher, dass das Element im DOM vorhanden ist (getBy-Query w√ºrde hier vielleicht mehr Sinn machen)
  expect(buttonElement).toBeInTheDocument();

  // sicherstellen, dass ein Eingabefeld einen erwarteten Wert hat
  expect(titleInput).toHaveValue("Moin moin");

  // sicherstellen, dass ein Button disabled ist
  expect(okButton).toBeDisabled();
</code></pre>
          <p class="fragment">
            Alle Matcher sind auf der oben verlinkten GitHub Seite dokumentiert
          </p>
        </section>
        <section>
          <h3>Interaktionen</h3>
          <p>
            Du kannst mit den Elementen interagieren, in dem Du ihnen Events sendest, genau wie es
            ein Browser tun w√ºrde
          </p>
          <p>
            Es gibt eine weitere Bibliothek,
            <a href="https://github.com/testing-library/user-event" target="_blank"> user-event</a>,
            die dir dabei hilft, die Events zu erzeugen.
          </p>

          <pre class="fragment"><code class="javascript">
            import userEvent from "@testing-library/user-event";
            // Simuliert die Eingabe in ein Textfeld
            userEvent.type(titleInput, "New Title");

            // Simuliert den Klick auf einen Button
            userEvent.click(clearButton);
          </code></pre>
          <p class="fragment">Alle Events sind auf der GitHub Seite beschrieben (Link oben)</p>

          <p class="fragment">
            Vor dem Versenden eines Events musst Du <b>nicht</b> √ºberpr√ºfen, ob das Element, dem Du
            das Event senden willst, vorhanden ist. Die Bibliothek gibt eine sehr sprechende Fehler
            aus, wenn das Element nicht vorhanden ist
          </p>
        </section>
        <section>
          <h3>Testen von fetch-Aufrufen</h3>
          <p>Herausforderungen:</p>
          <ul>
            <li>Asynchroner Code (nicht beschr√§nkt auf fetch)</li>
            <li>Server Zugriffe/Server Mocks</li>
          </ul>
        </section>
        <section>
          <h3>Behandlung von asynchronem code</h3>
        </section>

        <section>
          <h3>Testen von asynchronem Code</h3>
          <p>
            Beispiel: Die <b>App</b> Komponente l√§dt Daten, <em>erst dann</em> stellt sie die
            PostList dar. Das Laden der Posts ist asynchron.
          </p>

          <pre class="fragment"><code class="javascript">
            it("should render posts read from backend", () => {
              render(&lt;App />);
            
              // Annahme: es gibt einen Artikel mit dem Title "Learning React"
              const articleOne = screen.findByRole("heading", { name: "Learning React" });

              expect(articleOne).toBeInTheDocument(); // THIS WON'T WORK!
            });
          </code></pre>
          <p class="fragment">
            Wir k√∂nnen einen Test als async-funktion schreiben und darin mit <b>await</b> auf ein
            Element warten
          </p>
          <pre class="fragment"><code class="javascript">
            // Test-Funktion als async-Funktion (beachte 'async'):
            it("should render posts read from backend", async () => {
              render(&lt;App />);
            
              // Beachte await hier:
              const articleOne = await screen.findByRole("heading", { name: "Learning React" });

              expect(articleOne).toBeInTheDocument(); // YIPPIE, WORKS
            });
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Testen von fetch</h3>
          <p>Wie gesehen, k√∂nnen wir asynchronen Code testen</p>
          <p class="fragment">Wollen wir fetch-Aufrufe in unserem Code haben, den wir testen?</p>
          <p class="fragment">
            M√∂glicherweise nicht, weil wir bei echten fetch-Aufrufen auch einen echten, laufenden
            und funktionierenden Server im Test br√§uchten
          </p>
          <p class="fragment">Stattdessen wollen wir das "echte" fetch mocken</p>
        </section>

        <section>
          <h3>Fetch mocken, Ansatz #1</h3>
          <p>Wir k√∂nnen <b>komplette Module</b> in Jest mocken</p>
          <p class="fragment">
            Wir k√∂nnten unseren fetch-Code in ein eigenes Modul schieben und das dann mocken
          </p>

          <pre class="fragment"><code class="javascript">
            // api.ts (fetch vereinfacht!)
            export function readPosts() {
              return fetch("http://localhost:7000/posts").then(response => response.json());
            }
          </code></pre>

          <pre class="fragment"><code class="javascript">
            // App.tsx:

            import { readPosts } from "./api";
            function App() {
              // ...
              React.useEffect(() => {
                // Verwenden von readPosts hier:
                readPosts()
                  .then(json => {
                    setLoading(false);
                    setPosts(json);
                  })
                  .catch(err => console.error("Loading data failed: " + err));
              }, []);
            }
          </code></pre>
        </section>
        <section>
          <h3>Mocken von Modulen in Jest</h3>
          <p>Es gibt mehrere Varianten. Das hier die einfachste(?)</p>

          <pre class="fragment"><code class="javascript">
            // App.test.tsx

            const mockPosts = [
              { id: "1", title: "One Fetch Mock", body: "Lorem ipsum" },
              { id: "2", title: "Second Post Fetch Mock", body: "Some more content" }
            ];

            jest.mock("../api", () => ({
              readPosts: () => Promise.resolve(mockPosts)
            }));

            it("should render posts read from backend", async () => {
              render(&lt;App />);
            
              // Hier immer noch asnychroner Code (deswegen await), aber:
              // kein laufender Server mehr ben√∂tigt
              const articleOne = await screen.findByRole("heading", { name: "One" });
              expect(articleOne).toBeInTheDocument();

              expect(screen.getByText("Second Post")).toBeInTheDocument();
            });
          </code></pre>
          <p class="fragment">
            Beispiel:
            <code
              >blog-example/steps/6a-testing-with-api-module/src/__tests__/App_module_mock.test.tsx</code
            >
          </p>
        </section>
        <section>
          <h3>Ansatz #2: fetch API mocken</h3>
          <p>Es gibt mehrere Bibliothken mit fetch-Mocks</p>
          <p>
            F√ºr mich funktioniert
            <a href="https://www.npmjs.com/package/jest-fetch-mock" target="_blank"
              >jest-fetch-mock</a
            >
            am Besten
          </p>

          <pre class="fragment"><code class="javascript">
            // App.test.tsx
            it("should render posts read from backend", async () => {
              // setzen des Ergebnisses, das der n√§chste fetch-Aufruf zur√ºckliefern soll
              fetchMock.mockResponse(JSON.stringify(mockPosts));

              render(&lt;App />);
            
              // Immer noch asynchroner Code, aber kein "echter" fetch-Aufruf mehr,
              // zur√ºckgegeben wird das oben angegebene Ergebnis
              const articleOne = await screen.findByRole("heading", { name: "One Fetch Mock" });

              expect(articleOne).toBeInTheDocument();
            });

          </code></pre>
          <p class="fragment">
            Beispiel:
            <code
              >blog-example/steps/6a-testing-with-api-module/src/__tests__/App_jest_mock.test.tsx</code
            >
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Ansatz #3: Mock Service Worker (MSW)</h3>

          <p><a href="https://github.com/mswjs/msw" target="_blank">MSW</a></p>
          <p>
            MSW mockt echte Server-Aufrufe mit einem
            <a href="https://developer.mozilla.org/de/docs/Web/API/Service_Worker_API"
              >Service Worker</a
            >
          </p>
          <p>
            fetch-Aufrufe werden "richtig" ausgef√ºhrt, aber beantwortet von dem Service Worker Mock
          </p>

          <pre class="fragment"><code class="javascript">
            // PostList.test.js
            import { rest } from 'msw'
            import { setupServer } from 'msw/node'
            
            const server = setupServer(
              rest.get('/posts', (req, res, ctx) => {
                return res(ctx.json( mockPosts ))
              }),
            )

            test("it should render blog list", async () => {
              render(&lt;PostList />);
              // ...
            })
          </code></pre>
        </section>

        <!-- <section>
          <h2>√úbung: Ein Test f√ºr den PostEditor</h2>
          <p>Schritte:</p>
          <ol>
            <li class="fragment">Arbeite in <code>blog-example/workspace-typescript</code></li>
            <li class="fragment">
              Starte in einem neuen Terminal <code>npm test</code> (der Prozess l√§uft "ewig")
            </li>
            <li class="fragment">
              Es sollte einen fehlerhaften Test geben:
              <b><code>PostEditor.test.tsx</code></b
              >.
            </li>
            <li class="fragment">Warum? Weil der noch leer ist üò¨!</li>
            <li class="fragment">
              Implementiere den fehlenden Test. In der Datei<b><code>PostEditor.test.tsx</code></b>
              stehen TODOs daf√ºr
            </li>
          </ol>
          <p class="fragment">
            Hinweis: wenn Du die Datei speicherst, werden die Tests automatisch neu ausgef√ºhrt
            (solange Du
            <code>npm test</code> noch laufen hast), ansonsten kannst Du "a" auf der Kommandozeile
            dr√ºcken, zum erneuten Ausf√ºhren der Tests.
          </p>
          <p class="fragment">M√∂gliche L√∂sung in <code>steps/6-test</code></p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section> -->

        <section>
          <h2>Browser Tests</h2>
          <p>H√§ufig eingesetzt:</p>
          <ul>
            <li class="fragment">
              <a href="https://www.selenium.dev/">Selenium - The "classic"</a>
            </li>
            <li class="fragment">
              <a href="https://devexpress.github.io/testcafe/" target="_blank">TestCafe</a> (mit
              Support f√ºr sehr viele Browser, u.a. auch Cloud-Service
              <a href="https://www.browserstack.com/" target="_blank">BrowserStack</a>
            </li>
            <li class="fragment"><a href="https://www.cypress.io/" target="_blank">Cypress</a></li>
          </ul>
          <p class="fragment">
            In TestCafe und Cypress werden die Tests in JavaScript/TypeScript geschrieben, Selenium
            gibt's f√ºr mehrere Sprachen
          </p>
        </section>

        <section id="t-state">
          <h1>Teil V</h1>
          <h2>Externes Statemanagement mit Redux (und Context API als Vergleich)</h2>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Globaler Zustand</h3>
          <ul>
            <li class="fragment">
              Man kann Zustand in <b>lokalen Zustand</b> und <b>globalen Zustand</b> einteilen
            </li>
            <li class="fragment">
              <b>Lokaler Zustand</b> ist Zustand, der "mehr oder weniger" einer Komponente zur
              Verf√ºgung steht
            </li>
            <li class="fragment">
              <b>Globaler Zustand</b> hingegen ist f√ºr die ganze Anwendung oder gro√üe Teile davon
              zust√§ndig
            </li>
            <li class="fragment">Die √úbgerg√§nge sind flie√üend, es gibt keine fixe Definition</li>
            <li class="fragment">Beispiele f√ºr globalen Zustand: angemeldeter Benutzer, Theme</li>
          </ul>
        </section>

        <section>
          <h2>Motivation: Warum externes Statemanagement?</h2>
          <h3>ü§î Was f√ºr Probleme k√∂nnte es lokalem State (useState) geben?</h3>
        </section>
        <!-- 
        <section>
          <h2>Eine typische React-Anwendung in Komponenten</h2>
          <h3>Frage an Euch: was k√∂nnte es f√ºr Probleme geben?</h3>
          <img
            src="slides/images/typische-react-komponenten-hierarchie.png"
            style="height: 650px;"
          />
        </section>

        <section>
          <h3>Problem 1: √úber Komponenten verteilter Zustand</h3>
          <img src="slides/images/verteilter-zustand.png" style="height: 650px;" />
          <p>Wo muss ich nach Fehlern suchen? Wo ist die Logik?</p>
        </section>

        <section>
          <h3>Problem 2: Getrennte Komponentenhierarchien</h3>
          <img src="slides/images/zwei-komponenten-hierarchien.png" style="height: 650px;" />
          <p>Geht entweder nicht oder "Gott-Komponente" entsteht</p>
        </section>

        <section>
          <h3>Problem 3: Gemeinsamer ("globaler") Zustand</h3>
          <img src="slides/images/gemeinsam-genutzter-state.png" style="height: 650px;" />
          <p>Wie kommt Zustand von ganz oben nach ganz unten?</p>
        </section>

        <section>
          <h3>Problem 4: UI und Logik vermischt</h3>
          <img src="slides/images/ui-und-logic-vermischt.png" style="height: 650px;" />
          <p>Wiederverwendung? React-unabh√§ngigkeit? Testbarkeit?</p>
        </section> -->

        <!-- <section>
          <h3>External Statemanagement</h3>
          <div class="fragment">
            <p>Habt ihr Ideen?</p>
            <p>Wie k√∂nnen wir Zustand und/oder Logik aus den Komponenten befreien?</p>
          </div>
        </section> -->

        <section id="t-context">
          <h2>Context API</h2>
          <p>Hintergrund: Context API</p>
          <p>Kein Statemanagement, aber h√§ufig zusammen erw√§hnt</p>
          <p>√úberblick: üëâ excalidraw</p>
        </section>

        <section>
          <h2>Im Detail: Context API</h2>
          <p>Beispiel: <code>blog-example/steps/30-complete-app-with-hooks</code></p>
        </section>

        <section>
          <h2>Context...</h2>
          <p>
            <em
              >erlaubt das Durchreichen von Informationen ohne explizites angeben als Properties</em
            >
          </p>

          <ul>
            <li class="fragment">funktioniert nur innerhalb einer Hierarchie-Ebene</li>
            <li class="fragment">es k√∂nnen beliebg viele (fachliche) Context definiert werden</li>
            <li class="fragment">besteht aus <code>Provider</code> und <code>Consumer</code></li>
            <li class="fragment">
              <a href="https://reactjs.org/docs/context.html" target="_blank">Doku</a>
            </li>
          </ul>
        </section>

        <section>
          <h2>Context Factory</h2>
          <p>
            <em>erzeugt ein Objekt, mit <b>zwei Komponenten</b></em>
          </p>
          <ul>
            <li class="fragment">
              <code>Provider</code>, stellt Objekt mit Key-Value-Paaren zur Verf√ºgung (der
              Context-"Value")
            </li>
            <li class="fragment">
              <code>Consumer</code> wird in eigener Komponente verwendet, um auf einen Context
              zuzugreifen ("versteckt" durch useContext Hook)
            </li>
          </ul>
          <pre class="fragment"><code data-trim contenteditable class="line-numbers" data-leftpad>
                      import react from "React";

                      const AuthContext = React.createContext();

                      // erzeugt:
                      // AuthContext.Provider 
                      // AuthContext.Consumer
                              </code></pre>
        </section>

        <section>
          <h2>Context Provider</h2>
          <p><em>Eine React-Komponente, die einen Context zur Verf√ºng stellt</em></p>
          <ul>
            <li class="fragment">
              wird innerhalb einer eigenen Komponente in <code>render</code> eingebunden
            </li>
            <li class="fragment">Nimmt ein Objekt ("Context") mit beliebigen Werten entgegen</li>
          </ul>
          <pre class="fragment"><code data-trim contenteditable class="line-numbers" data-leftpad>
                      const AuthContext = React.createContext();

                      function AuthProvider() {
                          const [ currentUser, setCurrentUser ] = React.useState(null);
                          const contextValue = {
                            // the current theme
                            currentUser,
                      
                            // function to set new theme
                            login: name => setCurrentUser(name),
                            logout: () => setCurrentUser(null)
                          };
                      
                          return &lt;AuthContext.Provider value={contextValue}>
                            {props.children}
                          &lt;/AuthContext.Provider>;
                        }
                      }                    
</code></pre>
        </section>

        <section>
          <h2>useContext-Hook</h2>
          <p><em>Zugriff auf die Werte aus dem Context</em></p>
          <p>
            In allen Komponenten unterhalb der Provider Komponente, kann mit useContext auf den
            Kontext zugegriffen werden
          </p>

          <pre class="fragment"><code class="javascript">
function UserBadge() {
  const { currentUser } = React.useContext(AuthContext);

  return currentUser  ? &lt;h1>Welcome, {currentUser}&lt;h1> : null;
}            
          </code></pre>

          <p class="fragment">Aufrufen einer Funktion aus dem Context</p>
          <p class="fragment">√Ñndert im Context den Zustand der Provider-Komponente</p>
          <p class="fragment">Alle Konsumer werden neu gerendert</p>
          <pre class="fragment"><code class="javascript">
function UserBadge() {
  const { currentUser, logout } = React.useContext(AuthContext);

  return currentUser  ? 
    &lt;>&lt;h1>Welcome, {currentUser}&lt;h1>&lt;button onClick={logut}>Logout&lt;/button>&lt;/> 
    : null;
}                
          </code></pre>
        </section>

        <section id="t-redux">
          <h2>External Statemanagement mit Redux</h2>
          <h3>Demo: Redux & Redux Devtools</h3>
          <p>üëâ steps/5-redux</p>
        </section>

        <!-- <section>
          <h2>Redux</h2>
          <h3></h3>

          <p class="todo">Mit Redux aus 2020_0922_react_state.html abgleichen</p>
          <p class="todo">Mit 2020_react_advanced.html abgleichen, DA SIND AUCH √úBUNGEN DRIN!</p>
        </section> -->

        <section>
          <h3>Wiederholung</h3>
          <h2>Render Cycle in Pure React</h2>
          <img src="slides/images/redux-01-react-cycle-no-redux.png" style="height: 650px;" />
        </section>

        <section>
          <h2>Redux extrahiert die Verantwortlichkeiten</h2>
          <img src="slides/images/redux-02-extracting-responsibility.png" style="width: 900px;" />
        </section>

        <section>
          <h2>Redux im Code</h2>
          <p>(npm start in advanced/workspace-redux)</p>
        </section>

        <section>
          <h2>Strukturierter √úberblick √ºber alle Redux Teile</h2>
        </section>

        <section data-markdown>
          <textarea data-template>
            ### Redux: Konzepte

            * **Store**: eine Art "Datenbank", die au√üerhalb der Komponentenhierachie liegt. Hier ist der globale Zustand untergebracht. Komponenten werden √ºber Ver√§nderungen informiert und k√∂nnen sich re-rendern
            * **Actions**: Einfache JavaScript-Objekte, die beschreiben was in einer Anwendung passiert. Bestehen aus einem Type und einem fachlichen Payload.
            * **Reducer**-Funktionen: Funktionen, in denen die Logik zur Verarbeitung des Zustands untergebracht ist. Sie erhalten eine Action und einen (alten) Zustand, verarbeiten die Action und liefern neuen Zustand zur√ºck.
            * **Action Creator**: Factory-Funktionen, die Action Objekte erzeugen
          </textarea>
        </section>
        <!-- ============================================================================= -->
        <section>
          <h3>Actions</h3>
          <ul>
            <li class="fragment">
              Pure JavaScript-Objekte, die eine Aktion in der Anwendung beschreiben
            </li>
            <li class="fragment">Haben √ºblicherweise <b>type</b> und <b>payload</b></li>
            <li class="fragment">√úber das <b>type</b>-Property k√∂nnen sie identifiziert werden</li>
            <li class="fragment">Der <b>Payload</b> enth√§lt Action-spezifische Daten</li>
          </ul>

          <pre class="fragment"><code class="javascript">
  clearDraftAction = {
    type: "editor/clearDraft"; // kein Payload erforderlich
  }

  setDraftTitleAction = {
    type: "editor/setDraftTtiel",
    newTitle: "..."  // Action-spezifischer Payload (hier: der neue Blog-Titel)
  }
</code></pre>
        </section>
        <section>
          <h3>Reducer-Funktion #1</h3>
          <ul>
            <li class="fragment">
              ...erh√§lt einen (vorherigen) Zustand und eine <em>Action</em> als Parameter √ºbergeben
            </li>
            <li class="fragment">...verarbeitet die Action</li>
            <li class="fragment">...liefert dann den neuen, aktualisierten Zustand zur√ºck</li>
            <li class="fragment">...muss Seiteneffekt frei sein ("pure function")</li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
          reducer(old_state, action) => new_state
        </code></pre>

          <p class="fragment">
            <em>In React mit useReducer (ohne Redux) einsetzbar</em>
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Die reducer-Funktion #2</h3>
          <ul>
            <li class="fragment">
              Bekommt den vorherigen Zustand √ºbergeben und liefert neuen Zustand zur√ºck (oder den
              unver√§nderten alten)
            </li>
            <li class="fragment">
              Zustand ist immutable! Kann mit der
              <a href="https://github.com/immerjs/immer">Bibliothek "immer"</a> kombiniert werden
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function editorReducer(state = initalDraftPost, action) {
              switch (action.type) {
                case "editor/clearDraft":
                  return initalDraftPost;
                case "editor/setDraftBody":
                  return { ...state, body: action.body };
                case "editor/setDraftTitle":
                  return { ...state, title: action.title };
                default:
                  return state;
              }
            }
      </code></pre>
        </section>

        <section>
          <h3>Redux: Store, Reducer und Actions</h3>
          <ul>
            <li class="fragment">
              Der Store, d.h. der globale Zustand, wird ausschlie√ülich √ºber reducer-Funktionen
              verwaltet
            </li>
            <li class="fragment">
              Jede reducer-Funktion verwaltet einen "Teil-Zustand" des globalen Zustandes. Die
              reducer k√∂nnen sich untereinander nicht sehen und nicht auf die anderen Teile des
              gloablen Zustands zugreifen. Ein Teil-Zustand wird auch als "Slice" bezeichnet (also
              ein Anwendungsteil)
            </li>
            <li class="fragment">
              Wenn Du den Store mit einer Datenbank vergleichst, w√§re ein solcher Teilzustand so
              etwas wie eine Tabelle
            </li>
            <li class="fragment">
              Die reducer werden beim Starten der Anwendung in Redux registriert
            </li>
            <li class="fragment">
              Dadurch ist eine gute Entkopplung m√∂glich: ein Teil der Anwendung informiert √ºber eine
              Aktion ("User hat sich eingeloggt", "Theme wurde ver√§ndert") und alle interessierten
              Anwendungsteile k√∂nnen darauf reagieren
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Redux: Actions ausl√∂sen</h3>
          <ul>
            <li class="fragment">Actions werden an <b>alle</b> Reducer-Funktionen verteilt</li>
            <li class="fragment">
              Zum Ausl√∂sen einer Action gibt auch von Redux eine <code>dispatch</code>-Funktion, an
              die Du mit dem <code>useDispatch</code> Hook von Redux gelangst.
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function PostEditor() {
              const dispatch = useDispatch();

              function handleTitleChange(newTitle) {
                dispatch({ type: "editor/setDraftTitle", title });
              }

              // ...

              &lt;input onChange={(e) => handleTitleChange(e.target.value) />
            }
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Action Creator...</h3>
          <ul>
            <li class="fragment">...sind "Factory-Funktionen", die Action-Objekte erzeugen</li>
            <li class="fragment">...sind optional, werden aber nahezu immer verwendet</li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function setDraftTitle(newTitle) {
              return { 
                type: "editor/setDraftTitle", 
                title 
              };
            }
            }
          </code></pre>

          <p class="fragment">ü§î Wof√ºr k√∂nnten Action Creator sinnvoll sein?</p>
          <ul>
            <li class="fragment">Stellen sicher, dass Objekte korrekt aussehen</li>
            <li class="fragment">Verbergen interne Struktur der Actions vor der Anwendung</li>
            <li class="fragment">K√∂nnen plausibilit√§tspr√ºfungen machen</li>
            <li class="fragment">
              K√∂nnen Daten konvertieren, bevor sie in die Action √ºbernommen werden
            </li>
          </ul>
        </section>

        <section>
          <h3>Redux: Zugriff auf den globalen Zustand</h3>
          <ul>
            <li class="fragment">
              Komponenten k√∂nnen aus dem globalen Zustand (Store) die Daten ausw√§hlen, die sie
              ben√∂tigen
            </li>
            <li class="fragment">
              Die Hierarchie-Ebene spielt dabei keine Rolle, weil der Zustand au√üerhalb, "neben" den
              UI Komponenten liegt
            </li>
            <li class="fragment">
              Nur wenn sich die ausgew√§hlten Daten in einer Kompoente √§ndern, wird die Komponente
              neu gerendert
            </li>
            <li class="fragment">
              Der <code>useSelector</code> Hook von Redux erwartet eine Callback-Funktion, die
              aufgerufen wird, sobald sich <em>irgendetwas</em> im Store ver√§ndert hat
            </li>
            <li class="fragment">Dieser Callback-Funktion wird der komplette Store √ºbergeben.</li>
            <li class="fragment">
              Aus dem Store w√§hlt die Komponente die f√ºr sie relevanten Daten aus und liefert sie
              zur√ºck
            </li>
            <li class="fragment">
              Nur wenn sich diese zur√ºckgelieferten Daten ver√§ndert haben, wird die Komponente neu
              gerendert
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
              function PostEditor() {
                const draftTitle = useSelector(state => state.editor.draftTitle);

                //  ...
              }
            </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>useSelector - Details</h3>
          <ul>
            <li class="fragment">
              Um festzustellen, ob sich die ausgew√§hlten Daten ver√§ndert haben, pr√ºft Redux auf
              <b>Identit√§t</b>!
            </li>
            <li class="fragment">
              Es wird deshalb empfohlen, nur einzelne Werte (keine Objekte) aus dem Store
              auszuw√§hlen - stattdessen mehrere useSelector-Aufrufe machen. Bei Objekten musst Du
              eventuell die
              <a href="https://react-redux.js.org/api/hooks#equality-comparisons-and-updates"
                >shallowEqual-Funktion</a
              >
              √ºbergeben.
            </li>
            <li class="fragment">
              Du kannst nat√ºrlich auch "abgeleitete" Daten zur√ºckliefern, Redux vergleicht nur den
              von dir zur√ºckgelieferten Wert, unabh√§ngig davon, ob er "direkt" aus dem Store kommt
              oder basierend auf dem Store "berechnet" wurde
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            function AppHeader() {
              // "abgeleiteter" Zustand
              const hasDraftPost = useSelector(
                state => state.editor.draftTitle !== "" || state.editor.draftBody !== ""
              );
            }

            // √ºbergebene Selector-Callback-Funktion 
            //    wird bei JEDER √Ñnderung des Stores ausgef√ºhrt
            // AppHeader wird nur neu gerendert, 
            //    wenn sich deren R√úCKGABEWERT √§ndert
          </code></pre>
        </section>

        <section>
          <h3>Der Store</h3>
          <p>Ein <em>einziger</em> Store h√§lt den <em>kompletten</em> Zustand</p>
          <p class="fragment">
            Der Store wird allen Componenten √ºber die Wrapper-Komponente <em>Provider</em>
            zur Verf√ºgung gestellt
          </p>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import { rootReducer } from './reducers';

// http://redux.js.org/docs/api/createStore.html
const store = createStore(
  rootReducer // reducer
);
ReactDOM.render(
&lt;Provider store={store}>
    &lt;App />
&lt;/Provider>,
mountNode
);
    </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Redux Dev Tools</h3>

          <p>
            Die Redux Dev Tools (Browser-Erweiterung) k√∂nnen in der Anwendung beim Konfiguration des
            Stores ein- oder ausgeschaltet werden
          </p>

          <ul>
            <li>
              <a
                href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=de"
                target="_blank"
                >Chrome</a
              >
            </li>
            <li>
              <a href="https://addons.mozilla.org/de/firefox/addon/reduxdevtools/" target="_blank"
                >Firefox</a
              >
            </li>
          </ul>
        </section>

        <section>
          <h2>√úbung: Der PostEditor mit Redux</h2>
          <p>Vorbereitung:</p>
          <ol>
            <li class="fragment">Workspace <code>blog-example/workspace-redux</code></li>
            <li class="fragment">Bitte <code>npm install</code> hier ausf√ºhren</li>
            <li class="fragment">
              danach <code>npm start</code> ausf√ºhren (den laufenden Prozess bitte beenden)
            </li>
            <li class="fragment">Den Workspace in der IDE/Editor √∂ffnen</li>
            <li class="fragment">
              Wenn die Anwendung l√§uft, bitte "Hand heben" in Zoom, dann geht's weiter mit der
              eigentlichen √úbung üôã‚Äç‚ôÄÔ∏è
            </li>
          </ol>
        </section>
        <section>
          <h2>√úbung: Der PostEditor mit Redux</h2>
          <p>
            Der Workspace enth√§lt zwei Verzeichnisse: <code>ui</code> f√ºr Komponenten und
            <code>redux</code> f√ºr Logik. Diese Aufteilung ist <em>nicht empfehlenswert</em> in
            "echten" Anwendungen (dort bitte nach Fachlichkeit aufteilen), macht uns hier aber das
            Leben einfacher.
          </p>

          <p>Schritte:</p>
          <ol>
            <li class="fragment">
              Implementiere in <code>editor-slice.js</code> die Action Creator-Funktionen (siehe
              dort)
            </li>
            <li class="fragment">Vervollst√§ndige die reducer-Funktion</li>
            <li class="fragment">
              Migriere den (nicht funktionierenden) <code>PostEditor</code> so, dass der Draft Post
              aus dem Redux State gelesen und aktualisiert wird (<code>useSelector</code> und
              <code>useDispatch</code>)
            </li>
            <li class="fragment">
              Vervollst√§ndige die <code>AppHeader</code>-Komponente, so dass diese den "Clear
              Draft"-Button anzeigen und ausl√∂sen kann
            </li>

            <li class="fragment">
              In den drei Dateien sind todos eingetragen.
            </li>
            <li class="fragment">M√∂gliche L√∂sung in <code>steps/5-redux</code></li>
            <li class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>
        <section>
          <h3>Redux</h3>
          <h2>Asynchrone Actions</h2>
          <p><em>Problem: Asynchronit√§t, z.B. beim Laden von Daten</em></p>
          <ul>
            <li class="fragment">
              Wo unterbringen?
              <ul>
                <li>Reducer sind Seiteneffekt-frei!</li>
                <li>Actions sind nur JavaScript-Objekte (keine Logik)!</li>
              </ul>
            </li>
            <li class="fragment">
              Weiteres Problem: fachliche Abl√§ufe meistens komplex(er) als nur eine Action.
              <ul>
                <li>
                  Typisch: Request Start, Request l√§uft, Request erfolgreich/Request fehlgeschlagen
                </li>
              </ul>
            </li>
            <li class="fragment">Redux bringt daf√ºr nix mit :-(</li>
            <li class="fragment">Es gibt aber Antworten: Thunk (Promi?), Saga, Observable</li>
          </ul>
        </section>
        <section>
          <h3>Redux</h3>
          <h2>Asynchrone Actions</h2>
          <em>Grunds√§tzliche Idee, bei allen Bibliotheken (Thunk, Saga, Observable) √§hnlich</em>
          <ul>
            <li class="fragment">
              Im <b>Action Creator</b> kann asynchroner Code ausgef√ºhrt werden
            </li>
            <li class="fragment">
              Es k√∂nnen <b>mehrere Actions</b> innerhalb des Action Creators dispatched werden
            </li>
            <li class="fragment">
              Alle genannten Bibliotheken werden √ºber <b>Middlewares</b> eingebunden
            </li>
          </ul>
        </section>

        <section>
          <h3>Middleware</h3>
          <ul>
            <li class="fragment">
              Eine Middleware-Funktion bekommt alle dispatchen Actions √ºbergeben, bevor sie in den
              Store gelangen
            </li>
            <li class="fragment">
              Die Middleware kann die Action annehmen, ver√§ndern, ablehnen und/oder weiterleiten
            </li>
            <li class="fragment">Typische Anwendungsf√§lle: Logging, asynchrone Verarbeitung</li>
            <li class="fragment">
              Die Middleware-Funktionen werden bei der Konfiguration des Stores angegeben
            </li>
            <li class="fragment">
              In der Regel schreibst Du keine Middlewares selbst, sondern verwendest fertige
            </li>
          </ul>
        </section>

        <section>
          <h3>Asynchrone Actions</h3>
          <em>Beispiel (konzeptionell)</em>
          <p>
            Schritt 1: <b>Dispatchen von Actions</b>: Komponente bleibt unver√§ndert, dispatched
            weiterhin eine Action, die wie eine "normale" Redux Action aussieht
          </p>
          <div class="fragment">
            <pre><code>
              import { loadPosts } from "./posts-slice";

              function App() {
                React.useEffect( 
                  () => dispatch(loadPosts()),
                  []
                );

                return ...;
            }
          </code></pre>
          </div>
        </section>
        <section>
          <h3>Asynchrone Actions</h3>
          <em>Beispiel (konzeptionell)</em>
          <p>
            Schritt 2: <b>Action Creator</b>: Hier k√∂nnen jetzt weitere Actions, auch asynchron,
            dispatched werden
          </p>
          <pre class="fragment"><code>
              // asynchroner Action Creator (pseudo code)
              function loadPosts() {

                dispatchAction "REQUEST_START"

                try {
                  posts = await loadPostsWithFetch() // ASYNCHRON !!!
                  dispatchAction "REQUEST_SUCCESS"
                  dispatchAction "SET_POSTS" posts
                } catch (err) {
                  dispatchAction "REQUEST_FAILURE" err
                }
              }
            </code></pre>
        </section>

        <section>
          <h3>Asynchrone Actions</h3>
          <em>Beispiel (konzeptionell)</em>
          <p>Schritt 3: <b>Reducer</b>: Unver√§ndert. Reducer empfangen "normale" Actions</p>
        </section>

        <section>
          <h2>Beispiele f√ºr Middlewares zum Arbeiten mit Asynchronit√§t</h2>
          <ul>
            <li>
              <a href="https://github.com/reduxjs/redux-thunk">Redux Thunk</a> (die "offizielle"
              L√∂sung)
            </li>

            <li>Redux Saga</li>
            <li>Redux Observable</li>
          </ul>
        </section>

        <section>
          <h2>Redux Thunk</h2>
          <ul>
            <li class="fragment">
              Ein Thunk Action Creator gibt kein Action-Objekt, sondern eine
              <b>Callback-Funktion</b> zur√ºck. Diese Funktion wird von Redux an die Middlewares
              weitergegeben. (Redux gibt nahezu alles, was wir dispatch √ºbergeben an die Middlewares
              bzw. den Store weiter...)
            </li>
            <li class="fragment">
              In der Callback-Funktion ist dann die (asynchrone) Logik untergebracht
            </li>
            <li class="fragment">
              Wenn die Thunk-Middleware eine Funktion entdeckt (und kein Objekt), ruft die
              Middleware diese Funktion auf, und √ºbergibt eine <code>dispatch</code>- und eine
              <code>getState</code>-Funktion
            </li>
            <li class="fragment">
              Mit <code>dispatch</code> kann die Callback-Funktion diverse weitere "regul√§re" und
              Thunk-Actions ausl√∂sen
            </li>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
            export function loadPosts() {
              return (dispatch, getState) => {

                dispatch(postsLoading());

                fetch("http://localhost:7000/posts")
                  .then(response => response.json())
                  .then(json => {
                    dispatch(postLoadingSucceeded(json));
                  })
                  .catch(err => {
                    dispatch(postLoadingFailed(err));
                  });
              };
            }    </code></pre>
          </ul>
          <!-- <p class="fragment">
                <strong
                  >Action-Creators sind die einzigen Teile einer Redux-Anwendung, die asynchrone
                  Operationen ausf√ºhren d√ºrfen</strong
                >
              </p> -->
        </section>
        <section>
          <h2>Redux Thunk</h2>
          <p>Thunk Actions k√∂nnen nicht nur f√ºr asynchone Anwendungsf√§lle verwendet werden</p>
          <ul>
            <li class="fragment">
              F√ºr Anwendungsf√§lle in den allgemein mehr als eine Action dispatched werden soll
            </li>
            <li class="fragment">
              Es ist darin erlaubt, beliebige Seiteneffkte auszuf√ºhren, z.B. eine uuid generieren
              oder auf die Uhrzeit zuzugreifen
            </li>
            <li class="fragment">
              Im Gegensatz zum Reducer hat ein Action-Creator Zugriff auf den gesamten State und
              kann z.B. eine Cache-Funktionali√§t implementieren
            </li>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
            export function loadPostsWithCache() {
              return (dispatch, getState) => {

                if (getState().posts.posts) {
                  // Posts sind schon geladen => nicht erneut laden
                  return;
                }


                dispatch(postsLoading());

                // ...wie gesehen: Posts laden etc.
              };
            }    </code></pre>
          </ul>
          <!-- <p class="fragment">
                <strong
                  >Action-Creators sind die einzigen Teile einer Redux-Anwendung, die asynchrone
                  Operationen ausf√ºhren d√ºrfen</strong
                >
              </p> -->
        </section>
        <section>
          <h2>Zusammenfassung Redux-Architektur</h2>
          <img
            src="slides/images/redux-03-resulting-redux-architecture.png"
            style="max-height: 650px;"
          />
        </section>
        <section>
          <h3>Lokaler Zustand ist weiterhin erlaubt und erw√ºnscht!</h3>
          <p>Es gibt diverse Orte, wo Zustand vorkommt!</p>
          <ul>
            <li class="fragment">Server und client</li>
            <li class="fragment">Komponenten lokaler State</li>
            <li class="fragment">Redux</li>
            <li class="fragment">URL, Session or Local Storage</li>
          </ul>
          <p class="fragment">Zustand immer so nah an dort halten, wo er gebraucht wird</p>
          <div class="fragment">
            <img src="slides/images/three-kinds-of-state.png" style="max-height: 650px;" />
          </div>
        </section>

        <section>
          <h3>Redux Toolkit</h3>
          <p>
            <em
              >"The official, opinionated, batteries-included toolset for efficient Redux
              development"</em
            >
          </p>
          <ul>
            <li><a href="https://redux-toolkit.js">https://redux-toolkit.js.org/</a></li>
            <li>
              Vorkonfiguriertes Setup (inklusive
              <a href="https://github.com/immerjs/immer">immer</a> f√ºr Reducer und Thunk Middleware)
            </li>
            <li>
              Vereinfacht erheblich das Arbeiten mit Reducer, generiert z.B. Action Creator zur
              Laufzeit
            </li>
            <li>Vereinfacht typische Anwendungsf√§lle wie API Calls</li>
            <li>
              Outstanding TypeScript support! Ihr wollt das nicht ohne TypeScript verwenden üòâ
            </li>
          </ul>
        </section>

        <section>
          <h3>createSlice</h3>
          <ul>
            <li class="fragment">
              Ein "Slice" repr√§sentiert einen fachnlichen "Schnitt" in Eurer Anwendung
            </li>
            <li class="fragment">
              Ein Slice wird mit der Funktion <code>createSlice</code> erzeugt
            </li>
            <li class="fragment">Diese Funktion erwartet ein Konfigurationsobjekt</li>
            <li class="fragment">
              √úber dieses Objekt k√∂nnen reducer und der initiale Zustand festgelegt werden
            </li>
            <li class="fragment">
              F√ºr jede reducer-Funktion wird per Default ein action-creator automatisch generiert
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            const hello = createSlice({
              name: "hello",
              initalState: { name: "world" },
              reducers: {
                greet(state, action) {
                  // ...
                }
              }
            })
          </code></pre>

          <pre class="fragment"><code class="javascript">
            const dispatch = useDispatch();

            dispatch(hello.actions.greet({
              name: "World"
            }))
          </code></pre>
        </section>

        <section>
          <h3>reducer</h3>
          <ul>
            <li class="fragment">
              Wie gesehen, bekommen reducer den slice-State und die Action √ºbergeben
            </li>
            <li class="fragment">
              Die reducer-Funktionen werden mit <b>immer</b> umschlossen, so dass der State dort
              <b>mutable</b> ist (bzw so aussieht, als ob er mutable ist)
            </li>
            <li class="fragment">
              Der State kann deshalb direkt bearbeitet werden oder es kann ein komplett neues Objekt
              zur√ºckgegeben werden
            </li>
          </ul>
          <pre class="fragment"><code class="javascript">
            const hello = createSlice({
              // ...
              reducers: {
                greet(state, action) {
                  state.name = action.payload.name;
                },
                clear() {
                  return { name: "" };
                }
              }
            })
          </code></pre>
        </section>
        <section>
          <h3>reducer und Action Creator</h3>
          <ul>
            <li class="fragment">
              Zu jeder reducer-Funktion wird eine Action-Creator-Funktion erzeugt
            </li>
            <li class="fragment">
              Diese Funktion erwartet einen Parameter: den Action-Payload (oder gar nichts)
            </li>
            <li class="fragment">
              Die Funktionen liegen unterhalb von <code>sliceName.actions</code> und k√∂nnen von dort
              exportiert werden, so dass die Anwendung darauf Zugriff hat
            </li>
          </ul>

          <pre class="fragment"><code class="javascript">
            const hello = createSlice({
              // ...
              reducers: {
                
                greet(state, action) { ... },
                clear() { ... }
                }
              }
            })   
          
            export const { greet, clear } = hello.actions;
          
          </code></pre>

          <pre class="fragment"><code class="javascript">
            import { greet } from "./hello-slice";

            // in der Komponente
            dispatch(greet({name: "Klaus"}));

            // ohne payload
            dispatch(clear());
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Asynchrone Actions</h3>
          <ul>
            <li class="fragment">
              Die Redux Thunk Middleware ist in Redux Toolkit integriert
            </li>
            <li class="fragment">
              Asynchrone Action Creator k√∂nnen aber nicht als reducer definiert werden, du schreibst
              sie wie in Redux au√üerhalb von createSlice hin.
            </li>
            <li class="fragment">
              Mit <a href="https://redux-toolkit.js.org/api/createAsyncThunk">createAsyncThunk</a>
              kannst Du vereinfachte Thunk-Actions schreiben, die automatisch Lifecycle Actions
              dispatchen (request started, request failed, ...)
            </li>
          </ul>
        </section>

        <section>
          <h2>√úbung: Redux Toolkit</h2>
          <p><em>Portiere den editor-slice auf Redux Toolkit (createSlice)</em></p>
          <p class="fragment">Vorbereitung:</p>
          <ol>
            <li class="fragment">
              Kopiere die Datei <code>store.js</code> aus
              <code>material/5-redux-toolkit/redux</code> in dein <code>src/redux</code>-Verzeichnis
              (bestehende Datei √ºberschreiben)
            </li>
            <li class="fragment">
              Kopiere die Datei <code>editor-slice.js</code> aus
              <code>material/5-redux-toolkit/redux</code> in dein <code>src/redux</code>-Verzeichnis
              (deine Datei ggf. sichern)
            </li>
          </ol>
          <p class="fragment">Schritte:</p>
          <ol>
            <li class="fragment">
              In editor-slice.js stehen TODOs, du musst die reducer-Funktionen implementieren
            </li>
            <li class="fragment">
              Der Rest der Anwendung sollte danach unver√§ndert laufen. Deswegen achte auf die
              korrekten Namen der reducer-Funktionen!
            </li>
          </ol>
          <p class="fragment">M√∂gliche L√∂sung in <code>steps/5-redux-toolkit</code></p>
          <p class="fragment">Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</p>
        </section>

        <section>
          <h2>Geschafft! üòä</h2>
          <h3>Vielen Dank f√ºr Eure Teilnahme!</h3>
          <h3>Viel Spa√ü und Erfolg mit React!</h3>
          <p>
            Wenn ihr noch Fragen habt, k√∂nnt ihr mich erreichen:
          </p>
          <p>Mail: <a href="mailto:nils@nilshartmann.net">nils@nilshartmann.net</a></p>
          <p>
            Web: <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a>
          </p>
          <p>
            Twitter: <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
        </section>
      </div>
    </div>

    <script src="slides/reveal.js/lib/js/head.min.js"></script>
    <script src="slides/reveal.js/js/reveal.js"></script>
    <script src="slides/reveal.js/lib/jquery-2.2.4.js"></script>
    <script src="slides/reveal-config.js"></script>
  </body>
</html>
